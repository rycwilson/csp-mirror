function cspInitVideo(o,e){function n(){if(e.find(".cs-testimonial").hasClass("no-video")||0===r.length||0!==r.find("img").not("#cs-video-placeholder").length)return!1;var n=function(){r.append('<img src="'+s+'">')},t=function(){r.empty().append('<img id="cs-video-placeholder" src="'+v+'" alt="video placeholder">')};"youtube"===u?(s="//img.youtube.com/vi/"+m+"/hqdefault.jpg",o.when(n()).done(function(){var n=e.find(".cs-story-video-xs img, .cs-story-video img"),t=0;n.on("load",function(){++t===n.length&&(120===n[0].naturalWidth?i():o.when(r.find("img").after('<div class="play-button"><i class="fa fa-2x fa-inverse fa-play"></i></div>')).done(a))})})):"vimeo"===u&&o.ajax({url:"//vimeo.com/api/oembed.json?url=https%3A//vimeo.com/"+m,method:"GET",dataType:"json"}).done(function(e){s=e.thumbnail_url_with_play_button,o.when(n()).then(a)}).fail(function(){o("body").hasClass("stories show")?i():(t(),r.css("padding-bottom","0"))})}function i(){o(".cs-story-video-xs").remove(),o.ajax({url:$storyCard.attr("href"),method:"GET",data:{remove_video:!0},dataType:"html"}).done(function(){o(".cs-testimonial").empty().append(html)})}function t(){"youtube"===u?l.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"):"vimeo"===u&&l.postMessage('{"method":"pause"}',"*")}function a(){o("#cs-video-modal").on("show.bs.modal",function(o){o.preventDefault()}).on("hide.bs.modal",t),o(".cs-content").on("click",".cs-close",t).on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){}),o(".video-thumb-container").on("click","img, .play-button",function(){"youtube"===u?d=(f.includes("?")?"&":"?")+"autoplay=1&enablejsapi=1&controls=0&iv_load_policy=3&showinfo=0&rel=0":"vimeo"===u&&(d=(f.includes("?")?"&":"?")+"autoplay=1"),f+=d,c.one("load",function(){o(this).closest(".video-thumb-container").children(":not(iframe)").remove(),o(this).removeClass("hidden")}).attr("src",f)})}var d,s,c=o(window).width()<768?e.find(".cs-story-video-xs iframe"):e.find(".cs-story-video iframe"),l=c[0].contentWindow,r=e.find(".video-thumb-container"),u=r.data("provider"),m=r.data("video-id"),f=r.data("video-url"),v="/assets/video_placeholder-865dd38072045fea311aab1e5d19e29bd4db0bc02f79c5a066121c8f0ac3ba90.jpg";n()}