function cspInitVideo(o,n){function i(){if(n.find(".cs-testimonial").hasClass("no-video")||0===c.length||0!==c.find("img").not("#cs-video-placeholder").length)return!1;var i=function(){c.append('<img src="'+d+'">')},t=function(){c.empty().append('<img id="cs-video-placeholder" src="'+VIDEO_PLACEHOLDER_URL+'" alt="video placeholder">')};"youtube"===l?(d="https://img.youtube.com/vi/"+r+"/hqdefault.jpg",o.when(i()).done(function(){var i=n.find(".cs-story-video-xs img, .cs-story-video img"),t=0;i.on("load",function(){++t===i.length&&(120===i[0].naturalWidth?e():o.when(c.find("img").after('<div class="play-button"><i class="fa fa-2x fa-inverse fa-play"></i></div>')).done(a))})})):"vimeo"===l&&o.ajax({url:"https://vimeo.com/api/oembed.json?url=https%3A//vimeo.com/"+r,method:"GET",dataType:"json"}).done(function(n){d=n.thumbnail_url_with_play_button,o.when(i()).then(a)}).fail(function(){o("body").hasClass("stories show")?e():(t(),c.css("padding-bottom","0"))})}function e(){o(".cs-story-video-xs").remove(),o.ajax({url:$storyCard.attr("href"),method:"GET",data:{remove_video:!0},dataType:"html"}).done(function(){o(".cs-testimonial").empty().append(html)})}function t(){"youtube"===l?f.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"):"vimeo"===l&&f.postMessage('{"method":"pause"}',"*")}function a(){o("#cs-video-modal").on("show.bs.modal",function(o){o.preventDefault()}).on("hide.bs.modal",t),o(".cs-content").on("click",".cs-close",t).on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){}),o(".video-thumb-container").on("click","img, .play-button",function(){"youtube"===l?s=(u.includes("?")?"&":"?")+"autoplay=1&enablejsapi=1&controls=0&iv_load_policy=3&showinfo=0&rel=0":"vimeo"===l&&(s=(u.includes("?")?"&":"?")+"autoplay=1"),u+=s,m.one("load",function(){o(this).closest(".video-thumb-container").children(":not(iframe)").remove(),o(this).removeClass("hidden")}).attr("src",u)})}console.log("cspInitVideo");var s,d,c=n.find(".video-thumb-container"),l=c.data("provider"),r=c.data("video-id"),u=c.data("video-url");if(["youtube","vimeo"].includes(l))var m=o(window).width()<768?n.find(".cs-story-video-xs iframe"):n.find(".cs-story-video iframe"),f=m[0].contentWindow;i()}