/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.7
 *
 */
function BestInPlaceEditor(t){"use strict";this.element=t,this.initOptions(),this.bindForm(),this.initPlaceHolder(),jQuery(this.activator).bind("click",{editor:this},this.clickHandler)}function ready(){initPlugins(),initSocialShare(),configUnderscore(),VIDEO_LIB.loadThumbnail(),BIP.listeners(),select2Listeners(),initLinkedIn(),editTagsListeners(),miscListeners(),storiesFilterListeners(),configS3Upload(),bootstrapSwitchListeners(),contributionsListeners(),storyContentEditor(),updateSelectBoxesIfQueryString();var t=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;t&&replaceStateOnGalleryLoad()}function initPlugins(){$(".best_in_place").best_in_place(),$(".bs-switch").bootstrapSwitch({size:"small"}),$("input[type='tel']").inputmask("999-999-9999"),$("#story-tags-form").dirtyFields(),$(".story-tags").select2({theme:"bootstrap",placeholder:"select tags"}),$(".stories-filter").select2({theme:"bootstrap",width:"style"}),$(".new-contributor-role").select2({theme:"bootstrap"}),$(".new-contributor-referrer").select2({theme:"bootstrap",placeholder:"Who referred you to this contributor?"}),$("#email-confirmation-editor").summernote({focus:!1,toolbar:[["font",["bold","italic","underline"]],["para",["ul","ol","paragraph"]]]}),$('[data-toggle="popover"]').popover(),$("#story-content").summernote({toolbar:[["style",["style"]],["font",["bold","italic","underline"]],["fontname",["fontname"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["codeview"]],["help",["help"]]]})}function initSocialShare(){$("#social-buttons .linkedin").on("click",function(t){$(this).socialSharePopup(t,550,561),$("meta[property='og:image']").prop("content",$(this).data("og-image")),$("meta[property='og:image:width']").prop("content",$(this).data("og-width")),$("meta[property='og:image:height']").prop("content",$(this).data("og-height"))}),$("#social-buttons .twitter").on("click",function(t){$(this).socialSharePopup(t,550,253)}),$("#social-buttons .facebook").on("click",function(t){$(this).socialSharePopup(t,560,656)}),$.fn.socialSharePopup=function(t,e,n){t.preventDefault();var i=void 0!==window.screenLeft?window.screenLeft:screen.left,o=void 0!==window.screenTop?window.screenTop:screen.top,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;e=e||"550",n=n||"442";var s=r/2-e/2+i,l=a/2-n/2+o,c=("undefined"!=typeof this.attr("title")?this.attr("title"):"Social Share","width="+e+",height="+n+",top="+l+",left="+s+",resizable=no");window.open(this.attr("href"),"shareWindow",c).focus()}}function initLinkedIn(){"object"!=typeof IN?(console.log("loading in.js ..."),$.getScript("//platform.linkedin.com/in.js")):console.log("in.js already loaded"),window.setTimeout(function(){$("#contribution-connections iframe").each(function(){$(this).prop("tabIndex","-1")})},1e3)}function configUnderscore(){_.templateSettings={evaluate:/\{\{(.+?)\}\}/g,interpolate:/\{\{=(.+?)\}\}/g,escape:/\{\{-(.+?)\}\}/g},Array.prototype.each_slice=function(t,e){for(var n=0,i=this.length;i>n;n+=t)e.call(this,this.slice(n,n+t))}}function editTagsListeners(){$("#story-tags-form select").on("change",function(t){$(".edit-tags").hasClass("hidden")&&$(".edit-tags").toggleClass("hidden")}),$("#edit-tags-cancel").on("click",function(t){t.preventDefault()})}function updateSelectBoxesIfQueryString(){var t=$("[name='category_select']"),e=$("[name='product_select']"),n=getQueryString("category"),i=getQueryString("product"),o=null;n&&(o=t.find("option[data-slug='"+n+"']").val(),t.val(o).trigger("change.select2")),i&&(o=e.find("option[data-slug='"+i+"']").val(),e.val(o).trigger("change.select2"))}function updateGallery(t){setTimeout(function(){$("#stories-gallery").masonry().append(t).masonry("appended",t),centerLogos()},400)}function storiesFilterListeners(){$(".stories-filter").on("change",function(){var t=$(this).attr("name").replace("_select",""),e=$(this).val();$("[name='category_select']"),$("[name='product_select']");$.ajax({url:"/stories",method:"get",data:{filter:{tag:t,id:e}},success:function(n,i,o){getFilteredStoriesSuccess(n,!0,t,e,!1)}})}),window.onpopstate=function(t){var e=$("[name='category_select']"),n=e.length,i=n?e.find(":selected").val():null,o=$("[name='product_select']"),r=o.length,a=r?o.find(":selected").val():null,s=null,l=null;t.state?(s=t.state.filter.tag,l=t.state.filter.id,$.ajax({url:"/stories",method:"get",data:{filter:{tag:s,id:l}},success:function(t,e,n){getFilteredStoriesSuccess(t,!1,s,l,!0)}})):n&&"0"!==i?replaceStateOnGalleryLoad("category",i):r&&"0"!==a?replaceStateOnGalleryLoad("product",a):replaceStateOnGalleryLoad("all","0")}}function pushStateStoriesGallery(t,e,n){"0"===e?history.pushState({filter:{tag:"all",id:"0"}},null,"/"):"category"===t?history.pushState({filter:{tag:"category",id:e}},null,"/?category="+n):"product"===t&&history.pushState({filter:{tag:"product",id:e}},null,"/?product="+n)}function getFilteredStoriesSuccess(t,e,n,i,o){var r=JSON.parse(t.story_tiles),a=t.filter_slug,s=t.is_curator,l=_.template($("#stories-template").html()),c=null,d=$("[name='category_select']"),u=$("[name='product_select']");$("#stories-gallery").empty(),o&&($("[name='category_select'] + span").find(".select2-selection").each(function(){$(this).blur()}),$("[name='product_select'] + span").find(".select2-selection").each(function(){$(this).blur()})),r.length&&(r.forEach(function(e){e.products.length&&e.story.published?c="/"+e.customer.slug+"/"+e.products[0].slug+"/"+e.story.slug:e.story.published?c="/"+e.customer.slug+"/"+e.story.slug:t.curator&&(c="/stories/"+e.story.id+"/edit"),$.extend(e,{path:c})}),updateGallery($(l({isCurator:s,storyTiles:r}))),e&&pushStateStoriesGallery(n,i,a),"category"===n&&u.length?(d.val(i.toString()).trigger("change.select2"),u.val("0").trigger("change.select2")):"product"===n&&d.length?(u.val(i.toString()).trigger("change.select2"),d.val("0").trigger("change.select2")):"all"===n&&(u.val("0").trigger("change.select2"),d.val("0").trigger("change.select2")))}function replaceStateOnGalleryLoad(t,e){if(t&&e)history.replaceState({filter:{tag:t,id:e}},null,window.location.href);else if($("#stories-gallery").length){var n=$("[name='category_select']"),i=$("[name='product_select']"),o=getQueryString("category"),r=getQueryString("product"),a=o?"category":r?"product":"all",s=o?n.find("option[data-slug='"+o+"']").val():r?i.find("option[data-slug='"+r+"']").val():"0";history.replaceState({filter:{tag:a,id:s}},null,window.location.href)}}function miscListeners(){$("#new-contributor-modal").on("hidden.bs.modal",function(){$(this).find("form")[0].reset(),$(".new-contributor-role").select2("val","customer"),$(".new-contributor-referrer").select2("val","")}),$(".modal").on("shown.bs.modal",function(){$(this).find("#contributor_first_name").focus()}),$("#new-contributor-button").on("focus",function(){var t=$(this);window.setTimeout(function(){t.blur()},220)}),$("#new-result").on("input",function(){$(this).val().length>0?$(this).closest("form").find("button").prop("disabled",!1):$(this).closest("form").find("button").prop("disabled",!0)}),$("#new-prompt").on("input",function(){$(this).val().length>0?$(this).closest("form").find("button").prop("disabled",!1):$(this).closest("form").find("button").prop("disabled",!0)}),$("#results-list").on("click",".delete-result",function(){var t=$(this);$.ajax({url:t.data("action"),method:"delete",success:function(e,n,i){t.closest(".row").next("br").remove(),t.closest(".row").remove()}})}),$("#prompts-list").on("click",".delete-prompt",function(){var t=$(this);$.ajax({url:t.data("action"),method:"delete",success:function(e,n,i){t.closest(".row").next("br").remove(),t.closest(".row").remove()}})}),$("#approval-pdf-btn").on("click",function(t){var e=$(this).data("missing-curator-info");if(e.length){t.preventDefault();var n="Can't generate document because the following Curator fields are missing: "+e.join(", ");flashDisplay(n,"danger")}})}function bootstrapSwitchListeners(){$(".bs-switch").on("switchChange.bootstrapSwitch",function(t,e){$(this).parent().submit()}),$("#story-publish-form").on("ajax:success",function(t,e){var n=$("#story_published"),i=$("#story_logo_published");e.published||n.bootstrapSwitch("state")!==!0?e.logo_published&&i.bootstrapSwitch("state")===!1&&i.bootstrapSwitch("state",!0):n.bootstrapSwitch("state",!1)})}function select2Listeners(){$(".select2").prev().on("select2:unselecting",function(t){$(this).data("unselecting",!0)}).on("select2:open",function(t){$(this).data("unselecting")&&($(this).removeData("unselecting"),$(this).select2("close"))})}function contributionsListeners(){$("#confirm-email-form").on("submit",function(){$(this).closest(".modal-content").find(".modal-title").addClass("hidden"),$(this).closest(".modal-content").find(".progress").removeClass("hidden")}),$(".contribution-cards").on("ajax:success",".best_in_place[data-bip-attribute='linkedin_url']",function(t,e){var n=$(this).text(),i=$(this).closest(".contribution-card"),o=i.find(".research");0===i.find("iframe").length&&"add url ..."!==n?(i.append("<br style='line-height:10px'><div class='row text-center'><script type='IN/MemberProfile' data-id='"+n+"' data-format='inline' data-related='false' data-width='340'></script></div>"),IN.parse(),initLinkedIn(),o.attr("href",n),o.html("<i class='fa fa-linkedin-square bip-clickable-fa'>")):0!==i.find("iframe").length&&"add url ..."===n?(i.find("br:last").remove(),i.find("div:last").remove(),$.get("/contributions/"+i.data("contribution-id"),function(t,e){"customer"==t.role?o.attr("href","//google.com/search?q="+t.contributor.first_name+"+"+t.contributor.last_name+"+"+t.success.customer.name):o.attr("href","//google.com/search?q="+t.contributor.first_name+"+"+t.contributor.last_name+"+")},"json"),o.html("<i class='glyphicon glyphicon-user bip-clickable'></i>")):(i.find("br:last").remove(),i.find("div:last").remove(),i.append("<br style='line-height:10px'><div class='row text-center'><script type='IN/MemberProfile' data-id='"+n+"' data-format='inline' data-related='false' data-width='340'></script></div>"),IN.parse(),initLinkedIn())}),$(".accordion-toggle").on("click",function(){if($(this).attr("href").match(/info/)){var t=$(this).closest(".accordion").find("div.accordion-body[id*='submission']");t.hasClass("in")&&t.removeClass("in")}else if($(this).attr("href").match(/submission/)){var e=$(this).closest(".accordion").find("div.accordion-body[id*='info']");e.hasClass("in")&&e.removeClass("in")}}),$(".contribution-cards").on("ajax:success",".best_in_place[data-bip-attribute='notes']",function(t,e){var n=$(this),i=$(this).attr("id").match(/_(\d+)_notes$/)[1];$(".best_in_place[id*='"+i+"_notes']").each(function(t){if(!$(this).is(n)){var e=$(this).clone();e.html(n.html()),e.attr("data-bip-value",n.html()),e.attr("data-bip-original-content",n.html()),$(this).parent().empty().append(e),e.best_in_place()}})}),$(".contribution-cards").on("ajax:success",".best_in_place[data-bip-attribute='phone']",function(t,e){var n=$(this),i=$(this).attr("id").match(/_(\d+)_phone$/)[1];$(".best_in_place[id*='"+i+"_phone']").each(function(t){if(!$(this).is(n)){var e=$(this).clone();e.html(n.html()),e.attr("data-bip-value",n.html()),e.attr("data-bip-original-content",n.html()),$(this).parent().empty().append("<span>Phone:&nbsp;&nbsp;</span>",e),e.best_in_place()}})})}function storyContentEditor(){var t=$("#story-content"),e=t.next(),n=$("[type='submit'][form='story-content-form']"),i=($("[type='reset'][form='story-content-form']"),$("[form='story-content-form']")),o=e.find(".note-editable"),r=e.find(".note-toolbar > .note-btn-group > button, .note-toolbar > .note-btn-group > .note-btn-group > button");o.attr("contenteditable","false").css({"background-color":"#f5f5f5","pointer-events":"none"}),r.css({"background-color":"#f5f5f5","pointer-events":"none"}),$("#edit-story-content").on("click",function(){$(this).css({"pointer-events":"none",color:"#e3e3e3"}),o.attr("contenteditable","true").css({"background-color":"white","pointer-events":"auto"}),r.css({"background-color":"white","pointer-events":"auto"}),i.removeClass("hidden")}),e.on("click",".note-view",function(){i.prop("disabled")?i.prop("disabled",!1):i.prop("disabled",!0)}),$("#story-content-form").on("reset",function(){t.summernote("code",t.text()),n.click()})}function initMasonry(){$(".grid").masonry({itemSelector:".grid-item",columnWidth:220,isFitWidth:!0}),centerLogos(),$("#stories-gallery").css("visibility","visible")}function centerLogos(){$("#stories-gallery img, .drawer-items img").each(function(t){var e=$(this).outerHeight(),n=parseInt($(this).css("max-height")),i=n-e;if(i){var o=i/2+parseInt($(this).css("margin-top"),10);$(this).css("margin-top",o),$(this).css("margin-bottom",i/2)}})}!function(e){e.fn.extend({slimScroll:function(n){var i={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},o=e.extend(i,n);return this.each(function(){function i(t){if(d){var t=t||window.event,n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3);var i=t.target||t.srcTarget||t.srcElement;e(i).closest("."+o.wrapperClass).is(w.parent())&&r(n,!0),t.preventDefault&&!k&&t.preventDefault(),k||(t.returnValue=!1)}}function r(t,e,n){k=!1;var i=t,r=w.outerHeight()-E.outerHeight();if(e&&(i=parseInt(E.css("top"))+t*parseInt(o.wheelStep)/100*E.outerHeight(),i=Math.min(Math.max(i,0),r),i=t>0?Math.ceil(i):Math.floor(i),E.css({top:i+"px"})),g=parseInt(E.css("top"))/(w.outerHeight()-E.outerHeight()),i=g*(w[0].scrollHeight-w.outerHeight()),n){i=t;var a=i/w[0].scrollHeight*w.outerHeight();a=Math.min(Math.max(a,0),r),E.css({top:a+"px"})}w.scrollTop(i),w.trigger("slimscrolling",~~i),l(),c()}function a(t){window.addEventListener?(t.addEventListener("DOMMouseScroll",i,!1),t.addEventListener("mousewheel",i,!1)):document.attachEvent("onmousewheel",i)}function s(){m=Math.max(w.outerHeight()/w[0].scrollHeight*w.outerHeight(),b),E.css({height:m+"px"});var t=m==w.outerHeight()?"none":"block";E.css({display:t})}function l(){if(s(),clearTimeout(p),g==~~g){if(k=o.allowPageScroll,v!=g){var t=0==~~g?"top":"bottom";w.trigger("slimscroll",t)}}else k=!1;return v=g,m>=w.outerHeight()?void(k=!0):(E.stop(!0,!0).fadeIn("fast"),void(o.railVisible&&S.stop(!0,!0).fadeIn("fast")))}function c(){o.alwaysVisible||(p=setTimeout(function(){o.disableFadeOut&&d||u||h||(E.fadeOut("slow"),S.fadeOut("slow"))},1e3))}var d,u,h,p,f,m,g,v,y="<div></div>",b=30,k=!1,w=e(this);if(w.parent().hasClass(o.wrapperClass)){var C=w.scrollTop();if(E=w.siblings("."+o.barClass),S=w.siblings("."+o.railClass),s(),e.isPlainObject(n)){if("height"in n&&"auto"==n.height){w.parent().css("height","auto"),w.css("height","auto");var x=w.parent().parent().height();w.parent().css("height",x),w.css("height",x)}else if("height"in n){var $=n.height;w.parent().css("height",$),w.css("height",$)}if("scrollTo"in n)C=parseInt(o.scrollTo);else if("scrollBy"in n)C+=parseInt(o.scrollBy);else if("destroy"in n)return E.remove(),S.remove(),void w.unwrap();r(C,!1,!0)}}else if(!(e.isPlainObject(n)&&"destroy"in n)){o.height="auto"==o.height?w.parent().height():o.height;var _=e(y).addClass(o.wrapperClass).css({position:"relative",overflow:"hidden",width:o.width,height:o.height});w.css({overflow:"hidden",width:o.width,height:o.height});var S=e(y).addClass(o.railClass).css({width:o.size,height:"100%",position:"absolute",top:0,display:o.alwaysVisible&&o.railVisible?"block":"none","border-radius":o.railBorderRadius,background:o.railColor,opacity:o.railOpacity,zIndex:90}),E=e(y).addClass(o.barClass).css({background:o.color,width:o.size,position:"absolute",top:0,opacity:o.opacity,display:o.alwaysVisible?"block":"none","border-radius":o.borderRadius,BorderRadius:o.borderRadius,MozBorderRadius:o.borderRadius,WebkitBorderRadius:o.borderRadius,zIndex:99}),T="right"==o.position?{right:o.distance}:{left:o.distance};S.css(T),E.css(T),w.wrap(_),w.parent().append(E),w.parent().append(S),o.railDraggable&&E.bind("mousedown",function(n){var i=e(document);return h=!0,t=parseFloat(E.css("top")),pageY=n.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,E.css("top",currTop),r(0,E.position().top,!1)}),i.bind("mouseup.slimscroll",function(t){h=!1,c(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1}),S.hover(function(){l()},function(){c()}),E.hover(function(){u=!0},function(){u=!1}),w.hover(function(){d=!0,l(),c()},function(){d=!1,c()}),w.bind("touchstart",function(t,e){t.originalEvent.touches.length&&(f=t.originalEvent.touches[0].pageY)}),w.bind("touchmove",function(t){if(k||t.originalEvent.preventDefault(),t.originalEvent.touches.length){var e=(f-t.originalEvent.touches[0].pageY)/o.touchScrollStep;r(e,!0),f=t.originalEvent.touches[0].pageY}}),s(),"bottom"===o.start?(E.css({top:w.outerHeight()-E.outerHeight()}),r(0,!0)):"top"!==o.start&&(r(e(o.start).position().top,null,!0),o.alwaysVisible||E.hide()),a(this)}}),this}}),e.fn.extend({slimscroll:e.fn.slimScroll})}(jQuery);var mvpready_admin=function(){"use strict";var t=function(){var t=$(".navbar-notification");t.find("> .dropdown-toggle").click(function(t){mvpready_core.isLayoutCollapsed()&&(window.location=$(this).prop("href"))}),t.find(".notification-list").slimScroll({height:225,railVisible:!0})};return{init:function(){mvpready_core.navEnhancedInit(),mvpready_core.navHoverInit({delay:{show:250,hide:350}}),t(),mvpready_core.initLayoutToggles(),mvpready_core.initBackToTop(),mvpready_helpers.initAccordions(),mvpready_helpers.initFormValidation(),mvpready_helpers.initTooltips(),mvpready_helpers.initLightbox(),mvpready_helpers.initSelect(),mvpready_helpers.initIcheck(),mvpready_helpers.initDataTableHelper(),mvpready_helpers.initiTimePicker(),mvpready_helpers.initDatePicker()}}}();$(function(){mvpready_admin.init()}),/* ========================================================================
 * bootstrap-switch - v3.3.2
 * http://www.bootstrap-switch.org
 * ========================================================================
 * Copyright 2012-2013 Mattia Larentis
 *
 * ========================================================================
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================================
 */
function(){var t=[].slice;!function(e,n){"use strict";var i;return i=function(){function t(t,n){null==n&&(n={}),this.$element=e(t),this.options=e.extend({},e.fn.bootstrapSwitch.defaults,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")},n),this.$wrapper=e("<div>",{"class":function(t){return function(){var e;return e=[""+t.options.baseClass].concat(t._getClasses(t.options.wrapperClass)),e.push(t.options.state?""+t.options.baseClass+"-on":""+t.options.baseClass+"-off"),null!=t.options.size&&e.push(""+t.options.baseClass+"-"+t.options.size),t.options.disabled&&e.push(""+t.options.baseClass+"-disabled"),t.options.readonly&&e.push(""+t.options.baseClass+"-readonly"),t.options.indeterminate&&e.push(""+t.options.baseClass+"-indeterminate"),t.options.inverse&&e.push(""+t.options.baseClass+"-inverse"),t.$element.attr("id")&&e.push(""+t.options.baseClass+"-id-"+t.$element.attr("id")),e.join(" ")}}(this)()}),this.$container=e("<div>",{"class":""+this.options.baseClass+"-container"}),this.$on=e("<span>",{html:this.options.onText,"class":""+this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor}),this.$off=e("<span>",{html:this.options.offText,"class":""+this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor}),this.$label=e("<span>",{html:this.options.labelText,"class":""+this.options.baseClass+"-label"}),this.$element.on("init.bootstrapSwitch",function(e){return function(){return e.options.onInit.apply(t,arguments)}}(this)),this.$element.on("switchChange.bootstrapSwitch",function(e){return function(){return e.options.onSwitchChange.apply(t,arguments)}}(this)),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch")}return t.prototype._constructor=t,t.prototype.state=function(t,e){return"undefined"==typeof t?this.options.state:this.options.disabled||this.options.readonly?this.$element:this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.options.indeterminate&&this.indeterminate(!1),t=!!t,this.$element.prop("checked",t).trigger("change.bootstrapSwitch",e),this.$element)},t.prototype.toggleState=function(t){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",t)},t.prototype.size=function(t){return"undefined"==typeof t?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(""+this.options.baseClass+"-"+this.options.size),t&&this.$wrapper.addClass(""+this.options.baseClass+"-"+t),this._width(),this._containerPosition(),this.options.size=t,this.$element)},t.prototype.animate=function(t){return"undefined"==typeof t?this.options.animate:(t=!!t,t===this.options.animate?this.$element:this.toggleAnimate())},t.prototype.toggleAnimate=function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(""+this.options.baseClass+"-animate"),this.$element},t.prototype.disabled=function(t){return"undefined"==typeof t?this.options.disabled:(t=!!t,t===this.options.disabled?this.$element:this.toggleDisabled())},t.prototype.toggleDisabled=function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(""+this.options.baseClass+"-disabled"),this.$element},t.prototype.readonly=function(t){return"undefined"==typeof t?this.options.readonly:(t=!!t,t===this.options.readonly?this.$element:this.toggleReadonly())},t.prototype.toggleReadonly=function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(""+this.options.baseClass+"-readonly"),this.$element},t.prototype.indeterminate=function(t){return"undefined"==typeof t?this.options.indeterminate:(t=!!t,t===this.options.indeterminate?this.$element:this.toggleIndeterminate())},t.prototype.toggleIndeterminate=function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(""+this.options.baseClass+"-indeterminate"),this._containerPosition(),this.$element},t.prototype.inverse=function(t){return"undefined"==typeof t?this.options.inverse:(t=!!t,t===this.options.inverse?this.$element:this.toggleInverse())},t.prototype.toggleInverse=function(){var t,e;return this.$wrapper.toggleClass(""+this.options.baseClass+"-inverse"),e=this.$on.clone(!0),t=this.$off.clone(!0),this.$on.replaceWith(t),this.$off.replaceWith(e),this.$on=t,this.$off=e,this.options.inverse=!this.options.inverse,this.$element},t.prototype.onColor=function(t){var e;return e=this.options.onColor,"undefined"==typeof t?e:(null!=e&&this.$on.removeClass(""+this.options.baseClass+"-"+e),this.$on.addClass(""+this.options.baseClass+"-"+t),this.options.onColor=t,this.$element)},t.prototype.offColor=function(t){var e;return e=this.options.offColor,"undefined"==typeof t?e:(null!=e&&this.$off.removeClass(""+this.options.baseClass+"-"+e),this.$off.addClass(""+this.options.baseClass+"-"+t),this.options.offColor=t,this.$element)},t.prototype.onText=function(t){return"undefined"==typeof t?this.options.onText:(this.$on.html(t),this._width(),this._containerPosition(),this.options.onText=t,this.$element)},t.prototype.offText=function(t){return"undefined"==typeof t?this.options.offText:(this.$off.html(t),this._width(),this._containerPosition(),this.options.offText=t,this.$element)},t.prototype.labelText=function(t){return"undefined"==typeof t?this.options.labelText:(this.$label.html(t),this._width(),this.options.labelText=t,this.$element)},t.prototype.handleWidth=function(t){return"undefined"==typeof t?this.options.handleWidth:(this.options.handleWidth=t,this._width(),this._containerPosition(),this.$element)},t.prototype.labelWidth=function(t){return"undefined"==typeof t?this.options.labelWidth:(this.options.labelWidth=t,this._width(),this._containerPosition(),this.$element)},t.prototype.baseClass=function(t){return this.options.baseClass},t.prototype.wrapperClass=function(t){return"undefined"==typeof t?this.options.wrapperClass:(t||(t=e.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(t).join(" ")),this.options.wrapperClass=t,this.$element)},t.prototype.radioAllOff=function(t){return"undefined"==typeof t?this.options.radioAllOff:(t=!!t,t===this.options.radioAllOff?this.$element:(this.options.radioAllOff=t,this.$element))},t.prototype.onInit=function(t){return"undefined"==typeof t?this.options.onInit:(t||(t=e.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=t,this.$element)},t.prototype.onSwitchChange=function(t){return"undefined"==typeof t?this.options.onSwitchChange:(t||(t=e.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=t,this.$element)},t.prototype.destroy=function(){var t;return t=this.$element.closest("form"),t.length&&t.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element},t.prototype._width=function(){var t,e;return t=this.$on.add(this.$off),t.add(this.$label).css("width",""),e="auto"===this.options.handleWidth?Math.max(this.$on.width(),this.$off.width()):this.options.handleWidth,t.width(e),this.$label.width(function(t){return function(n,i){return"auto"!==t.options.labelWidth?t.options.labelWidth:e>i?e:i}}(this)),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)},t.prototype._containerPosition=function(t,e){return null==t&&(t=this.options.state),this.$container.css("margin-left",function(e){return function(){var n;return n=[0,"-"+e._handleWidth+"px"],e.options.indeterminate?"-"+e._handleWidth/2+"px":t?e.options.inverse?n[1]:n[0]:e.options.inverse?n[0]:n[1]}}(this)),e?setTimeout(function(){return e()},50):void 0},t.prototype._init=function(){var t,e;return t=function(t){return function(){return t._width(),t._containerPosition(null,function(){return t.options.animate?t.$wrapper.addClass(""+t.options.baseClass+"-animate"):void 0})}}(this),this.$wrapper.is(":visible")?t():e=n.setInterval(function(i){return function(){return i.$wrapper.is(":visible")?(t(),n.clearInterval(e)):void 0}}(this),50)},t.prototype._elementHandlers=function(){return this.$element.on({"change.bootstrapSwitch":function(t){return function(n,i){var o;return n.preventDefault(),n.stopImmediatePropagation(),o=t.$element.is(":checked"),t._containerPosition(o),o!==t.options.state?(t.options.state=o,t.$wrapper.toggleClass(""+t.options.baseClass+"-off").toggleClass(""+t.options.baseClass+"-on"),i?void 0:(t.$element.is(":radio")&&e("[name='"+t.$element.attr("name")+"']").not(t.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),t.$element.trigger("switchChange.bootstrapSwitch",[o]))):void 0}}(this),"focus.bootstrapSwitch":function(t){return function(e){return e.preventDefault(),t.$wrapper.addClass(""+t.options.baseClass+"-focused")}}(this),"blur.bootstrapSwitch":function(t){return function(e){return e.preventDefault(),t.$wrapper.removeClass(""+t.options.baseClass+"-focused")}}(this),"keydown.bootstrapSwitch":function(t){return function(e){if(e.which&&!t.options.disabled&&!t.options.readonly)switch(e.which){case 37:return e.preventDefault(),e.stopImmediatePropagation(),t.state(!1);case 39:return e.preventDefault(),e.stopImmediatePropagation(),t.state(!0)}}}(this)})},t.prototype._handleHandlers=function(){return this.$on.on("click.bootstrapSwitch",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.state(!1),t.$element.trigger("focus.bootstrapSwitch")}}(this)),this.$off.on("click.bootstrapSwitch",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.state(!0),t.$element.trigger("focus.bootstrapSwitch")}}(this))},t.prototype._labelHandlers=function(){return this.$label.on({"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(t){return function(e){return t._dragStart||t.options.disabled||t.options.readonly?void 0:(e.preventDefault(),e.stopPropagation(),t._dragStart=(e.pageX||e.originalEvent.touches[0].pageX)-parseInt(t.$container.css("margin-left"),10),t.options.animate&&t.$wrapper.removeClass(""+t.options.baseClass+"-animate"),t.$element.trigger("focus.bootstrapSwitch"))}}(this),"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(t){return function(e){var n;if(null!=t._dragStart&&(e.preventDefault(),n=(e.pageX||e.originalEvent.touches[0].pageX)-t._dragStart,!(n<-t._handleWidth||n>0)))return t._dragEnd=n,t.$container.css("margin-left",""+t._dragEnd+"px")}}(this),"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(t){return function(e){var n;if(t._dragStart)return e.preventDefault(),t.options.animate&&t.$wrapper.addClass(""+t.options.baseClass+"-animate"),t._dragEnd?(n=t._dragEnd>-(t._handleWidth/2),t._dragEnd=!1,t.state(t.options.inverse?!n:n)):t.state(!t.options.state),t._dragStart=!1}}(this),"mouseleave.bootstrapSwitch":function(t){return function(e){return t.$label.trigger("mouseup.bootstrapSwitch")}}(this)})},t.prototype._externalLabelHandler=function(){var t;return t=this.$element.closest("label"),t.on("click",function(e){return function(n){return n.preventDefault(),n.stopImmediatePropagation(),n.target===t[0]?e.toggleState():void 0}}(this))},t.prototype._formHandler=function(){var t;return t=this.$element.closest("form"),t.data("bootstrap-switch")?void 0:t.on("reset.bootstrapSwitch",function(){return n.setTimeout(function(){return t.find("input").filter(function(){return e(this).data("bootstrap-switch")}).each(function(){return e(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)},t.prototype._getClasses=function(t){var n,i,o,r;if(!e.isArray(t))return[""+this.options.baseClass+"-"+t];for(i=[],o=0,r=t.length;r>o;o++)n=t[o],i.push(""+this.options.baseClass+"-"+n);return i},t}(),e.fn.bootstrapSwitch=function(){var n,o,r;return o=arguments[0],n=2<=arguments.length?t.call(arguments,1):[],r=this,this.each(function(){var t,a;return t=e(this),a=t.data("bootstrap-switch"),a||t.data("bootstrap-switch",a=new i(this,o)),"string"==typeof o?r=a[o].apply(a,n):void 0}),r},e.fn.bootstrapSwitch.Constructor=i,e.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}(window.jQuery,window)}.call(this),/*!
 * Select2 4.0.2
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var e;return function(){if(!e||!e.requirejs){e?n=e:e={};/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
var t,n,i;!function(e){function o(t,e){return k.call(t,e)}function r(t,e){var n,i,o,r,a,s,l,c,d,u,h,p=e&&e.split("/"),f=y.map,m=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),a=t.length-1,y.nodeIdCompat&&C.test(t[a])&&(t[a]=t[a].replace(C,"")),t=p.slice(0,p.length-1).concat(t),d=0;d<t.length;d+=1)if(h=t[d],"."===h)t.splice(d,1),d-=1;else if(".."===h){if(1===d&&(".."===t[2]||".."===t[0]))break;d>0&&(t.splice(d-1,2),d-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||m)&&f){for(n=t.split("/"),d=n.length;d>0;d-=1){if(i=n.slice(0,d).join("/"),p)for(u=p.length;u>0;u-=1)if(o=f[p.slice(0,u).join("/")],o&&(o=o[i])){r=o,s=d;break}if(r)break;!l&&m&&m[i]&&(l=m[i],c=d)}!r&&l&&(r=l,s=c),r&&(n.splice(0,s,r),t=n.join("/"))}return t}function a(t,n){return function(){var i=w.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),p.apply(e,i.concat([t,n]))}}function s(t){return function(e){return r(e,t)}}function l(t){return function(e){g[t]=e}}function c(t){if(o(v,t)){var n=v[t];delete v[t],b[t]=!0,h.apply(e,n)}if(!o(g,t)&&!o(b,t))throw new Error("No "+t);return g[t]}function d(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function u(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,p,f,m,g={},v={},y={},b={},k=Object.prototype.hasOwnProperty,w=[].slice,C=/\.js$/;f=function(t,e){var n,i=d(t),o=i[0];return t=i[1],o&&(o=r(o,e),n=c(o)),o?t=n&&n.normalize?n.normalize(t,s(e)):r(t,e):(t=r(t,e),i=d(t),o=i[0],t=i[1],o&&(n=c(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:n}},m={require:function(t){return a(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:u(t)}}},h=function(t,n,i,r){var s,d,u,h,p,y,k=[],w=typeof i;if(r=r||t,"undefined"===w||"function"===w){for(n=!n.length&&i.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(h=f(n[p],r),d=h.f,"require"===d)k[p]=m.require(t);else if("exports"===d)k[p]=m.exports(t),y=!0;else if("module"===d)s=k[p]=m.module(t);else if(o(g,d)||o(v,d)||o(b,d))k[p]=c(d);else{if(!h.p)throw new Error(t+" missing "+d);h.p.load(h.n,a(r,!0),l(d),{}),k[p]=g[d]}u=i?i.apply(g[t],k):void 0,t&&(s&&s.exports!==e&&s.exports!==g[t]?g[t]=s.exports:u===e&&y||(g[t]=u))}else t&&(g[t]=i)},t=n=p=function(t,n,i,o,r){if("string"==typeof t)return m[t]?m[t](n):c(f(t,n).f);if(!t.splice){if(y=t,y.deps&&p(y.deps,y.callback),!n)return;n.splice?(t=n,n=i,i=null):t=e}return n=n||function(){},"function"==typeof i&&(i=o,o=r),o?h(e,t,n,i):setTimeout(function(){h(e,t,n,i)},4),p},p.config=function(t){return p(t)},t._defined=g,i=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),o(g,t)||o(v,t)||(v[t]=[t,e,n])},i.amd={jQuery:!0}}(),e.requirejs=t,e.require=n,e.define=i}}(),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(t){function e(t){var e=t.prototype,n=[];for(var i in e){var o=e[i];"function"==typeof o&&"constructor"!==i&&n.push(i)}return n}var n={};n.Extend=function(t,e){function n(){this.constructor=t}var i={}.hasOwnProperty;for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},n.Decorate=function(t,n){function i(){var e=Array.prototype.unshift,i=n.prototype.constructor.length,o=t.prototype.constructor;i>0&&(e.call(arguments,t.prototype.constructor),o=n.prototype.constructor),o.apply(this,arguments)}function o(){this.constructor=i}var r=e(n),a=e(t);n.displayName=t.displayName,i.prototype=new o;for(var s=0;s<a.length;s++){var l=a[s];i.prototype[l]=t.prototype[l]}for(var c=(function(t){var e=function(){};t in i.prototype&&(e=i.prototype[t]);var o=n.prototype[t];return function(){var t=Array.prototype.unshift;return t.call(arguments,e),o.apply(this,arguments)}}),d=0;d<r.length;d++){var u=r[d];i.prototype[u]=c(u)}return i};var i=function(){this.listeners={}};return i.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},i.prototype.trigger=function(t){var e=Array.prototype.slice;this.listeners=this.listeners||{},t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(t,e){for(var n=0,i=t.length;i>n;n++)t[n].apply(this,e)},n.Observable=i,n.generateChars=function(t){for(var e="",n=0;t>n;n++){var i=Math.floor(36*Math.random());e+=i.toString(36)}return e},n.bind=function(t,e){return function(){t.apply(e,arguments)}},n._convertData=function(t){for(var e in t){var n=e.split("-"),i=t;if(1!==n.length){for(var o=0;o<n.length;o++){var r=n[o];r=r.substring(0,1).toLowerCase()+r.substring(1),r in i||(i[r]={}),o==n.length-1&&(i[r]=t[e]),i=i[r]}delete t[e]}}return t},n.hasScroll=function(e,n){var i=t(n),o=n.style.overflowX,r=n.style.overflowY;return o!==r||"hidden"!==r&&"visible"!==r?"scroll"===o||"scroll"===r?!0:i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth:!1},n.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},n.appendMany=function(e,n){if("1.7"===t.fn.jquery.substr(0,3)){var i=t();t.map(n,function(t){i=i.add(t)}),n=i}e.append(n)},n}),e.define("select2/results",["jquery","./utils"],function(t,e){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=t('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(e.message);i.append(n(o(e.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(t){this.hideLoading();var e=[];if(null==t.results||0===t.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));t.results=this.sort(t.results);for(var n=0;n<t.results.length;n++){var i=t.results[n],o=this.option(i);e.push(o)}this.$results.append(e)},n.prototype.position=function(t,e){var n=e.find(".select2-results");n.append(t)},n.prototype.sort=function(t){var e=this.options.get("sorter");return e(t)},n.prototype.setClasses=function(){var e=this;this.data.current(function(n){var i=t.map(n,function(t){return t.id.toString()}),o=e.$results.find(".select2-results__option[aria-selected]");o.each(function(){var e=t(this),n=t.data(this,"data"),o=""+n.id;null!=n.element&&n.element.selected||null==n.element&&t.inArray(o,i)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")});var r=o.filter("[aria-selected=true]");r.length>0?r.first().trigger("mouseenter"):o.first().trigger("mouseenter")})},n.prototype.showLoading=function(t){this.hideLoading();var e=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:e(t)},i=this.option(n);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(e){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(n.id=e._resultId),e.title&&(n.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]);for(var o in i){var r=i[o];n.setAttribute(o,r)}if(e.children){var a=t(n),s=document.createElement("strong");s.className="select2-results__group";t(s);this.template(e,s);for(var l=[],c=0;c<e.children.length;c++){var d=e.children[c],u=this.option(d);l.push(u)}var h=t("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});h.append(l),a.append(s),a.append(h)}else this.template(e,n);return t.data(n,"data",e),n},n.prototype.bind=function(e,n){var i=this,o=e.id+"-results";this.$results.attr("id",o),e.on("results:all",function(t){i.clear(),i.append(t.data),e.isOpen()&&i.setClasses()}),e.on("results:append",function(t){i.append(t.data),e.isOpen()&&i.setClasses()}),e.on("query",function(t){i.hideMessages(),i.showLoading(t)}),e.on("select",function(){e.isOpen()&&i.setClasses()}),e.on("unselect",function(){e.isOpen()&&i.setClasses()}),e.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),e.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),e.on("results:toggle",function(){var t=i.getHighlightedResults();0!==t.length&&t.trigger("mouseup")}),e.on("results:select",function(){var t=i.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?i.trigger("close",{}):i.trigger("select",{data:e})}}),e.on("results:previous",function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t);if(0!==n){var o=n-1;0===t.length&&(o=0);var r=e.eq(o);r.trigger("mouseenter");var a=i.$results.offset().top,s=r.offset().top,l=i.$results.scrollTop()+(s-a);0===o?i.$results.scrollTop(0):0>s-a&&i.$results.scrollTop(l)}}),e.on("results:next",function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t),o=n+1;if(!(o>=e.length)){var r=e.eq(o);r.trigger("mouseenter");var a=i.$results.offset().top+i.$results.outerHeight(!1),s=r.offset().top+r.outerHeight(!1),l=i.$results.scrollTop()+s-a;0===o?i.$results.scrollTop(0):s>a&&i.$results.scrollTop(l)}}),e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")}),e.on("results:message",function(t){i.displayMessage(t)}),t.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-e+t.deltaY,o=t.deltaY>0&&e-t.deltaY<=0,r=t.deltaY<0&&n<=i.$results.height();o?(i.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):r&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var n=t(this),o=n.data("data");return"true"===n.attr("aria-selected")?void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:e,data:o}):i.trigger("close",{})):void i.trigger("select",{originalEvent:e,data:o})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var n=t(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:t(this)})})},n.prototype.getHighlightedResults=function(){var t=this.$results.find(".select2-results__option--highlighted");return t},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]"),n=e.index(t),i=this.$results.offset().top,o=t.offset().top,r=this.$results.scrollTop()+(o-i),a=o-i;r-=2*t.outerHeight(!1),2>=n?this.$results.scrollTop(0):(a>this.$results.outerHeight()||0>a)&&this.$results.scrollTop(r)}},n.prototype.template=function(e,n){var i=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),r=i(e,n);null==r?n.style.display="none":"string"==typeof r?n.innerHTML=o(r):t(n).append(r)},n}),e.define("select2/keys",[],function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return t}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},i.prototype.bind=function(t,e){var i=this,o=(t.id+"-container",t.id+"-results");this.container=t,this.$selection.on("focus",function(t){i.trigger("focus",t)}),this.$selection.on("blur",function(t){i._handleBlur(t)}),this.$selection.on("keydown",function(t){i.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()}),t.on("results:focus",function(t){i.$selection.attr("aria-activedescendant",t.data._resultId)}),t.on("selection:update",function(t){i.update(t.data)}),t.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",o),i._attachCloseHandler(t)}),t.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(t)}),t.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),t.on("disable",function(){i.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(e){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||t.contains(n.$selection[0],document.activeElement)||n.trigger("blur",e)},1)},i.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,function(e){var n=t(e.target),i=n.closest(".select2"),o=t(".select2.select2-container--open");o.each(function(){var e=t(this);if(this!=i[0]){var n=e.data("element");n.select2("close")}})})},i.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(t,e){var n=e.find(".selection");n.append(t)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},i}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,n,i){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,e),o.prototype.render=function(){var t=o.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},o.prototype.bind=function(t,e){var n=this;o.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(t){1===t.which&&n.trigger("toggle",{originalEvent:t})}),this.$selection.on("focus",function(t){}),this.$selection.on("blur",function(t){}),t.on("selection:update",function(t){n.update(t.data)})},o.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},o.prototype.display=function(t,e){var n=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(n(t,e))},o.prototype.selectionContainer=function(){return t("<span></span>")},o.prototype.update=function(t){if(0===t.length)return void this.clear();var e=t[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(e,n);n.empty().append(i),n.prop("title",e.title||e.text)},o}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(t,e,n){function i(t,e){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},i.prototype.bind=function(e,n){var o=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(t){o.trigger("toggle",{originalEvent:t})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){if(!o.options.get("disabled")){var n=t(this),i=n.parent(),r=i.data("data");o.trigger("unselect",{originalEvent:e,data:r})}})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(t,e){var n=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(n(t,e))},i.prototype.selectionContainer=function(){var e=t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return e},i.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=0;i<t.length;i++){var o=t[i],r=this.selectionContainer(),a=this.display(o,r);r.append(a),r.prop("title",o.title||o.text),r.data("data",o),e.push(r)}var s=this.$selection.find(".select2-selection__rendered");n.appendMany(s,e)}},i}),e.define("select2/selection/placeholder",["../utils"],function(t){function e(t,e,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var n=this.selectionContainer();return n.html(this.display(e)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},e.prototype.update=function(t,e){var n=1==e.length&&e[0].id!=this.placeholder.id,i=e.length>1;if(i||n)return t.call(this,e);this.clear();var o=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(o)},e}),e.define("select2/selection/allowClear",["jquery","../keys"],function(t,e){function n(){}return n.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(t){i._handleClear(t)}),e.on("keypress",function(t){i._handleKeyboardClear(t,e)})},n.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){e.stopPropagation();for(var i=n.data("data"),o=0;o<i.length;o++){var r={data:i[o]};if(this.trigger("unselect",r),r.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(t,n,i){i.isOpen()||(n.which==e.DELETE||n.which==e.BACKSPACE)&&this._handleClear(n)},n.prototype.update=function(e,n){if(e.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=t('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(t,e,n){function i(t,e,n){t.call(this,e,n)}return i.prototype.render=function(e){var n=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=e.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(t,e,i){var o=this;t.call(this,e,i),e.on("open",function(){o.$search.trigger("focus")}),e.on("close",function(){o.$search.val(""),o.$search.removeAttr("aria-activedescendant"),o.$search.trigger("focus")}),e.on("enable",function(){o.$search.prop("disabled",!1),o._transferTabIndex()}),e.on("disable",function(){o.$search.prop("disabled",!0)}),e.on("focus",function(t){o.$search.trigger("focus")}),e.on("results:focus",function(t){o.$search.attr("aria-activedescendant",t.id)}),this.$selection.on("focusin",".select2-search--inline",function(t){o.trigger("focus",t)}),this.$selection.on("focusout",".select2-search--inline",function(t){o._handleBlur(t)}),this.$selection.on("keydown",".select2-search--inline",function(t){t.stopPropagation(),o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented();var e=t.which;if(e===n.BACKSPACE&&""===o.$search.val()){var i=o.$searchContainer.prev(".select2-selection__choice");if(i.length>0){var r=i.data("data");o.searchRemoveChoice(r),t.preventDefault()}}});var r=document.documentMode,a=r&&11>=r;this.$selection.on("input.searchcheck",".select2-search--inline",function(t){return a?void o.$selection.off("input.search input.searchcheck"):void o.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(t){if(a&&"input"===t.type)return void o.$selection.off("input.search input.searchcheck");var e=t.which;e!=n.SHIFT&&e!=n.CTRL&&e!=n.ALT&&e!=n.TAB&&o.handleSearch(t)})},i.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},i.prototype.update=function(t,e){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";if(""!==this.$search.attr("placeholder"))t=this.$selection.find(".select2-selection__rendered").innerWidth();else{var e=this.$search.val().length+1;t=.75*e+"em"}this.$search.css("width",t)},i}),e.define("select2/selection/eventRelay",["jquery"],function(t){function e(){}return e.prototype.bind=function(e,n,i){var o=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];e.call(this,n,i),n.on("*",function(e,n){if(-1!==t.inArray(e,r)){n=n||{};var i=t.Event("select2:"+e,{params:n});o.$element.trigger(i),-1!==t.inArray(e,a)&&(n.prevented=i.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,e){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var i=e(t);n._cache[t]=i}return new n(n._cache[t])},n}),e.define("select2/diacritics",[],function(){var t={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s",
"\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};return t}),e.define("select2/data/base",["../utils"],function(t){function e(t,n){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,n){var i=e.id+"-result-";return i+=t.generateChars(4),i+=null!=n.id?"-"+n.id.toString():"-"+t.generateChars(4)},e}),e.define("select2/data/select",["./base","../utils","jquery"],function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var e=[],i=this;this.$element.find(":selected").each(function(){var t=n(this),o=i.item(t);e.push(o)}),t(e)},i.prototype.select=function(t){var e=this;if(t.selected=!0,n(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var o=[];t=[t],t.push.apply(t,i);for(var r=0;r<t.length;r++){var a=t[r].id;-1===n.inArray(a,o)&&o.push(a)}e.$element.val(o),e.$element.trigger("change")});else{var i=t.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple"))return t.selected=!1,n(t.element).is("option")?(t.element.selected=!1,void this.$element.trigger("change")):void this.current(function(i){for(var o=[],r=0;r<i.length;r++){var a=i[r].id;a!==t.id&&-1===n.inArray(a,o)&&o.push(a)}e.$element.val(o),e.$element.trigger("change")})},i.prototype.bind=function(t,e){var n=this;this.container=t,t.on("select",function(t){n.select(t.data)}),t.on("unselect",function(t){n.unselect(t.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(t,e){var i=[],o=this,r=this.$element.children();r.each(function(){var e=n(this);if(e.is("option")||e.is("optgroup")){var r=o.item(e),a=o.matches(t,r);null!==a&&i.push(a)}}),e({results:i})},i.prototype.addOptions=function(t){e.appendMany(this.$element,t)},i.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup"),e.label=t.text):(e=document.createElement("option"),void 0!==e.textContent?e.textContent=t.text:e.innerText=t.text),t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var i=n(e),o=this._normalizeItem(t);return o.element=e,n.data(e,"data",o),i},i.prototype.item=function(t){var e={};if(e=n.data(t[0],"data"),null!=e)return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var i=t.children("option"),o=[],r=0;r<i.length;r++){var a=n(i[r]),s=this.item(a);o.push(s)}e.children=o}return e=this._normalizeItem(e),e.element=t[0],n.data(t[0],"data",e),e},i.prototype._normalizeItem=function(t){n.isPlainObject(t)||(t={id:t,text:t}),t=n.extend({},{text:""},t);var e={selected:!1,disabled:!1};return null!=t.id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),n.extend({},e,t)},i.prototype.matches=function(t,e){var n=this.options.get("matcher");return n(t,e)},i}),e.define("select2/data/array",["./select","../utils","jquery"],function(t,e,n){function i(t,e){var n=e.get("data")||[];i.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(n))}return e.Extend(i,t),i.prototype.select=function(t){var e=this.$element.find("option").filter(function(e,n){return n.value==t.id.toString()});0===e.length&&(e=this.option(t),this.addOptions(e)),i.__super__.select.call(this,t)},i.prototype.convertToOptions=function(t){function i(t){return function(){return n(this).val()==t.id}}for(var o=this,r=this.$element.find("option"),a=r.map(function(){return o.item(n(this)).id}).get(),s=[],l=0;l<t.length;l++){var c=this._normalizeItem(t[l]);if(n.inArray(c.id,a)>=0){var d=r.filter(i(c)),u=this.item(d),h=n.extend(!0,{},c,u),p=this.option(h);d.replaceWith(p)}else{var f=this.option(c);if(c.children){var m=this.convertToOptions(c.children);e.appendMany(f,m)}s.push(f)}}return s},i}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,n){function i(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype._applyDefaults=function(t){var e={data:function(t){return n.extend({},t,{q:t.term})},transport:function(t,e,i){var o=n.ajax(t);return o.then(e),o.fail(i),o}};return n.extend({},e,t,!0)},i.prototype.processResults=function(t){return t},i.prototype.query=function(t,e){function i(){var i=r.transport(r,function(i){var r=o.processResults(i,t);o.options.get("debug")&&window.console&&console.error&&(r&&r.results&&n.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(r)},function(){o.trigger("results:message",{message:"errorLoading"})});o._request=i}var o=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var r=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url.call(this.$element,t)),"function"==typeof r.data&&(r.data=r.data.call(this.$element,t)),this.ajaxOptions.delay&&""!==t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),e.define("select2/data/tags",["jquery"],function(t){function e(e,n,i){var o=i.get("tags"),r=i.get("createTag");void 0!==r&&(this.createTag=r);var a=i.get("insertTag");if(void 0!==a&&(this.insertTag=a),e.call(this,n,i),t.isArray(o))for(var s=0;s<o.length;s++){var l=o[s],c=this._normalizeItem(l),d=this.option(c);this.$element.append(d)}}return e.prototype.query=function(t,e,n){function i(t,r){for(var a=t.results,s=0;s<a.length;s++){var l=a[s],c=null!=l.children&&!i({results:l.children},!0),d=l.text===e.term;if(d||c)return r?!1:(t.data=a,void n(t))}if(r)return!0;var u=o.createTag(e);if(null!=u){var h=o.option(u);h.attr("data-select2-tag",!0),o.addOptions([h]),o.insertTag(a,u)}t.results=a,n(t)}var o=this;return this._removeOldTags(),null==e.term||null!=e.page?void t.call(this,e,n):void t.call(this,e,i)},e.prototype.createTag=function(e,n){var i=t.trim(n.term);return""===i?null:{id:i,text:i}},e.prototype.insertTag=function(t,e,n){e.unshift(n)},e.prototype._removeOldTags=function(e){var n=(this._lastTag,this.$element.find("option[data-select2-tag]"));n.each(function(){this.selected||t(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(t){function e(t,e,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),t.call(this,e,n)}return e.prototype.bind=function(t,e,n){t.call(this,e,n),this.$search=e.dropdown.$search||e.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(t,e,n){function i(t){o.trigger("select",{data:t})}var o=this;e.term=e.term||"";var r=this.tokenizer(e,this.options,i);r.term!==e.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),e.term=r.term),t.call(this,e,n)},e.prototype.tokenizer=function(e,n,i,o){for(var r=i.get("tokenSeparators")||[],a=n.term,s=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};s<a.length;){var c=a[s];if(-1!==t.inArray(c,r)){var d=a.substr(0,s),u=t.extend({},n,{term:d}),h=l(u);null!=h?(o(h),a=a.substr(s+1)||"",s=0):s++}else s++}return{term:a}},e}),e.define("select2/data/minimumInputLength",[],function(){function t(t,e,n){this.minimumInputLength=n.get("minimumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){return e.term=e.term||"",e.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):void t.call(this,e,n)},t}),e.define("select2/data/maximumInputLength",[],function(){function t(t,e,n){this.maximumInputLength=n.get("maximumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){return e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):void t.call(this,e,n)},t}),e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){var i=this;this.current(function(o){var r=null!=o?o.length:0;return i.maximumSelectionLength>0&&r>=i.maximumSelectionLength?void i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):void t.call(i,e,n)})},t}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},n.prototype.bind=function(){},n.prototype.position=function(t,e){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),e.define("select2/dropdown/search",["jquery","../utils"],function(t,e){function n(){}return n.prototype.render=function(e){var n=e.call(this),i=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(e,n,i){var o=this;e.call(this,n,i),this.$search.on("keydown",function(t){o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented()}),this.$search.on("input",function(e){t(this).off("keyup")}),this.$search.on("keyup input",function(t){o.handleSearch(t)}),n.on("open",function(){o.$search.attr("tabindex",0),o.$search.focus(),window.setTimeout(function(){o.$search.focus()},0)}),n.on("close",function(){o.$search.attr("tabindex",-1),o.$search.val("")}),n.on("results:all",function(t){if(null==t.query.term||""===t.query.term){var e=o.showSearch(t);e?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide")}})},n.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},n.prototype.showSearch=function(t,e){return!0},n}),e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n,i)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var n=e.slice(0),i=e.length-1;i>=0;i--){var o=e[i];this.placeholder.id===o.id&&n.splice(i,1)}return n},t}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(t){function e(t,e,n,i){this.lastParams={},t.call(this,e,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,n,i){var o=this;e.call(this,n,i),n.on("query",function(t){o.lastParams=t,o.loading=!0}),n.on("query:append",function(t){o.lastParams=t,o.loading=!0}),this.$results.on("scroll",function(){var e=t.contains(document.documentElement,o.$loadingMore[0]);if(!o.loading&&e){var n=o.$results.offset().top+o.$results.outerHeight(!1),i=o.$loadingMore.offset().top+o.$loadingMore.outerHeight(!1);n+50>=i&&o.loadMore()}})},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return e.html(n(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(t,e){function n(e,n,i){this.$dropdownParent=i.get("dropdownParent")||t(document.body),e.call(this,n,i)}return n.prototype.bind=function(t,e,n){var i=this,o=!1;t.call(this,e,n),e.on("open",function(){i._showDropdown(),i._attachPositioningHandler(e),o||(o=!0,e.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),e.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),e.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(e)}),this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})},n.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(t,e,n){e.attr("class",n.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(e){var n=t("<span></span>"),i=e.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var o=this,r="scroll.select2."+i.id,a="resize.select2."+i.id,s="orientationchange.select2."+i.id,l=this.$container.parents().filter(e.hasScroll);l.each(function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})}),l.on(r,function(e){var n=t(this).data("select2-scroll-position");t(this).scrollTop(n.y)}),t(window).on(r+" "+a+" "+s,function(t){o._positionDropdown(),o._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,i){var o="scroll.select2."+i.id,r="resize.select2."+i.id,a="orientationchange.select2."+i.id,s=this.$container.parents().filter(e.hasScroll);s.off(o),t(window).off(o+" "+r+" "+a)},n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),o=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=r.top,a.bottom=r.top+a.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},c=l.top<r.top-s.height,d=l.bottom>r.bottom+s.height,u={left:r.left,top:a.bottom},h=this.$dropdownParent;"static"===h.css("position")&&(h=h.offsetParent());var p=h.offset();u.top-=p.top,u.left-=p.left,n||i||(o="below"),d||!c||n?!c&&d&&n&&(o="below"):o="above",("above"==o||n&&"below"!==o)&&(u.top=a.top-s.height),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(u)},n.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.width="auto"),this.$dropdown.css(t)},n.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function t(e){for(var n=0,i=0;i<e.length;i++){var o=e[i];o.children?n+=t(o.children):n++}return n}function e(t,e,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,n,i)}return e.prototype.showSearch=function(e,n){return t(n.data.results)<this.minimumResultsForSearch?!1:e.call(this,n)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("close",function(){i._handleSelectOnClose()})},t.prototype._handleSelectOnClose=function(){var t=this.getHighlightedResults();if(!(t.length<1)){var e=t.data("data");null!=e.element&&e.element.selected||null==e.element&&e.selected||this.trigger("select",{data:e})}},t}),e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",function(t){i._selectTriggered(t)}),e.on("unselect",function(t){i._selectTriggered(t)})},t.prototype._selectTriggered=function(t,e){var n=e.originalEvent;n&&n.ctrlKey||this.trigger("close",{})},t}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Please delete "+e+" character";return 1!=e&&(n+="s"),n},inputTooShort:function(t){var e=t.minimum-t.input.length,n="Please enter "+e+" or more characters";return n},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(t,e,n,i,o,r,a,s,l,c,d,u,h,p,f,m,g,v,y,b,k,w,C,x,$,_,S,E,T){function P(){this.reset()}P.prototype.apply=function(u){if(u=t.extend(!0,{},this.defaults,u),null==u.dataAdapter){if(null!=u.ajax?u.dataAdapter=f:null!=u.data?u.dataAdapter=p:u.dataAdapter=h,u.minimumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,v)),u.maximumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,y)),u.maximumSelectionLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,b)),u.tags&&(u.dataAdapter=c.Decorate(u.dataAdapter,m)),(null!=u.tokenSeparators||null!=u.tokenizer)&&(u.dataAdapter=c.Decorate(u.dataAdapter,g)),null!=u.query){var T=e(u.amdBase+"compat/query");u.dataAdapter=c.Decorate(u.dataAdapter,T)}if(null!=u.initSelection){var P=e(u.amdBase+"compat/initSelection");u.dataAdapter=c.Decorate(u.dataAdapter,P)}}if(null==u.resultsAdapter&&(u.resultsAdapter=n,null!=u.ajax&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,x)),null!=u.placeholder&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,C)),u.selectOnClose&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,S))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=k;else{var I=c.Decorate(k,w);u.dropdownAdapter=I}if(0!==u.minimumResultsForSearch&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,_)),u.closeOnSelect&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,E)),null!=u.dropdownCssClass||null!=u.dropdownCss||null!=u.adaptDropdownCssClass){var F=e(u.amdBase+"compat/dropdownCss");u.dropdownAdapter=c.Decorate(u.dropdownAdapter,F)}u.dropdownAdapter=c.Decorate(u.dropdownAdapter,$)}if(null==u.selectionAdapter){if(u.multiple?u.selectionAdapter=o:u.selectionAdapter=i,null!=u.placeholder&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,r)),u.allowClear&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,a)),u.multiple&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,s)),null!=u.containerCssClass||null!=u.containerCss||null!=u.adaptContainerCssClass){var A=e(u.amdBase+"compat/containerCss");u.selectionAdapter=c.Decorate(u.selectionAdapter,A)}u.selectionAdapter=c.Decorate(u.selectionAdapter,l)}if("string"==typeof u.language)if(u.language.indexOf("-")>0){var D=u.language.split("-"),L=D[0];u.language=[u.language,L]}else u.language=[u.language];if(t.isArray(u.language)){var O=new d;u.language.push("en");for(var j=u.language,H=0;H<j.length;H++){var N=j[H],R={};try{R=d.loadPath(N)}catch(z){try{N=this.defaults.amdLanguageBase+N,R=d.loadPath(N)}catch(M){u.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+N+'" could not be automatically loaded. A fallback will be used instead.');continue}}O.extend(R)}u.translations=O}else{var B=d.loadPath(this.defaults.amdLanguageBase+"en"),U=new d(u.language);U.extend(B),u.translations=U}return u},P.prototype.reset=function(){function e(t){function e(t){return u[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function n(i,o){if(""===t.trim(i.term))return o;if(o.children&&o.children.length>0){for(var r=t.extend(!0,{},o),a=o.children.length-1;a>=0;a--){var s=o.children[a],l=n(i,s);null==l&&r.children.splice(a,1)}return r.children.length>0?r:n(i,r)}var c=e(o.text).toUpperCase(),d=e(i.term).toUpperCase();return c.indexOf(d)>-1?o:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:T,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},P.prototype.set=function(e,n){var i=t.camelCase(e),o={};o[i]=n;var r=c._convertData(o);t.extend(this.defaults,r)};var I=new P;return I}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(t,e,n,i){function o(e,o){if(this.options=e,null!=o&&this.fromElement(o),this.options=n.apply(this.options),o&&o.is("input")){var r=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,r)}}return o.prototype.fromElement=function(t){var n=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var o={};o=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var r=e.extend(!0,{},o);r=i._convertData(r);for(var a in r)e.inArray(a,n)>-1||(e.isPlainObject(this.options[a])?e.extend(this.options[a],r[a]):this.options[a]=r[a]);return this},o.prototype.get=function(t){return this.options[t]},o.prototype.set=function(t,e){this.options[t]=e},o}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(t,e,n,i){var o=function(t,n){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),n=n||{},this.options=new e(n,t),o.__super__.constructor.call(this);var i=t.attr("tabindex")||0;t.data("old-tabindex",i),t.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(t,this.options);var a=this.render();this._placeContainer(a);var s=this.options.get("selectionAdapter");this.selection=new s(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var c=this.options.get("resultsAdapter");this.results=new c(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(t){d.trigger("selection:update",{data:t})}),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return n.Extend(o,n.Observable),o.prototype._generateId=function(t){var e="";return e=null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+n.generateChars(2):n.generateChars(4),e=e.replace(/(:|\.|\[|\]|,)/g,""),e="select2-"+e},o.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},o.prototype._resolveWidth=function(t,e){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var i=this._resolveWidth(t,"style");return null!=i?i:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return 0>=o?"auto":o+"px"}if("style"==e){var r=t.attr("style");if("string"!=typeof r)return null;for(var a=r.split(";"),s=0,l=a.length;l>s;s+=1){var c=a[s].replace(/\s/g,""),d=c.match(n);if(null!==d&&d.length>=1)return d[1]}return null}return e},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this._sync=n.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){t.each(n,e._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",e._sync,!1)},o.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",function(e,n){t.trigger(e,n)})},o.prototype._registerSelectionEvents=function(){var e=this,n=["toggle","focus"];this.selection.on("toggle",function(){e.toggleDropdown()}),this.selection.on("focus",function(t){e.focus(t)}),this.selection.on("*",function(i,o){-1===t.inArray(i,n)&&e.trigger(i,o)})},o.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",function(e,n){t.trigger(e,n)})},o.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",function(e,n){t.trigger(e,n)})},o.prototype._registerEvents=function(){var t=this;this.on("open",function(){t.$container.addClass("select2-container--open")}),this.on("close",function(){t.$container.removeClass("select2-container--open")}),this.on("enable",function(){t.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){t.$container.addClass("select2-container--disabled")}),this.on("blur",function(){t.$container.removeClass("select2-container--focus")}),this.on("query",function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,function(n){t.trigger("results:all",{data:n,query:e})})}),this.on("query:append",function(e){this.dataAdapter.query(e,function(n){t.trigger("results:append",{data:n,query:e})})}),this.on("keypress",function(e){var n=e.which;t.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&e.altKey?(t.close(),e.preventDefault()):n===i.ENTER?(t.trigger("results:select",{}),e.preventDefault()):n===i.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):n===i.UP?(t.trigger("results:previous",{}),e.preventDefault()):n===i.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&e.altKey)&&(t.open(),e.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype.trigger=function(t,e){var n=o.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===e&&(e={}),t in i){var r=i[t],a={prevented:!1,name:t,args:e};if(n.call(this,r,a),a.prevented)return void(e.prevented=!0)}n.call(this,t,e)},o.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.trigger("query",{})},o.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},o.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},o.prototype.focus=function(t){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==t||0===t.length)&&(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var n=e[0];t.isArray(n)&&(n=t.map(n,function(t){return t.toString()})),this.$element.val(n).trigger("change")},o.prototype.destroy=function(){this.$container.remove(),
this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},o}),e.define("jquery-mousewheel",["jquery"],function(t){return t}),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(t,e,n,i){if(null==t.fn.select2){var o=["open","close","destroy"];t.fn.select2=function(e){if(e=e||{},"object"==typeof e)return this.each(function(){var i=t.extend(!0,{},e);new n(t(this),i)}),this;if("string"==typeof e){var i;return this.each(function(){var n=t(this).data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2.");var o=Array.prototype.slice.call(arguments,1);i=n[e].apply(n,o)}),t.inArray(e,o)>-1?this:i}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=i),n}),{define:e.define,require:e.require}}(),n=e.require("jquery.select2");return t.fn.select2.amd=e,n}),/*!
	Autosize v1.18.9 - 2014-05-27
	Automatically adjust textarea height based on user input.
	(c) 2014 Jack Moore - http://www.jacklmoore.com/autosize
	license: http://www.opensource.org/licenses/mit-license.php
*/
function(t){"use strict";var e,n={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},i='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',o=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],r=t(i).data("autosize",!0)[0];r.style.lineHeight="99px","99px"===t(r).css("lineHeight")&&o.push("lineHeight"),r.style.lineHeight="",t.fn.autosize=function(i){return this.length?(i=t.extend({},n,i||{}),r.parentNode!==document.body&&t(document.body).append(r),this.each(function(){function n(){var e,n=window.getComputedStyle?window.getComputedStyle(h,null):!1;n?(e=h.getBoundingClientRect().width,(0===e||"number"!=typeof e)&&(e=parseInt(n.width,10)),t.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(t,i){e-=parseInt(n[i],10)})):e=p.width(),r.style.width=Math.max(e,0)+"px"}function a(){var a={};if(e=h,r.className=i.className,r.id=i.id,c=parseInt(p.css("maxHeight"),10),t.each(o,function(t,e){a[e]=p.css(e)}),t(r).css(a).attr("wrap",p.attr("wrap")),n(),window.chrome){var s=h.style.width;h.style.width="0px";h.offsetWidth;h.style.width=s}}function s(){var t,o;e!==h?a():n(),!h.value&&i.placeholder?r.value=(p.attr("placeholder")||"")+i.append:r.value=h.value+i.append,r.style.overflowY=h.style.overflowY,o=parseInt(h.style.height,10),r.scrollTop=0,r.scrollTop=9e4,t=r.scrollTop,c&&t>c?(h.style.overflowY="scroll",t=c):(h.style.overflowY="hidden",d>t&&(t=d)),t+=f,o!==t&&(h.style.height=t+"px",m&&i.callback.call(h,h))}function l(){clearTimeout(u),u=setTimeout(function(){var t=p.width();t!==v&&(v=t,s())},parseInt(i.resizeDelay,10))}var c,d,u,h=this,p=t(h),f=0,m=t.isFunction(i.callback),g={height:h.style.height,overflow:h.style.overflow,overflowY:h.style.overflowY,wordWrap:h.style.wordWrap,resize:h.style.resize},v=p.width(),y=p.css("resize");p.data("autosize")||(p.data("autosize",!0),("border-box"===p.css("box-sizing")||"border-box"===p.css("-moz-box-sizing")||"border-box"===p.css("-webkit-box-sizing"))&&(f=p.outerHeight()-p.height()),d=Math.max(parseInt(p.css("minHeight"),10)-f||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===y?p.css("resize","none"):"both"===y&&p.css("resize","horizontal"),"onpropertychange"in h?"oninput"in h?p.on("input.autosize keyup.autosize",s):p.on("propertychange.autosize",function(){"value"===event.propertyName&&s()}):p.on("input.autosize",s),i.resizeDelay!==!1&&t(window).on("resize.autosize",l),p.on("autosize.resize",s),p.on("autosize.resizeIncludeStyle",function(){e=null,s()}),p.on("autosize.destroy",function(){e=null,clearTimeout(u),t(window).off("resize",l),p.off("autosize").off(".autosize").css(g).removeData("autosize")}),s())})):this}}(window.jQuery||window.$),BestInPlaceEditor.prototype={activate:function(){"use strict";var t;if(this.isPlaceHolder())t="";else if(this.original_content)t=this.original_content;else switch(this.formType){case"input":case"textarea":if(this.display_raw)t=this.element.html().replace(/&amp;/gi,"&");else{var e=this.element.data("bipValue");t="undefined"==typeof e?"":"string"==typeof e?this.element.data("bipValue").replace(/&amp;/gi,"&"):this.element.data("bipValue")}break;case"select":t=this.element.html()}this.oldValue=this.isPlaceHolder()?"":this.element.html(),this.display_value=t,jQuery(this.activator).unbind("click",this.clickHandler),this.activateForm(),this.element.trigger(jQuery.Event("best_in_place:activate"))},abort:function(){"use strict";this.activateText(this.oldValue),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:abort")),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},abortIfConfirm:function(){"use strict";return this.useConfirm?void(confirm(BestInPlaceEditor.defaults.locales[""].confirmMessage)&&this.abort()):void this.abort()},update:function(){"use strict";var t=this,e=this.getValue();if(this.formType in{input:1,textarea:1}&&e===this.oldValue)return this.abort(),!0;switch(t.ajax({type:BestInPlaceEditor.defaults.ajaxMethod,dataType:BestInPlaceEditor.defaults.ajaxDataType,data:t.requestData(),success:function(e,n,i){t.loadSuccessCallback(e,n,i)},error:function(e,n){t.loadErrorCallback(e,n)}}),this.formType){case"select":this.previousCollectionValue=e,t.element.html(this.arrayToObject(this.values)[e]);break;case"checkbox":t.element.html(this.arrayToObject(this.values)[e]);break;default:""!==e?this.display_raw?t.element.html(e):t.element.text(e):t.element.html(this.placeHolder)}t.element.data("bipValue",e),t.element.trigger(jQuery.Event("best_in_place:update"))},activateForm:function(){"use strict";alert(BestInPlaceEditor.defaults.locales[""].uninitializedForm)},activateText:function(t){"use strict";this.element.html(t),this.isPlaceHolder()&&this.element.html(this.placeHolder)},initOptions:function(){"use strict";var t=this;t.element.parents().each(function(){var e=jQuery(this);t.url=t.url||e.data("bipUrl"),t.activator=t.activator||e.data("bipActivator"),t.okButton=t.okButton||e.data("bipOkButton"),t.okButtonClass=t.okButtonClass||e.data("bipOkButtonClass"),t.cancelButton=t.cancelButton||e.data("bipCancelButton"),t.cancelButtonClass=t.cancelButtonClass||e.data("bipCancelButtonClass")}),t.url=t.element.data("bipUrl")||t.url||document.location.pathname,t.collection=t.element.data("bipCollection")||t.collection,t.formType=t.element.data("bipType")||"input",t.objectName=t.element.data("bipObject")||t.objectName,t.attributeName=t.element.data("bipAttribute")||t.attributeName,t.activator=t.element.data("bipActivator")||t.element,t.okButton=t.element.data("bipOkButton")||t.okButton,t.okButtonClass=t.element.data("bipOkButtonClass")||t.okButtonClass||BestInPlaceEditor.defaults.okButtonClass,t.cancelButton=t.element.data("bipCancelButton")||t.cancelButton,t.cancelButtonClass=t.element.data("bipCancelButtonClass")||t.cancelButtonClass||BestInPlaceEditor.defaults.cancelButtonClass,null==t.element.data("bipPlaceholder")?t.placeHolder=BestInPlaceEditor.defaults.locales[""].placeHolder:t.placeHolder=t.element.data("bipPlaceholder"),t.inner_class=t.element.data("bipInnerClass"),t.html_attrs=t.element.data("bipHtmlAttrs"),t.original_content=t.element.data("bipOriginalContent")||t.original_content,t.display_raw=t.element.data("bip-raw"),t.useConfirm=t.element.data("bip-confirm"),("select"===t.formType||"checkbox"===t.formType)&&(t.values=t.collection,t.collectionValue=t.element.data("bipValue")||t.collectionValue)},bindForm:function(){"use strict";this.activateForm=BestInPlaceEditor.forms[this.formType].activateForm,this.getValue=BestInPlaceEditor.forms[this.formType].getValue},initPlaceHolder:function(){"use strict";""===this.element.html()&&this.element.html(this.placeHolder)},isPlaceHolder:function(){"use strict";return""===this.element.html()||this.element.html()===this.placeHolder},getValue:function(){"use strict";alert(BestInPlaceEditor.defaults.locales[""].uninitializedForm)},arrayToObject:function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},sanitizeValue:function(t){"use strict";return jQuery.trim(t)},requestData:function(){"use strict";var t=jQuery("meta[name=csrf-token]").attr("content"),e=jQuery("meta[name=csrf-param]").attr("content"),n="_method="+BestInPlaceEditor.defaults.ajaxMethod;return n+="&"+this.objectName+"["+this.attributeName+"]="+encodeURIComponent(this.getValue()),void 0!==e&&void 0!==t&&(n+="&"+e+"="+encodeURIComponent(t)),n},ajax:function(t){"use strict";return t.url=this.url,t.beforeSend=function(t){t.setRequestHeader("Accept","application/json")},jQuery.ajax(t)},loadSuccessCallback:function(t,e,n){"use strict";if(t=jQuery.trim(t),this.display_raw?this.original_content=this.element.html():this.original_content=this.element.text(),t&&""!==t){var i=jQuery.parseJSON(t);null!==i&&i.hasOwnProperty("display_as")&&(this.element.data("bip-original-content",this.element.text()),this.element.html(i.display_as))}this.element.trigger(jQuery.Event("best_in_place:success"),[t,e,n]),this.element.trigger(jQuery.Event("ajax:success"),[t,e,n]),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:deactivate")),null!==this.collectionValue&&"select"===this.formType&&(this.collectionValue=this.previousCollectionValue,this.previousCollectionValue=null)},loadErrorCallback:function(t,e){"use strict";this.activateText(this.oldValue),this.element.trigger(jQuery.Event("best_in_place:error"),[t,e]),this.element.trigger(jQuery.Event("ajax:error"),t,e),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},clickHandler:function(t){"use strict";t.preventDefault(),t.data.editor.activate()},setHtmlAttributes:function(){"use strict";var t=this.element.find(this.formType);if(this.html_attrs){var e=this.html_attrs;$.each(e,function(e,n){t.attr(e,n)})}},placeButtons:function(t,e){"use strict";e.okButton&&t.append(jQuery(document.createElement("input")).attr("type","submit").attr("class",e.okButtonClass).attr("value",e.okButton)),e.cancelButton&&t.append(jQuery(document.createElement("input")).attr("type","button").attr("class",e.cancelButtonClass).attr("value",e.cancelButton))}},BestInPlaceEditor.forms={input:{activateForm:function(){"use strict";var t=jQuery(document.createElement("form")).addClass("form_in_place").attr("action","javascript:void(0);").attr("style","display:inline"),e=jQuery(document.createElement("input")).attr("type","text").attr("name",this.attributeName).val(this.display_value);this.inner_class&&e.addClass(this.inner_class),t.append(e),this.placeButtons(t,this),this.element.html(t),this.setHtmlAttributes(),this.element.find("input[type='text']")[0].select(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.input.submitHandler),this.cancelButton&&this.element.find("input[type='button']").bind("click",{editor:this},BestInPlaceEditor.forms.input.cancelButtonHandler),this.okButton||this.element.find("input[type='text']").bind("blur",{editor:this},BestInPlaceEditor.forms.input.inputBlurHandler),this.element.find("input[type='text']").bind("keyup",{editor:this},BestInPlaceEditor.forms.input.keyupHandler),this.blurTimer=null,this.userClicked=!1},getValue:function(){"use strict";return this.sanitizeValue(this.element.find("input").val())},inputBlurHandler:function(t){"use strict";t.data.editor.okButton?t.data.editor.blurTimer=setTimeout(function(){t.data.editor.userClicked||t.data.editor.abort()},500):t.data.editor.cancelButton?t.data.editor.blurTimer=setTimeout(function(){t.data.editor.userClicked||t.data.editor.update()},500):t.data.editor.update()},submitHandler:function(t){"use strict";t.data.editor.userClicked=!0,clearTimeout(t.data.editor.blurTimer),t.data.editor.update()},cancelButtonHandler:function(t){"use strict";t.data.editor.userClicked=!0,clearTimeout(t.data.editor.blurTimer),t.data.editor.abort(),t.stopPropagation()},keyupHandler:function(t){"use strict";27===t.keyCode&&(t.data.editor.abort(),t.stopImmediatePropagation())}},select:{activateForm:function(){"use strict";var t,e,n=jQuery(document.createElement("form")).attr("action","javascript:void(0)").attr("style","display:inline"),i=jQuery(document.createElement("select")).attr("class",null!==this.inner_class?this.inner_class:""),o=this.collectionValue,r=this.arrayToObject(this.values);for(t in r){e=r[t];var a=jQuery(document.createElement("option")).val(t).html(e);String(t)===String(o)&&a.attr("selected","selected"),i.append(a)}n.append(i),this.element.html(n),this.setHtmlAttributes(),this.element.find("select").bind("change",{editor:this},BestInPlaceEditor.forms.select.blurHandler),this.element.find("select").bind("blur",{editor:this},BestInPlaceEditor.forms.select.blurHandler),this.element.find("select").bind("keyup",{editor:this},BestInPlaceEditor.forms.select.keyupHandler),this.element.find("select")[0].focus();try{var s=document.createEvent("MouseEvents");s.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.element.find("select")[0].dispatchEvent(s)}catch(s){}},getValue:function(){"use strict";return this.sanitizeValue(this.element.find("select").val())},blurHandler:function(t){"use strict";t.data.editor.update()},keyupHandler:function(t){"use strict";27===t.keyCode&&t.data.editor.abort()}},checkbox:{activateForm:function(){"use strict";this.collectionValue=!this.getValue(),this.setHtmlAttributes(),this.update()},getValue:function(){"use strict";return this.collectionValue}},textarea:{activateForm:function(){"use strict";var t=this.element.css("width"),e=this.element.css("height"),n=jQuery(document.createElement("form")).addClass("form_in_place").attr("action","javascript:void(0);").attr("style","display:inline"),i=jQuery(document.createElement("textarea")).attr("name",this.attributeName).val(this.sanitizeValue(this.display_value));null!==this.inner_class&&i.addClass(this.inner_class),n.append(i),this.placeButtons(n,this),this.element.html(n),this.setHtmlAttributes(),jQuery(this.element.find("textarea")[0]).css({"min-width":t,"min-height":e}),jQuery(this.element.find("textarea")[0]).autosize(),this.element.find("textarea")[0].focus(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.textarea.submitHandler),this.cancelButton&&this.element.find("input[type='button']").bind("click",{editor:this},BestInPlaceEditor.forms.textarea.cancelButtonHandler),this.element.find("textarea").bind("blur",{editor:this},BestInPlaceEditor.forms.textarea.blurHandler),this.element.find("textarea").bind("keyup",{editor:this},BestInPlaceEditor.forms.textarea.keyupHandler),this.blurTimer=null,this.userClicked=!1},getValue:function(){"use strict";return this.sanitizeValue(this.element.find("textarea").val())},blurHandler:function(t){"use strict";t.data.editor.okButton?t.data.editor.blurTimer=setTimeout(function(){t.data.editor.userClicked||t.data.editor.abortIfConfirm()},500):t.data.editor.cancelButton?t.data.editor.blurTimer=setTimeout(function(){t.data.editor.userClicked||t.data.editor.update()},500):t.data.editor.update()},submitHandler:function(t){"use strict";t.data.editor.userClicked=!0,clearTimeout(t.data.editor.blurTimer),t.data.editor.update()},cancelButtonHandler:function(t){"use strict";t.data.editor.userClicked=!0,clearTimeout(t.data.editor.blurTimer),t.data.editor.abortIfConfirm(),t.stopPropagation()},keyupHandler:function(t){"use strict";27===t.keyCode&&t.data.editor.abortIfConfirm()}}},BestInPlaceEditor.defaults={locales:{},ajaxMethod:"put",ajaxDataType:"text",okButtonClass:"",cancelButtonClass:""},BestInPlaceEditor.defaults.locales[""]={confirmMessage:"Are you sure you want to discard your changes?",uninitializedForm:"The form was not properly initialized. getValue is unbound",placeHolder:"-"},jQuery.fn.best_in_place=function(){"use strict";function t(t){return t.data("bestInPlaceEditor")?void 0:(t.data("bestInPlaceEditor",new BestInPlaceEditor(t)),!0)}return jQuery(this.context).delegate(this.selector,"click",function(){var e=jQuery(this);t(e)&&e.click()}),this.each(function(){t(jQuery(this))}),this},/* ===========================================================
 * Bootstrap: fileinput.js v3.1.3
 * http://jasny.github.com/bootstrap/javascript/#fileinput
 * ===========================================================
 * Copyright 2012-2014 Arnold Daniels
 *
 * Licensed under the Apache License, Version 2.0 (the "License")
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
+function(t){"use strict";var e="Microsoft Internet Explorer"==window.navigator.appName,n=function(e,n){if(this.$element=t(e),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||n.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=t('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var i=this.$preview.css("height");"inline"!==this.$preview.css("display")&&"0px"!==i&&"none"!==i&&this.$preview.css("line-height",i),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};n.prototype.listen=function(){this.$input.on("change.bs.fileinput",t.proxy(this.change,this)),t(this.$input[0].form).on("reset.bs.fileinput",t.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",t.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",t.proxy(this.clear,this))},n.prototype.change=function(e){var n=void 0===e.target.files?e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files;if(e.stopPropagation(),0===n.length)return void this.clear();this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var i=n[0];if(this.$preview.length>0&&("undefined"!=typeof i.type?i.type.match(/^image\/(gif|png|jpeg)$/):i.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var o=new FileReader,r=this.$preview,a=this.$element;o.onload=function(e){var o=t("<img>");o[0].src=e.target.result,n[0].result=e.target.result,a.find(".fileinput-filename").text(i.name),"none"!=r.css("max-height")&&o.css("max-height",parseInt(r.css("max-height"),10)-parseInt(r.css("padding-top"),10)-parseInt(r.css("padding-bottom"),10)-parseInt(r.css("border-top"),10)-parseInt(r.css("border-bottom"),10)),r.html(o),a.addClass("fileinput-exists").removeClass("fileinput-new"),a.trigger("change.bs.fileinput",n)},o.readAsDataURL(i)}else this.$element.find(".fileinput-filename").text(i.name),this.$preview.text(i.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")},n.prototype.clear=function(t){if(t&&t.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),e){var n=this.$input.clone(!0);this.$input.after(n),this.$input.remove(),this.$input=n}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==t&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},n.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),t(this.$input[0].form).off("reset.bs.fileinput"),this.$element.trigger("reset.bs.fileinput"),t(this.$input[0].form).on("reset.bs.fileinput",t.proxy(this.reset,this))},n.prototype.trigger=function(t){this.$input.trigger("click"),t.preventDefault()};var i=t.fn.fileinput;t.fn.fileinput=function(e){return this.each(function(){var i=t(this),o=i.data("bs.fileinput");o||i.data("bs.fileinput",o=new n(this,e)),"string"==typeof e&&o[e]()})},t.fn.fileinput.Constructor=n,t.fn.fileinput.noConflict=function(){return t.fn.fileinput=i,this},t(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(e){var n=t(this);if(!n.data("bs.fileinput")){n.fileinput(n.data());var i=t(e.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');i.length>0&&(e.preventDefault(),i.trigger("click.bs.fileinput"))}})}(window.jQuery),function(t){function e(e,n,i){var o=n.data("dF").dirtyFieldsDataProperty,r=t.inArray(e,o);"dirty"==i&&-1==r?(o.push(e),n.data("dF").dirtyFieldsDataProperty=o):"clean"==i&&r>-1&&(o.splice(r,1),n.data("dF").dirtyFieldsDataProperty=o)}function n(e){e.data("dF").dirtyFieldsDataProperty.length>0?(e.addClass(e.data("dF").dirtyFormClass),t.isFunction(e.data("dF").formChangeCallback)&&e.data("dF").formChangeCallback.call(e,!0,e.data("dF").dirtyFieldsDataProperty)):(e.removeClass(e.data("dF").dirtyFormClass),t.isFunction(e.data("dF").formChangeCallback)&&e.data("dF").formChangeCallback.call(e,!1,e.data("dF").dirtyFieldsDataProperty))}function i(e,n,i,o){if(o.data("dF").denoteDirtyFields){var r=o.data("dF").fieldOverrides,a=n.attr("id"),s=!1;for(var l in r)a==l&&("changed"==i?t("#"+r[l]).addClass(o.data("dF").dirtyFieldClass):t("#"+r[l]).removeClass(o.data("dF").dirtyFieldClass),s=!0);if(0==s){var c=o.data("dF")[e],d=c.split("-");switch(d[0]){case"next":"changed"==i?n.next(d[1]).addClass(o.data("dF").dirtyFieldClass):n.next(d[1]).removeClass(o.data("dF").dirtyFieldClass);break;case"previous":"changed"==i?n.prev(d[1]).addClass(o.data("dF").dirtyFieldClass):n.prev(d[1]).removeClass(o.data("dF").dirtyFieldClass);break;case"closest":"changed"==i?n.closest(d[1]).addClass(o.data("dF").dirtyFieldClass):n.closest(d[1]).removeClass(o.data("dF").dirtyFieldClass);break;case"self":"changed"==i?n.addClass(o.data("dF").dirtyFieldClass):n.removeClass(o.data("dF").dirtyFieldClass);break;default:if("id"==d[0]||"name"==d[0])switch(d[1]){case"class":"changed"==i?t("."+n.attr(d[0]),o).addClass(o.data("dF").dirtyFieldClass):t("."+n.attr(d[0]),o).removeClass(o.data("dF").dirtyFieldClass);break;case"title":"changed"==i?t("*[title='"+n.attr(d[0])+"']",o).addClass(o.data("dF").dirtyFieldClass):t("*[title='"+n.attr(d[0])+"']",o).removeClass(o.data("dF").dirtyFieldClass);break;case"for":"changed"==i?t("label[for='"+n.attr(d[0])+"']",o).addClass(o.data("dF").dirtyFieldClass):t("label[for='"+n.attr(d[0])+"']",o).removeClass(o.data("dF").dirtyFieldClass)}}}}}function o(o,r){var a=o.attr("name"),s=!1;if(r.data("dF").trimText)var l=jQuery.trim(o.val());else var l=o.val();if(o.hasClass(r.data("dF").ignoreCaseClass))var l=l.toUpperCase(),c=o.data(r.data("dF").startingValueDataProperty).toUpperCase();else var c=o.data(r.data("dF").startingValueDataProperty);l!=c?(i("textboxContext",o,"changed",r),e(a,r,"dirty"),s=!0):(i("textboxContext",o,"unchanged",r),e(a,r,"clean")),t.isFunction(r.data("dF").fieldChangeCallback)&&r.data("dF").fieldChangeCallback.call(o,o.data(r.data("dF").startingValueDataProperty),s),r.data("dF").denoteDirtyForm&&n(r)}function r(o,r){var a=o.attr("name"),s=!1;if(0==r.data("dF").denoteDirtyOptions&&1!=o.attr("multiple")){if(o.hasClass(r.data("dF").ignoreCaseClass))var l=o.val().toUpperCase(),c=o.data(r.data("dF").startingValueDataProperty).toUpperCase();else var l=o.val(),c=o.data(r.data("dF").startingValueDataProperty);l!=c?(i("selectContext",o,"changed",r),e(a,r,"dirty"),s=!0):(i("selectContext",o,"unchanged",r),e(a,r,"clean"))}else{var d=!1;o.children("option").each(function(e){var n=t(this),i=n.is(":selected");i!=n.data(r.data("dF").startingValueDataProperty)?(r.data("dF").denoteDirtyOptions&&n.addClass(r.data("dF").dirtyOptionClass),d=!0):r.data("dF").denoteDirtyOptions&&n.removeClass(r.data("dF").dirtyOptionClass)}),d?(i("selectContext",o,"changed",r),e(a,r,"dirty"),s=!0):(i("selectContext",o,"unchanged",r),e(a,r,"clean"))}t.isFunction(r.data("dF").fieldChangeCallback)&&r.data("dF").fieldChangeCallback.call(o,o.data(r.data("dF").startingValueDataProperty),s),r.data("dF").denoteDirtyForm&&n(r)}function a(o,r){var a=o.attr("name"),s=!1,l=o.attr("type");t(":"+l+"[name='"+a+"']",r).each(function(e){var n=t(this),o=n.is(":checked");o!=n.data(r.data("dF").startingValueDataProperty)?(i("checkboxRadioContext",n,"changed",r),s=!0):i("checkboxRadioContext",n,"unchanged",r)}),s?e(a,r,"dirty"):e(a,r,"clean"),t.isFunction(r.data("dF").fieldChangeCallback)&&r.data("dF").fieldChangeCallback.call(o,o.data(r.data("dF").startingValueDataProperty),s),r.data("dF").denoteDirtyForm&&n(r)}t.fn.dirtyFields=function(e){var n=t.extend({},t.fn.dirtyFields.defaults,e);return this.each(function(){var e=t(this);e.data("dF",n),e.data("dF").dirtyFieldsDataProperty=new Array,t("input[type='text'],input[type='file'],input[type='password'],textarea",e).not("."+e.data("dF").exclusionClass).each(function(n){t.fn.dirtyFields.configureField(t(this),e,"text")}),t("select",e).not("."+e.data("dF").exclusionClass).each(function(n){t.fn.dirtyFields.configureField(t(this),e,"select")}),t(":checkbox,:radio",e).not("."+e.data("dF").exclusionClass).each(function(n){t.fn.dirtyFields.configureField(t(this),e,"checkRadio")}),t.fn.dirtyFields.setStartingValues(e)})},t.fn.dirtyFields.defaults={checkboxRadioContext:"next-span",denoteDirtyOptions:!1,denoteDirtyFields:!0,denoteDirtyForm:!1,dirtyFieldClass:"dirtyField",dirtyFieldsDataProperty:"dirtyFields",dirtyFormClass:"dirtyForm",dirtyOptionClass:"dirtyOption",exclusionClass:"dirtyExclude",fieldChangeCallback:"",fieldOverrides:{none:"none"},formChangeCallback:"",ignoreCaseClass:"dirtyIgnoreCase",preFieldChangeCallback:"",selectContext:"id-for",startingValueDataProperty:"startingValue",textboxContext:"id-for",trimText:!1},t.fn.dirtyFields.configureField=function(e,n,i,s){if(!e.hasClass(n.data("dF").exclusionClass))switch("undefined"!=typeof s&&(n.data("dF").fieldOverrides[e.attr("id")]=s),i){case"text":e.change(function(){return t.isFunction(n.data("dF").preFieldChangeCallback)&&0==n.data("dF").preFieldChangeCallback.call(e,e.data(n.data("dF").startingValueDataProperty))?!1:void o(e,n)});break;case"select":e.change(function(){return t.isFunction(n.data("dF").preFieldChangeCallback)&&0==n.data("dF").preFieldChangeCallback.call(e,e.data(n.data("dF").startingValueDataProperty))?!1:void r(e,n)});break;case"checkRadio":e.change(function(){return t.isFunction(n.data("dF").preFieldChangeCallback)&&0==n.data("dF").preFieldChangeCallback.call(e,e.data(n.data("dF").startingValueDataProperty))?!1:void a(e,n)})}},t.fn.dirtyFields.formSaved=function(e){t.fn.dirtyFields.setStartingValues(e),t.fn.dirtyFields.markContainerFieldsClean(e)},t.fn.dirtyFields.markContainerFieldsClean=function(e){var n=new Array;e.data("dF").dirtyFieldsDataProperty=n,t("."+e.data("dF").dirtyFieldClass,e).removeClass(e.data("dF").dirtyFieldClass),e.data("dF").denoteDirtyOptions&&t("."+e.data("dF").dirtyOptionClass,e).removeClass(e.data("dF").dirtyOptionClass),e.data("dF").denoteDirtyForm&&e.removeClass(e.data("dF").dirtyFormClass)},t.fn.dirtyFields.setStartingValues=function(e,n){t("input[type='text'],input[type='file'],input[type='password'],:checkbox,:radio,textarea",e).not("."+e.data("dF").exclusionClass).each(function(n){var i=t(this);"radio"==i.attr("type")||"checkbox"==i.attr("type")?t.fn.dirtyFields.setStartingCheckboxRadioValue(i,e):t.fn.dirtyFields.setStartingTextValue(i,e)}),t("select",e).not("."+e.data("dF").exclusionClass).each(function(n){t.fn.dirtyFields.setStartingSelectValue(t(this),e)})},t.fn.dirtyFields.setStartingTextValue=function(e,n){return e.not("."+n.data("dF").exclusionClass).each(function(){var e=t(this);e.data(n.data("dF").startingValueDataProperty,e.val())})},t.fn.dirtyFields.setStartingCheckboxRadioValue=function(e,n){return e.not("."+n.data("dF").exclusionClass).each(function(){var e=t(this);e.is(":checked")?e.data(n.data("dF").startingValueDataProperty,!0):e.data(n.data("dF").startingValueDataProperty,!1)})},t.fn.dirtyFields.setStartingSelectValue=function(e,n){return e.not("."+n.data("dF").exclusionClass).each(function(){var e=t(this);if(0==n.data("dF").denoteDirtyOptions&&1!=e.attr("multiple"))e.data(n.data("dF").startingValueDataProperty,e.val());else{var i=new Array;e.children("option").each(function(e){var o=t(this);o.is(":selected")?(o.data(n.data("dF").startingValueDataProperty,!0),i.push(o.val())):o.data(n.data("dF").startingValueDataProperty,!1)}),e.data(n.data("dF").startingValueDataProperty,i)}})},t.fn.dirtyFields.rollbackTextValue=function(e,n,i){return"undefined"==typeof i&&(i=!0),e.not("."+n.data("dF").exclusionClass).each(function(){var e=t(this);e.val(e.data(n.data("dF").startingValueDataProperty)),i&&o(e,n)})},t.fn.dirtyFields.updateTextState=function(e,n){return e.not("."+n.data("dF").exclusionClass).each(function(){o(t(this),n)})},t.fn.dirtyFields.rollbackCheckboxRadioState=function(e,n,i){return"undefined"==typeof i&&(i=!0),e.not("."+n.data("dF").exclusionClass).each(function(){var e=t(this);e.data(n.data("dF").startingValueDataProperty)?e.attr("checked",!0):e.attr("checked",!1),i&&a(e,n)})},t.fn.dirtyFields.updateCheckboxRadioState=function(e,n){return e.not("."+n.data("dF").exclusionClass).each(function(){a(t(this),n)})},t.fn.dirtyFields.rollbackSelectState=function(e,n,i){return"undefined"==typeof i&&(i=!0),e.not("."+n.data("dF").exclusionClass).each(function(){var e=t(this);0==n.data("dF").denoteDirtyOptions&&1!=e.attr("multiple")?e.val(e.data(n.data("dF").startingValueDataProperty)):e.children("option").each(function(e){var i=t(this);i.data(n.data("dF").startingValueDataProperty)?i.attr("selected",!0):i.attr("selected",!1)}),i&&r(e,n)})},t.fn.dirtyFields.updateSelectState=function(e,n){return e.not("."+n.data("dF").exclusionClass).each(function(){r(t(this),n)})},t.fn.dirtyFields.rollbackForm=function(e){t("input[type='text'],input[type='file'],input[type='password'],:checkbox,:radio,textarea",e).not("."+e.data("dF").exclusionClass).each(function(n){$object=t(this),"radio"==$object.attr("type")||"checkbox"==$object.attr("type")?t.fn.dirtyFields.rollbackCheckboxRadioState($object,e,!1):t.fn.dirtyFields.rollbackTextValue($object,e,!1)}),t("select",e).not("."+e.data("dF").exclusionClass).each(function(n){t.fn.dirtyFields.rollbackSelectState(t(this),e,!1)}),t.fn.dirtyFields.markContainerFieldsClean(e)},t.fn.dirtyFields.updateFormState=function(e){t("input[type='text'],input[type='file'],input[type='password'],:checkbox,:radio,textarea",e).not("."+e.data("dF").exclusionClass).each(function(n){$object=t(this),"radio"==$object.attr("type")||"checkbox"==$object.attr("type")?t.fn.dirtyFields.updateCheckboxRadioState($object,e):t.fn.dirtyFields.updateTextState($object,e)}),t("select",e).not("."+e.data("dF").exclusionClass).each(function(n){$object=t(this),t.fn.dirtyFields.updateSelectState($object,e)})},t.fn.dirtyFields.getDirtyFieldNames=function(t){return t.data("dF").dirtyFieldsDataProperty}}(jQuery),BestInPlaceEditor.defaults.purrErrorContainer="<span class='bip-flash-error'></span>",jQuery(document).on("best_in_place:error",function(t,e,n){"use strict";jQuery.each(jQuery.parseJSON(e.responseText),function(t,e){"object"==typeof e&&(e=t+" "+e.toString());var n=jQuery(BestInPlaceEditor.defaults.purrErrorContainer).html(e);n.purr()})}),/**
 * jquery.purr.js
 * Copyright (c) 2008 Net Perspective (net-perspective.com)
 * Licensed under the MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * @author R.A. Ray
 * @projectDescription  jQuery plugin for dynamically displaying unobtrusive messages in the browser. Mimics the behavior of the MacOS program "Growl."
 * @version 0.1.0
 *
 * @requires jquery.js (tested with 1.2.6)
 *
 * @param fadeInSpeed           int - Duration of fade in animation in miliseconds
 *                          default: 500
 *  @param fadeOutSpeed         int - Duration of fade out animationin miliseconds
                            default: 500
 *  @param removeTimer          int - Timeout, in miliseconds, before notice is removed once it is the top non-sticky notice in the list
                            default: 4000
 *  @param isSticky             bool - Whether the notice should fade out on its own or wait to be manually closed
                            default: false
 *  @param usingTransparentPNG  bool - Whether or not the notice is using transparent .png images in its styling
                            default: false
 */
function(t){t.purr=function(e,n){function i(){var i=document.createElement("a");if(t(i).attr({"class":"close",href:"#close"}).appendTo(e).click(function(){return o(),!1}),t(document).keyup(function(t){27===t.keyCode&&o()}),e.appendTo(r).hide(),e.fadeIn(n.fadeInSpeed),!n.isSticky)var a=setInterval(function(){0===e.prevAll(".purr").length&&(clearInterval(a),setTimeout(function(){o()},n.removeTimer))},200)}function o(){e.animate({opacity:"0"},{duration:n.fadeOutSpeed,complete:function(){e.animate({height:"0px"},{duration:n.fadeOutSpeed,complete:function(){e.remove()}})}})}e=t(e),e.addClass("purr");var r=document.getElementById("purr-container");r||(r='<div id="purr-container"></div>'),r=t(r),t("body").append(r),i()},t.fn.purr=function(e){return e=e||{},e.fadeInSpeed=e.fadeInSpeed||500,e.fadeOutSpeed=e.fadeOutSpeed||500,e.removeTimer=e.removeTimer||4e3,e.isSticky=e.isSticky||!1,e.usingTransparentPNG=e.usingTransparentPNG||!1,this.each(function(){new t.purr(this,e)}),this}}(jQuery),/**
 * Super simple wysiwyg editor v0.7.1
 * http://summernote.org/
 *
 * summernote.js
 * Copyright 2013-2015 Alan Hong. and other contributors
 * summernote may be freely distributed under the MIT license./
 *
 * Date: 2015-12-31T12:09Z
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function(t){"use strict";var e,n=function(){var e=function(t){return function(e){return t===e}},n=function(t,e){return t===e},i=function(t){return function(e,n){return e[t]===n[t]}},o=function(){return!0},r=function(){return!1},a=function(t){return function(){return!t.apply(t,arguments)}},s=function(t,e){return function(n){return t(n)&&e(n)}},l=function(t){return t},c=0,d=function(t){var e=++c+"";return t?t+e:e},u=function(e){var n=t(document);return{top:e.top+n.scrollTop(),left:e.left+n.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}},h=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e},p=function(t,e){return e=e||"",e+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")};return{eq:e,eq2:n,peq2:i,ok:o,fail:r,self:l,not:a,and:s,uniqueId:d,rect2bnd:u,invertObject:h,namespaceToCamel:p}}(),i=function(){var e=function(t){return t[0]},i=function(t){return t[t.length-1]},o=function(t){return t.slice(0,t.length-1)},r=function(t){return t.slice(1)},a=function(t,e){for(var n=0,i=t.length;i>n;n++){var o=t[n];if(e(o))return o}},s=function(t,e){for(var n=0,i=t.length;i>n;n++)if(!e(t[n]))return!1;return!0},l=function(e,n){return t.inArray(n,e)},c=function(t,e){return-1!==l(t,e)},d=function(t,e){return e=e||n.self,t.reduce(function(t,n){return t+e(n)},0)},u=function(t){for(var e=[],n=-1,i=t.length;++n<i;)e[n]=t[n];return e},h=function(t){return!t||!t.length},p=function(t,n){if(!t.length)return[];var o=r(t);return o.reduce(function(t,e){var o=i(t);return n(i(o),e)?o[o.length]=e:t[t.length]=[e],t},[[e(t)]])},f=function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n]&&e.push(t[n]);return e},m=function(t){for(var e=[],n=0,i=t.length;i>n;n++)c(e,t[n])||e.push(t[n]);return e},g=function(t,e){var n=l(t,e);return-1===n?null:t[n+1]},v=function(t,e){var n=l(t,e);return-1===n?null:t[n-1]};return{head:e,last:i,initial:o,tail:r,prev:v,next:g,find:a,contains:c,all:s,sum:d,from:u,isEmpty:h,clusterBy:p,compact:f,unique:m}}(),o="function"==typeof define&&define.amd,r=function(e){var n="Comic Sans MS"===e?"Courier New":"Comic Sans MS",i=t("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),o=i.css("fontFamily",n).width(),r=i.css("fontFamily",e+","+n).width();return i.remove(),o!==r},a=navigator.userAgent,s=/MSIE|Trident/i.test(a);if(s){var l=/MSIE (\d+[.]\d+)/.exec(a);l&&(e=parseFloat(l[1])),l=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(a),l&&(e=parseFloat(l[1]))}var c={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:s,isFF:/firefox/i.test(a),isWebkit:/webkit/i.test(a),isSafari:/safari/i.test(a),browserVersion:e,jqueryVersion:parseFloat(t.fn.jquery),isSupportAmd:o,hasCodeMirror:o?require.specified("codemirror"):!!window.CodeMirror,isFontInstalled:r,isW3CRangeSupport:!!document.createRange},d=String.fromCharCode(160),u="\ufeff",h=function(){var e=function(e){return e&&t(e).hasClass("note-editable")},o=function(e){return e&&t(e).hasClass("note-control-sizing")},r=function(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}},a=function(t){return t&&3===t.nodeType},s=function(t){return t&&1===t.nodeType},l=function(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(t.nodeName.toUpperCase())},p=function(t){return e(t)?!1:t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase())},f=function(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())},m=r("PRE"),g=r("LI"),v=function(t){return p(t)&&!g(t)},y=r("TABLE"),b=function(t){return!($(t)||k(t)||w(t)||p(t)||y(t)||x(t))},k=function(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())},w=r("HR"),C=function(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())},x=r("BLOCKQUOTE"),$=function(t){return C(t)||x(t)||e(t)},_=r("A"),S=function(t){return b(t)&&!!O(t,p)},E=function(t){return b(t)&&!O(t,p)},T=r("BODY"),P=function(t,e){return t.nextSibling===e||t.previousSibling===e},I=function(t,e){e=e||n.ok;var i=[];return t.previousSibling&&e(t.previousSibling)&&i.push(t.previousSibling),i.push(t),t.nextSibling&&e(t.nextSibling)&&i.push(t.nextSibling),i},F=c.isMSIE&&c.browserVersion<11?"&nbsp;":"<br>",A=function(t){return a(t)?t.nodeValue.length:t.childNodes.length},D=function(t){var e=A(t);return 0===e?!0:a(t)||1!==e||t.innerHTML!==F?i.all(t.childNodes,a)&&""===t.innerHTML?!0:!1:!0},L=function(t){l(t)||A(t)||(t.innerHTML=F)},O=function(t,n){for(;t;){if(n(t))return t;if(e(t))break;t=t.parentNode}return null},j=function(t,n){for(t=t.parentNode;t&&1===A(t);){if(n(t))return t;if(e(t))break;t=t.parentNode}return null},H=function(t,i){i=i||n.fail;var o=[];return O(t,function(t){return e(t)||o.push(t),i(t)}),o},N=function(t,e){var n=H(t);return i.last(n.filter(e))},R=function(e,n){for(var i=H(e),o=n;o;o=o.parentNode)if(t.inArray(o,i)>-1)return o;return null},z=function(t,e){e=e||n.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.previousSibling;return i},M=function(t,e){e=e||n.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.nextSibling;return i},B=function(t,e){var i=[];return e=e||n.ok,function o(n){t!==n&&e(n)&&i.push(n);for(var r=0,a=n.childNodes.length;a>r;r++)o(n.childNodes[r])}(t),i},U=function(e,n){var i=e.parentNode,o=t("<"+n+">")[0];return i.insertBefore(o,e),o.appendChild(e),o},W=function(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t},q=function(e,n){return t.each(n,function(t,n){e.appendChild(n)}),e},V=function(t){return 0===t.offset},G=function(t){return t.offset===A(t.node)},K=function(t){return V(t)||G(t)},Q=function(t,e){for(;t&&t!==e;){if(0!==X(t))return!1;t=t.parentNode}return!0},Y=function(t,e){for(;t&&t!==e;){if(X(t)!==A(t.parentNode)-1)return!1;t=t.parentNode}return!0},Z=function(t,e){return V(t)&&Q(t.node,e)},J=function(t,e){return G(t)&&Y(t.node,e)},X=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},tt=function(t){return!!(t&&t.childNodes&&t.childNodes.length)},et=function(t,n){var i,o;if(0===t.offset){if(e(t.node))return null;i=t.node.parentNode,o=X(t.node)}else tt(t.node)?(i=t.node.childNodes[t.offset-1],o=A(i)):(i=t.node,o=n?0:t.offset-1);return{node:i,offset:o}},nt=function(t,n){var i,o;if(A(t.node)===t.offset){if(e(t.node))return null;i=t.node.parentNode,o=X(t.node)+1}else tt(t.node)?(i=t.node.childNodes[t.offset],o=0):(i=t.node,o=n?A(t.node):t.offset+1);return{node:i,offset:o}},it=function(t,e){return t.node===e.node&&t.offset===e.offset},ot=function(t){if(a(t.node)||!tt(t.node)||D(t.node))return!0;var e=t.node.childNodes[t.offset-1],n=t.node.childNodes[t.offset];return e&&!l(e)||n&&!l(n)?!1:!0},rt=function(t,e){for(;t;){if(e(t))return t;t=et(t)}return null},at=function(t,e){for(;t;){if(e(t))return t;t=nt(t)}return null},st=function(t){if(!a(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==d},lt=function(t,e,n,i){for(var o=t;o&&(n(o),!it(o,e));){var r=i&&t.node!==o.node&&e.node!==o.node;o=nt(o,r)}},ct=function(t,e){var i=H(e,n.eq(t));return i.map(X).reverse()},dt=function(t,e){for(var n=t,i=0,o=e.length;o>i;i++)n=n.childNodes.length<=e[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[e[i]];return n},ut=function(t,e){var n=e&&e.isSkipPaddingBlankHTML,i=e&&e.isNotSplitEdgePoint;if(K(t)&&(a(t.node)||i)){if(V(t))return t.node;if(G(t))return t.node.nextSibling}if(a(t.node))return t.node.splitText(t.offset);var o=t.node.childNodes[t.offset],r=W(t.node.cloneNode(!1),t.node);return q(r,M(o)),n||(L(t.node),L(r)),r},ht=function(t,e,i){var o=H(e.node,n.eq(t));return o.length?1===o.length?ut(e,i):o.reduce(function(t,n){return t===e.node&&(t=ut(e,i)),ut({node:n,offset:t?h.position(t):A(n)},i)}):null},pt=function(t,e){var n,o,r=e?p:$,a=H(t.node,r),s=i.last(a)||t.node;r(s)?(n=a[a.length-2],o=s):(n=s,o=n.parentNode);var l=n&&ht(n,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return l||o!==t.node||(l=t.node.childNodes[t.offset]),{rightNode:l,container:o}},ft=function(t){return document.createElement(t)},mt=function(t){return document.createTextNode(t)},gt=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var n=t.parentNode;if(!e){var i,o,r=[];for(i=0,o=t.childNodes.length;o>i;i++)r.push(t.childNodes[i]);for(i=0,o=r.length;o>i;i++)n.insertBefore(r[i],t)}n.removeChild(t)}},vt=function(t,n){for(;t&&!e(t)&&n(t);){var i=t.parentNode;gt(t),t=i}},yt=function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var n=ft(e);return t.style.cssText&&(n.style.cssText=t.style.cssText),q(n,i.from(t.childNodes)),W(n,t),gt(t),n},bt=r("TEXTAREA"),kt=function(t,e){var n=bt(t[0])?t.val():t.html();return e?n.replace(/[\n\r]/g,""):n},wt=function(e,n){var i=kt(e);if(n){var o=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(o,function(t,e,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!e,o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return t+(i||o?"\n":"")}),i=t.trim(i)}return i},Ct=function(e){var n=t(e),i=n.offset(),o=n.outerHeight(!0);return{left:i.left,top:i.top+o}},xt=function(t,e){Object.keys(e).forEach(function(n){t.on(n,e[n])})},$t=function(t,e){Object.keys(e).forEach(function(n){t.off(n,e[n])})};return{NBSP_CHAR:d,ZERO_WIDTH_NBSP_CHAR:u,blank:F,emptyPara:"<p>"+F+"</p>",makePredByNodeName:r,isEditable:e,isControlSizing:o,isText:a,isElement:s,isVoid:l,isPara:p,isPurePara:v,isHeading:f,isInline:b,isBlock:n.not(b),isBodyInline:E,isBody:T,isParaInline:S,isPre:m,isList:k,isTable:y,isCell:C,isBlockquote:x,isBodyContainer:$,isAnchor:_,isDiv:r("DIV"),isLi:g,isBR:r("BR"),isSpan:r("SPAN"),isB:r("B"),isU:r("U"),isS:r("S"),isI:r("I"),isImg:r("IMG"),isTextarea:bt,isEmpty:D,isEmptyAnchor:n.and(_,D),isClosestSibling:P,withClosestSiblings:I,nodeLength:A,isLeftEdgePoint:V,isRightEdgePoint:G,isEdgePoint:K,isLeftEdgeOf:Q,isRightEdgeOf:Y,isLeftEdgePointOf:Z,isRightEdgePointOf:J,prevPoint:et,nextPoint:nt,isSamePoint:it,isVisiblePoint:ot,prevPointUntil:rt,nextPointUntil:at,isCharPoint:st,walkPoint:lt,ancestor:O,singleChildAncestor:j,listAncestor:H,lastAncestor:N,listNext:M,listPrev:z,listDescendant:B,commonAncestor:R,wrap:U,insertAfter:W,appendChildNodes:q,position:X,hasChildren:tt,makeOffsetPath:ct,fromOffsetPath:dt,splitTree:ht,splitPoint:pt,create:ft,createText:mt,remove:gt,removeWhile:vt,replace:yt,html:wt,value:kt,posFromPlaceholder:Ct,attachEvents:xt,detachEvents:$t}}(),p=function(e,o){var r=this,a=t.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=o,this.initialize=function(){return this.layoutInfo=a.createLayout(e,o),this._initialize(),e.hide(),this},this.destroy=function(){this._destroy(),e.removeData("summernote"),a.removeLayout(e,this.layoutInfo)},this.reset=function(){this.code(h.emptyPara),this._destroy(),this._initialize()},this._initialize=function(){var e=t.extend({},this.options.buttons);Object.keys(e).forEach(function(t){r.memo("button."+t,e[t])});var n=t.extend({},this.options.modules,t.summernote.plugins||{});Object.keys(n).forEach(function(t){r.module(t,n[t],!0)}),Object.keys(this.modules).forEach(function(t){r.initializeModule(t)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(t){r.removeModule(t)}),Object.keys(this.memos).forEach(function(t){r.removeMemo(t)})},this.code=function(t){var n=this.invoke("codeview.isActivated");return void 0===t?(this.invoke("codeview.sync"),n?this.layoutInfo.codable.val():this.layoutInfo.editable.html()):(n?this.layoutInfo.codable.val(t):this.layoutInfo.editable.html(t),e.val(t),this.triggerEvent("change",t),void 0)},this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var t=i.head(arguments),o=i.tail(i.from(arguments)),r=this.options.callbacks[n.namespaceToCamel(t,"on")];r&&r.apply(e[0],o),e.trigger("summernote."+t,o)},this.initializeModule=function(t){var i=this.modules[t];i.shouldInitialize=i.shouldInitialize||n.ok,i.shouldInitialize()&&(i.initialize&&i.initialize(),i.events&&h.attachEvents(e,i.events))},this.module=function(t,e,n){return 1===arguments.length?this.modules[t]:(this.modules[t]=new e(this),void(n||this.initializeModule(t)))},this.removeModule=function(t){var n=this.modules[t];n.shouldInitialize()&&(n.events&&h.detachEvents(e,n.events),n.destroy&&n.destroy()),delete this.modules[t]},this.memo=function(t,e){return 1===arguments.length?this.memos[t]:void(this.memos[t]=e)},this.removeMemo=function(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]},this.createInvokeHandler=function(e,n){return function(i){i.preventDefault(),r.invoke(e,n||t(i.target).data("value")||t(i.currentTarget).data("value"))}},this.invoke=function(){var t=i.head(arguments),e=i.tail(i.from(arguments)),n=t.split("."),o=n.length>1,r=o&&i.head(n),a=o?i.last(n):i.head(n),s=this.modules[r||"editor"];return!r&&this[a]?this[a].apply(this,e):s&&s[a]&&s.shouldInitialize()?s[a].apply(s,e):void 0},this.initialize()};t.summernote=t.summernote||{lang:{}},t.fn.extend({summernote:function(){var e=t.type(i.head(arguments)),n="string"===e,o="object"===e,r=o?i.head(arguments):{};r=t.extend({},t.summernote.options,r),r.langInfo=t.extend(!0,{},t.summernote.lang["en-US"],t.summernote.lang[r.lang]),this.each(function(e,n){var i=t(n);if(!i.data("summernote")){var o=new p(i,r);i.data("summernote",o),i.data("summernote").triggerEvent("init",o.layoutInfo)}});var a=this.first();if(a.length){var s=a.data("summernote");if(n)return s.invoke.apply(s,i.from(arguments));r.focus&&s.invoke("editor.focus")}return this}});var f=function(e,n,i,o){this.render=function(r){var a=t(e);if(i&&i.contents&&a.html(i.contents),i&&i.className&&a.addClass(i.className),i&&i.data&&t.each(i.data,function(t,e){a.attr("data-"+t,e)}),i&&i.click&&a.on("click",i.click),n){var s=a.find(".note-children-container");n.forEach(function(t){t.render(s.length?s:a)})}return o&&o(a,i),i&&i.callback&&i.callback(a),r&&r.append(a),a}},m={create:function(e,n){return function(){var i=t.isArray(arguments[0])?arguments[0]:[],o="object"==typeof arguments[1]?arguments[1]:arguments[0];return o&&o.children&&(i=o.children),new f(e,i,o,n)}}},g=m.create('<div class="note-editor note-frame panel panel-default"/>'),v=m.create('<div class="note-toolbar panel-heading"/>'),y=m.create('<div class="note-editing-area"/>'),b=m.create('<textarea class="note-codable"/>'),k=m.create('<div class="note-editable panel-body" contentEditable="true"/>'),w=m.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),C=m.create('<div class="note-editor"/>'),x=m.create('<div class="note-editable" contentEditable="true"/>'),$=m.create('<div class="note-btn-group btn-group">'),_=m.create('<button type="button" class="note-btn btn btn-default btn-sm">',function(t,e){e&&e.tooltip&&t.attr({title:e.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),S=m.create('<div class="dropdown-menu">',function(e,n){var i=t.isArray(n.items)?n.items.map(function(t){return'<li><a href="#" data-value="'+t+'">'+t+"</a></li>"}).join(""):n.items;e.html(i)}),E=m.create('<div class="dropdown-menu note-check">',function(e,n){var i=t.isArray(n.items)?n.items.map(function(t){return'<li><a href="#" data-value="'+t+'">'+F(n.checkClassName)+" "+t+"</a></li>"}).join(""):n.items;e.html(i)}),T=m.create('<div class="note-color-palette"/>',function(t,e){for(var n=[],i=0,o=e.colors.length;o>i;i++){for(var r=e.eventName,a=e.colors[i],s=[],l=0,c=a.length;c>l;l++){var d=a[l];s.push(['<button type="button" class="note-color-btn"','style="background-color:',d,'" ','data-event="',r,'" ','data-value="',d,'" ','title="',d,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+s.join("")+"</div>")}t.html(n.join("")),t.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),P=m.create('<div class="modal" aria-hidden="false"/>',function(t,e){t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+e.title+"</h4>    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))}),I=m.create(['<div class="note-popover popover bottom in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join("")),F=function(t,e){return e=e||"i","<"+e+' class="'+t+'"/>'},A={editor:g,toolbar:v,editingArea:y,codable:b,editable:k,statusbar:w,airEditor:C,airEditable:x,buttonGroup:$,button:_,dropdown:S,dropdownCheck:E,palette:T,dialog:P,popover:I,icon:F,toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var n=(e.airMode?A.airEditor([A.editingArea([A.airEditable()])]):A.editor([A.toolbar(),A.editingArea([A.codable(),A.editable()]),A.statusbar()])).render();return n.insertAfter(t),{note:t,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.show()}};t.extend(t.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var D,L=function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(e){return i.contains([t.BACKSPACE,t.TAB,t.ENTER,t.SPACe],e)},isMove:function(e){return i.contains([t.LEFT,t.UP,t.RIGHT,t.DOWN],e)},nameFromCode:n.invertObject(t),code:t}}(),O=function(){var e=function(t,e){var n,o,r=t.parentElement(),a=document.body.createTextRange(),s=i.from(r.childNodes);for(n=0;n<s.length;n++)if(!h.isText(s[n])){if(a.moveToElementText(s[n]),a.compareEndPoints("StartToStart",t)>=0)break;o=s[n]}if(0!==n&&h.isText(s[n-1])){var l=document.body.createTextRange(),c=null;l.moveToElementText(o||r),l.collapse(!o),c=o?o.nextSibling:r.firstChild;var d=t.duplicate();d.setEndPoint("StartToStart",l);for(var u=d.text.replace(/[\r\n]/g,"").length;u>c.nodeValue.length&&c.nextSibling;)u-=c.nodeValue.length,c=c.nextSibling;c.nodeValue;e&&c.nextSibling&&h.isText(c.nextSibling)&&u===c.nodeValue.length&&(u-=c.nodeValue.length,c=c.nextSibling),r=c,n=u}return{cont:r,offset:n}},o=function(t){var e=function(t,o){var r,a;if(h.isText(t)){var s=h.listPrev(t,n.not(h.isText)),l=i.last(s).previousSibling;r=l||t.parentNode,o+=i.sum(i.tail(s),h.nodeLength),a=!l}else{if(r=t.childNodes[o]||t,h.isText(r))return e(r,0);o=0,a=!1}return{node:r,collapseToStart:a,offset:o}},o=document.body.createTextRange(),r=e(t.node,t.offset);return o.moveToElementText(r.node),o.collapse(r.collapseToStart),o.moveStart("character",r.offset),o},r=function(e,a,s,l){this.sc=e,this.so=a,this.ec=s,this.eo=l;var d=function(){if(c.isW3CRangeSupport){var t=document.createRange();return t.setStart(e,a),t.setEnd(s,l),t}var n=o({node:e,offset:a});return n.setEndPoint("EndToEnd",o({node:s,offset:l})),n};this.getPoints=function(){return{sc:e,so:a,ec:s,eo:l}},this.getStartPoint=function(){return{node:e,offset:a}},this.getEndPoint=function(){return{node:s,offset:l}},this.select=function(){var t=d();if(c.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},this.scrollIntoView=function(t){return t[0].scrollTop+t.height()<this.sc.offsetTop&&(t[0].scrollTop+=Math.abs(t[0].scrollTop+t.height()-this.sc.offsetTop)),this},this.normalize=function(){var t=function(t,e){if(h.isVisiblePoint(t)&&!h.isEdgePoint(t)||h.isVisiblePoint(t)&&h.isRightEdgePoint(t)&&!e||h.isVisiblePoint(t)&&h.isLeftEdgePoint(t)&&e||h.isVisiblePoint(t)&&h.isBlock(t.node)&&h.isEmpty(t.node))return t;var n=h.ancestor(t.node,h.isBlock);if((h.isLeftEdgePointOf(t,n)||h.isVoid(h.prevPoint(t).node))&&!e||(h.isRightEdgePointOf(t,n)||h.isVoid(h.nextPoint(t).node))&&e){if(h.isVisiblePoint(t))return t;e=!e}var i=e?h.nextPointUntil(h.nextPoint(t),h.isVisiblePoint):h.prevPointUntil(h.prevPoint(t),h.isVisiblePoint);return i||t},e=t(this.getEndPoint(),!1),n=this.isCollapsed()?e:t(this.getStartPoint(),!0);return new r(n.node,n.offset,e.node,e.offset)},this.nodes=function(t,e){t=t||n.ok;var o=e&&e.includeAncestor,r=e&&e.fullyContains,a=this.getStartPoint(),s=this.getEndPoint(),l=[],c=[];return h.walkPoint(a,s,function(e){if(!h.isEditable(e.node)){var n;r?(h.isLeftEdgePoint(e)&&c.push(e.node),h.isRightEdgePoint(e)&&i.contains(c,e.node)&&(n=e.node)):n=o?h.ancestor(e.node,t):e.node,n&&t(n)&&l.push(n)}},!0),i.unique(l)},this.commonAncestor=function(){return h.commonAncestor(e,s)},this.expand=function(t){var n=h.ancestor(e,t),i=h.ancestor(s,t);if(!n&&!i)return new r(e,a,s,l);var o=this.getPoints();return n&&(o.sc=n,o.so=0),i&&(o.ec=i,o.eo=h.nodeLength(i)),new r(o.sc,o.so,o.ec,o.eo)},this.collapse=function(t){return t?new r(e,a,e,a):new r(s,l,s,l)},this.splitText=function(){var t=e===s,n=this.getPoints();return h.isText(s)&&!h.isEdgePoint(this.getEndPoint())&&s.splitText(l),h.isText(e)&&!h.isEdgePoint(this.getStartPoint())&&(n.sc=e.splitText(a),n.so=0,t&&(n.ec=n.sc,n.eo=l-a)),new r(n.sc,n.so,n.ec,n.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var e=this.splitText(),n=e.nodes(null,{fullyContains:!0}),o=h.prevPointUntil(e.getStartPoint(),function(t){return!i.contains(n,t.node)}),a=[];return t.each(n,function(t,e){var n=e.parentNode;o.node!==n&&1===h.nodeLength(n)&&a.push(n),h.remove(e,!1)}),t.each(a,function(t,e){h.remove(e,!1)}),new r(o.node,o.offset,o.node,o.offset).normalize()};var u=function(t){return function(){var n=h.ancestor(e,t);return!!n&&n===h.ancestor(s,t)}};this.isOnEditable=u(h.isEditable),this.isOnList=u(h.isList),this.isOnAnchor=u(h.isAnchor),this.isOnCell=u(h.isCell),this.isLeftEdgeOf=function(t){if(!h.isLeftEdgePoint(this.getStartPoint()))return!1;var e=h.ancestor(this.sc,t);return e&&h.isLeftEdgeOf(this.sc,e)},this.isCollapsed=function(){return e===s&&a===l},this.wrapBodyInlineWithPara=function(){if(h.isBodyContainer(e)&&h.isEmpty(e))return e.innerHTML=h.emptyPara,new r(e.firstChild,0,e.firstChild,0);var t=this.normalize();if(h.isParaInline(e)||h.isPara(e))return t;var o;if(h.isInline(t.sc)){var a=h.listAncestor(t.sc,n.not(h.isInline));o=i.last(a),h.isInline(o)||(o=a[a.length-2]||t.sc.childNodes[t.so])}else o=t.sc.childNodes[t.so>0?t.so-1:0];var s=h.listPrev(o,h.isParaInline).reverse();if(s=s.concat(h.listNext(o.nextSibling,h.isParaInline)),s.length){var l=h.wrap(i.head(s),"p");h.appendChildNodes(l,i.tail(s))}return this.normalize()},this.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),n=h.splitPoint(e.getStartPoint(),h.isInline(t));return n.rightNode?n.rightNode.parentNode.insertBefore(t,n.rightNode):n.container.appendChild(t),t},this.pasteHTML=function(e){var n=t("<div></div>").html(e)[0],o=i.from(n.childNodes),r=this.wrapBodyInlineWithPara().deleteContents();return o.reverse().map(function(t){return r.insertNode(t)}).reverse()},this.toString=function(){var t=d();return c.isW3CRangeSupport?t.toString():t.text},this.getWordRange=function(t){var e=this.getEndPoint();if(!h.isCharPoint(e))return this;var n=h.prevPointUntil(e,function(t){return!h.isCharPoint(t)});return t&&(e=h.nextPointUntil(e,function(t){return!h.isCharPoint(t)})),new r(n.node,n.offset,e.node,e.offset)},this.bookmark=function(t){return{s:{path:h.makeOffsetPath(t,e),offset:a},e:{path:h.makeOffsetPath(t,s),offset:l}}},this.paraBookmark=function(t){return{s:{path:i.tail(h.makeOffsetPath(i.head(t),e)),offset:a},e:{path:i.tail(h.makeOffsetPath(i.last(t),s)),offset:l}}},this.getClientRects=function(){var t=d();return t.getClientRects()}};return{create:function(t,n,i,o){if(arguments.length)2===arguments.length&&(i=t,o=n);else if(c.isW3CRangeSupport){var a=document.getSelection();if(!a||0===a.rangeCount)return null;if(h.isBody(a.anchorNode))return null;var s=a.getRangeAt(0);t=s.startContainer,n=s.startOffset,i=s.endContainer,o=s.endOffset}else{var l=document.selection.createRange(),d=l.duplicate();d.collapse(!1);var u=l;u.collapse(!0);var p=e(u,!0),f=e(d,!1);h.isText(p.node)&&h.isLeftEdgePoint(p)&&h.isTextNode(f.node)&&h.isRightEdgePoint(f)&&f.node.nextSibling===p.node&&(p=f),t=p.cont,n=p.offset,i=f.cont,o=f.offset}return new r(t,n,i,o)},createFromNode:function(t){var e=t,n=0,i=t,o=h.nodeLength(i);return h.isVoid(e)&&(n=h.listPrev(e).length-1,e=e.parentNode),h.isBR(i)?(o=h.listPrev(i).length-1,i=i.parentNode):h.isVoid(i)&&(o=h.listPrev(i).length,i=i.parentNode),this.create(e,n,i,o)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var n=h.fromOffsetPath(t,e.s.path),i=e.s.offset,o=h.fromOffsetPath(t,e.e.path),a=e.e.offset;return new r(n,i,o,a)},createFromParaBookmark:function(t,e){var n=t.s.offset,o=t.e.offset,a=h.fromOffsetPath(i.head(e),t.s.path),s=h.fromOffsetPath(i.last(e),t.e.path);return new r(a,n,s,o)}}}(),j=function(){var e=function(e){return t.Deferred(function(n){t.extend(new FileReader,{onload:function(t){var e=t.target.result;n.resolve(e)},onerror:function(){n.reject(this)}}).readAsDataURL(e)}).promise()},n=function(e){return t.Deferred(function(n){var i=t("<img>");i.one("load",function(){i.off("error abort"),n.resolve(i)}).one("error abort",function(){i.off("load").detach(),n.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",e)}).promise()};return{readFileAsDataURL:e,createImage:n}}(),H=function(t){var e=[],n=-1,i=t[0],o=function(){var e=O.create(),n={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:t.html(),bookmark:e?e.bookmark(i):n}},r=function(e){null!==e.contents&&t.html(e.contents),null!==e.bookmark&&O.createFromBookmark(i,e.bookmark).select()};this.rewind=function(){t.html()!==e[n].contents&&this.recordUndo(),n=0,r(e[n])},this.reset=function(){e=[],n=-1,t.html(""),this.recordUndo()},this.undo=function(){t.html()!==e[n].contents&&this.recordUndo(),n>0&&(n--,r(e[n]))},this.redo=function(){e.length-1>n&&(n++,r(e[n]))},this.recordUndo=function(){n++,e.length>n&&(e=e.slice(0,n)),e.push(o())}},N=function(){var e=function(e,n){if(c.jqueryVersion<1.9){var i={};return t.each(n,function(t,n){i[n]=e.css(n)}),i}return e.css.call(e,n)};this.fromNode=function(t){var n=["font-family","font-size","text-align","list-style-type","line-height"],i=e(t,n)||{};return i["font-size"]=parseInt(i["font-size"],10),i},this.stylePara=function(e,n){t.each(e.nodes(h.isPara,{includeAncestor:!0}),function(e,i){t(i).css(n)})},this.styleNodes=function(e,o){e=e.splitText();var r=o&&o.nodeName||"SPAN",a=!(!o||!o.expandClosestSibling),s=!(!o||!o.onlyPartialContains);if(e.isCollapsed())return[e.insertNode(h.create(r))];var l=h.makePredByNodeName(r),c=e.nodes(h.isText,{fullyContains:!0}).map(function(t){return h.singleChildAncestor(t,l)||h.wrap(t,r)});if(a){if(s){var d=e.nodes();l=n.and(l,function(t){return i.contains(d,t)})}return c.map(function(e){var n=h.withClosestSiblings(e,l),o=i.head(n),r=i.tail(n);return t.each(r,function(t,e){h.appendChildNodes(o,e.childNodes),h.remove(e)}),i.head(n)})}return c},this.current=function(e){var n=t(h.isElement(e.sc)?e.sc:e.sc.parentNode),i=this.fromNode(n);try{i=t.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikeThrough")?"strikethrough":"normal"})}catch(o){}if(e.isOnList()){var r=["circle","disc","disc-leading-zero","square"],a=t.inArray(i["list-style-type"],r)>-1;i["list-style"]=a?"unordered":"ordered"}else i["list-style"]="none";var s=h.ancestor(e.sc,h.isPara);if(s&&s.style["line-height"])i["line-height"]=s.style.lineHeight;else{var l=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=l.toFixed(1)}return i.anchor=e.isOnAnchor()&&h.ancestor(e.sc,h.isAnchor),i.ancestors=h.listAncestor(e.sc,h.isEditable),i.range=e,i}},R=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var e=this,o=O.create().wrapBodyInlineWithPara(),r=o.nodes(h.isPara,{includeAncestor:!0}),a=i.clusterBy(r,n.peq2("parentNode"));t.each(a,function(n,o){var r=i.head(o);h.isLi(r)?e.wrapList(o,r.parentNode.nodeName):t.each(o,function(e,n){t(n).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),o.select();
},this.outdent=function(){var e=this,o=O.create().wrapBodyInlineWithPara(),r=o.nodes(h.isPara,{includeAncestor:!0}),a=i.clusterBy(r,n.peq2("parentNode"));t.each(a,function(n,o){var r=i.head(o);h.isLi(r)?e.releaseList([o]):t.each(o,function(e,n){t(n).css("marginLeft",function(t,e){return e=parseInt(e,10)||0,e>25?e-25:""})})}),o.select()},this.toggleList=function(e){var o=this,r=O.create().wrapBodyInlineWithPara(),a=r.nodes(h.isPara,{includeAncestor:!0}),s=r.paraBookmark(a),l=i.clusterBy(a,n.peq2("parentNode"));if(i.find(a,h.isPurePara)){var c=[];t.each(l,function(t,n){c=c.concat(o.wrapList(n,e))}),a=c}else{var d=r.nodes(h.isList,{includeAncestor:!0}).filter(function(n){return!t.nodeName(n,e)});d.length?t.each(d,function(t,n){h.replace(n,e)}):a=this.releaseList(l,!0)}O.createFromParaBookmark(s,a).select()},this.wrapList=function(t,e){var n=i.head(t),o=i.last(t),r=h.isList(n.previousSibling)&&n.previousSibling,a=h.isList(o.nextSibling)&&o.nextSibling,s=r||h.insertAfter(h.create(e||"UL"),o);return t=t.map(function(t){return h.isPurePara(t)?h.replace(t,"LI"):t}),h.appendChildNodes(s,t),a&&(h.appendChildNodes(s,i.from(a.childNodes)),h.remove(a)),t},this.releaseList=function(e,n){var o=[];return t.each(e,function(e,r){var a=i.head(r),s=i.last(r),l=n?h.lastAncestor(a,h.isList):a.parentNode,c=l.childNodes.length>1?h.splitTree(l,{node:s.parentNode,offset:h.position(s)+1},{isSkipPaddingBlankHTML:!0}):null,d=h.splitTree(l,{node:a.parentNode,offset:h.position(a)},{isSkipPaddingBlankHTML:!0});r=n?h.listDescendant(d,h.isLi):i.from(d.childNodes).filter(h.isLi),(n||!h.isList(l.parentNode))&&(r=r.map(function(t){return h.replace(t,"P")})),t.each(i.from(r).reverse(),function(t,e){h.insertAfter(e,l)});var u=i.compact([l,d,c]);t.each(u,function(e,n){var i=[n].concat(h.listDescendant(n,h.isList));t.each(i.reverse(),function(t,e){h.nodeLength(e)||h.remove(e,!0)})}),o=o.concat(r)}),o}},z=function(){var e=new R;this.insertTab=function(t,e,n){var i=h.createText(new Array(n+1).join(h.NBSP_CHAR));e=e.deleteContents(),e.insertNode(i,!0),e=O.create(i,n),e.select()},this.insertParagraph=function(n){var i=O.create();i=i.deleteContents(),i=i.wrapBodyInlineWithPara();var o,r=h.ancestor(i.sc,h.isPara);if(r){if(h.isEmpty(r)&&h.isLi(r))return void e.toggleList(r.parentNode.nodeName);if(h.isEmpty(r)&&h.isPara(r)&&h.isBlockquote(r.parentNode))h.insertAfter(r,r.parentNode),o=r;else{o=h.splitTree(r,i.getStartPoint());var a=h.listDescendant(r,h.isEmptyAnchor);a=a.concat(h.listDescendant(o,h.isEmptyAnchor)),t.each(a,function(t,e){h.remove(e)}),(h.isHeading(o)||h.isPre(o))&&h.isEmpty(o)&&(o=h.replace(o,"p"))}}else{var s=i.sc.childNodes[i.so];o=t(h.emptyPara)[0],s?i.sc.insertBefore(o,s):i.sc.appendChild(o)}O.create(o,0).normalize().select().scrollIntoView(n)}},M=function(){this.tab=function(t,e){var n=h.ancestor(t.commonAncestor(),h.isCell),o=h.ancestor(n,h.isTable),r=h.listDescendant(o,h.isCell),a=i[e?"prev":"next"](r,n);a&&O.create(a,0).select()},this.createTable=function(e,n,i){for(var o,r=[],a=0;e>a;a++)r.push("<td>"+h.blank+"</td>");o=r.join("");for(var s,l=[],c=0;n>c;c++)l.push("<tr>"+o+"</tr>");s=l.join("");var d=t("<table>"+s+"</table>");return i&&i.tableClassName&&d.addClass(i.tableClassName),d[0]}},B="bogus",U=function(e){var n=this,o=e.layoutInfo.note,r=e.layoutInfo.editor,a=e.layoutInfo.editable,s=e.options,l=s.langInfo,d=new N,u=new M,p=new z,f=new R,m=new H(a);this.initialize=function(){a.on("keydown",function(t){t.keyCode===L.code.ENTER&&e.triggerEvent("enter",t),e.triggerEvent("keydown",t),s.shortcuts&&!t.isDefaultPrevented()&&n.handleKeyMap(t)}).on("keyup",function(t){e.triggerEvent("keyup",t)}).on("focus",function(t){e.triggerEvent("focus",t)}).on("blur",function(t){e.triggerEvent("blur",t)}).on("mousedown",function(t){e.triggerEvent("mousedown",t)}).on("mouseup",function(t){e.triggerEvent("mouseup",t)}).on("scroll",function(t){e.triggerEvent("scroll",t)}).on("paste",function(t){e.triggerEvent("paste",t)});var t=c.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";a.on(t,function(){e.triggerEvent("change",a.html())}),r.on("focusin",function(t){e.triggerEvent("focusin",t)}).on("focusout",function(t){e.triggerEvent("focusout",t)}),!s.airMode&&s.height&&a.outerHeight(s.height),!s.airMode&&s.maxHeight&&a.css("max-height",s.maxHeight),!s.airMode&&s.minHeight&&a.css("min-height",s.minHeight),a.html(h.html(o)||h.emptyPara),m.recordUndo()},this.destroy=function(){a.off()},this.handleKeyMap=function(t){var n=s.keyMap[c.isMac?"mac":"pc"],i=[];t.metaKey&&i.push("CMD"),t.ctrlKey&&!t.altKey&&i.push("CTRL"),t.shiftKey&&i.push("SHIFT");var o=L.nameFromCode[t.keyCode];o&&i.push(o);var r=n[i.join("+")];r?(t.preventDefault(),e.invoke(r)):L.isEdit(t.keyCode)&&this.afterCommand()},this.createRange=function(){return this.focus(),O.create()},this.saveRange=function(t){this.focus(),a.data("range",O.create()),t&&O.create().collapse().select()},this.restoreRange=function(){var t=a.data("range");t&&(t.select(),this.focus())},this.saveTarget=function(t){a.data("target",t)},this.clearTarget=function(){a.removeData("target")},this.restoreTarget=function(){return a.data("target")},this.currentStyle=function(){var t=O.create();return t&&(t=t.normalize()),t?d.current(t):d.fromNode(a)},this.styleFromNode=function(t){return d.fromNode(t)},this.undo=function(){e.triggerEvent("before.command",a.html()),m.undo(),e.triggerEvent("change",a.html())},e.memo("help.undo",l.help.undo),this.redo=function(){e.triggerEvent("before.command",a.html()),m.redo(),e.triggerEvent("change",a.html())},e.memo("help.redo",l.help.redo);for(var g=this.beforeCommand=function(){e.triggerEvent("before.command",a.html()),n.focus()},v=this.afterCommand=function(t){m.recordUndo(),t||e.triggerEvent("change",a.html())},y=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],b=0,k=y.length;k>b;b++)this[y[b]]=function(t){return function(e){g(),document.execCommand(t,!1,e),v(!0)}}(y[b]),e.memo("help."+y[b],l.help[y[b]]);this.tab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()?u.tab(t):(g(),p.insertTab(a,t,s.tabSize),v())},e.memo("help.tab",l.help.tab),this.untab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()&&u.tab(t,!0)},e.memo("help.untab",l.help.untab),this.wrapCommand=function(t){return function(){g(),t.apply(n,arguments),v()}},this.insertParagraph=this.wrapCommand(function(){p.insertParagraph(a)}),e.memo("help.insertParagraph",l.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){f.insertOrderedList(a)}),e.memo("help.insertOrderedList",l.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){f.insertUnorderedList(a)}),e.memo("help.insertUnorderedList",l.help.insertUnorderedList),this.indent=this.wrapCommand(function(){f.indent(a)}),e.memo("help.indent",l.help.indent),this.outdent=this.wrapCommand(function(){f.outdent(a)}),e.memo("help.outdent",l.help.outdent),this.insertImage=function(t,n){return j.createImage(t,n).then(function(t){g(),"function"==typeof n?n(t):("string"==typeof n&&t.attr("data-filename",n),t.css("width",Math.min(a.width(),t.width()))),t.show(),O.create().insertNode(t[0]),O.createFromNodeAfter(t[0]).select(),v()}).fail(function(){e.triggerEvent("image.upload.error")})},this.insertImages=function(i){t.each(i,function(t,i){var o=i.name;s.maximumImageFileSize&&s.maximumImageFileSize<i.size?e.triggerEvent("image.upload.error",l.image.maximumFileSizeError):j.readFileAsDataURL(i).then(function(t){return n.insertImage(t,o)}).fail(function(){e.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(t){var n=s.callbacks;n.onImageUpload?e.triggerEvent("image.upload",t):this.insertImages(t)},this.insertNode=this.wrapCommand(function(t){O.create().insertNode(t),O.createFromNodeAfter(t).select()}),this.insertText=this.wrapCommand(function(t){var e=O.create().insertNode(h.createText(t));O.create(e,h.nodeLength(e)).select()}),this.getSelectedText=function(){var t=this.createRange();return t.isOnAnchor()&&(t=O.createFromNode(h.ancestor(t.sc,h.isAnchor))),t.toString()},this.pasteHTML=this.wrapCommand(function(t){var e=O.create().pasteHTML(t);O.createFromNodeAfter(i.last(e)).select()}),this.formatBlock=this.wrapCommand(function(t){t=c.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t)}),this.formatPara=function(){this.formatBlock("P")},e.memo("help.formatPara",l.help.formatPara);for(var b=1;6>=b;b++)this["formatH"+b]=function(t){return function(){this.formatBlock("H"+t)}}(b),e.memo("help.formatH"+b,l.help["formatH"+b]);this.fontSize=function(e){this.focus();var n=O.create();if(n&&n.isCollapsed()){var o=d.styleNodes(n),r=i.head(o);t(o).css({"font-size":e+"px"}),r&&!h.nodeLength(r)&&(r.innerHTML=h.ZERO_WIDTH_NBSP_CHAR,O.createFromNodeAfter(r.firstChild).select(),a.data(B,r))}else g(),t(d.styleNodes(n)).css({"font-size":e+"px"}),v()},this.insertHorizontalRule=this.wrapCommand(function(){var e=O.create(),n=e.insertNode(t("<HR/>")[0]);n.nextSibling&&O.create(n.nextSibling,0).normalize().select()}),e.memo("help.insertHorizontalRule",l.help.insertHorizontalRule),this.removeBogus=function(){var t=a.data(B);if(t){var e=i.find(i.from(t.childNodes),h.isText),n=e.nodeValue.indexOf(h.ZERO_WIDTH_NBSP_CHAR);-1!==n&&e.deleteData(n,1),h.isEmpty(t)&&h.remove(t),a.removeData(B)}},this.lineHeight=this.wrapCommand(function(t){d.stylePara(O.create(),{lineHeight:t})}),this.unlink=function(){var t=this.createRange();if(t.isOnAnchor()){var e=h.ancestor(t.sc,h.isAnchor);t=O.createFromNode(e),t.select(),g(),document.execCommand("unlink"),v()}},this.createLink=this.wrapCommand(function(e){var n=e.url,o=e.text,r=e.isNewWindow,a=e.range||this.createRange(),l=a.toString()!==o;s.onCreateLink&&(n=s.onCreateLink(n));var c=[];if(l){var u=a.insertNode(t("<A>"+o+"</A>")[0]);c.push(u)}else c=d.styleNodes(a,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});t.each(c,function(e,i){t(i).attr("href",n),r?t(i).attr("target","_blank"):t(i).removeAttr("target")});var h=O.createFromNodeBefore(i.head(c)),p=h.getStartPoint(),f=O.createFromNodeAfter(i.last(c)),m=f.getEndPoint();O.create(p.node,p.offset,m.node,m.offset).select()}),this.getLinkInfo=function(){this.focus();var e=O.create().expand(h.isAnchor),n=t(i.head(e.nodes(h.isAnchor)));return{range:e,text:e.toString(),isNewWindow:n.length?"_blank"===n.attr("target"):!1,url:n.length?n.attr("href"):""}},this.color=this.wrapCommand(function(t){var e=t.foreColor,n=t.backColor;e&&document.execCommand("foreColor",!1,e),n&&document.execCommand("backColor",!1,n)}),this.insertTable=this.wrapCommand(function(t){var e=t.split("x"),n=O.create().deleteContents();n.insertNode(u.createTable(e[0],e[1],s))}),this.floatMe=this.wrapCommand(function(e){var n=t(this.restoreTarget());n.css("float",e)}),this.resize=this.wrapCommand(function(e){var n=t(this.restoreTarget());n.css({width:100*e+"%",height:""})}),this.resizeTo=function(t,e,n){var i;if(n){var o=t.y/t.x,r=e.data("ratio");i={width:r>o?t.x:t.y/r,height:r>o?t.x*r:t.y}}else i={width:t.x,height:t.y};e.css(i)},this.removeMedia=this.wrapCommand(function(){var n=t(this.restoreTarget()).detach();e.triggerEvent("media.delete",n,a)}),this.focus=function(){a.is(":focus")||(a.focus(),!a.is(":focus")&&c.isFF&&O.createFromNode(a[0]).normalize().collapse().select())},this.isEmpty=function(){return h.isEmpty(a[0])||h.emptyPara===a.html()}},W=function(e){var n=this,o=e.layoutInfo.editable;this.events={"summernote.keydown":function(t,i){n.needKeydownHook()&&(i.ctrlKey||i.metaKey)&&i.keyCode===L.code.V&&(e.invoke("editor.saveRange"),n.$paste.focus(),setTimeout(function(){n.pasteByHook()},0))}},this.needKeydownHook=function(){return c.isMSIE&&c.browserVersion>10||c.isFF},this.initialize=function(){this.needKeydownHook()?(this.$paste=t("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),o.before(this.$paste),this.$paste.on("paste",function(t){e.triggerEvent("paste",t)})):o.on("paste",this.pasteByEvent)},this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)},this.pasteByHook=function(){var n=this.$paste[0].firstChild;if(h.isImg(n)){for(var i=n.src,o=atob(i.split(",")[1]),r=new Uint8Array(o.length),a=0;a<o.length;a++)r[a]=o.charCodeAt(a);var s=new Blob([r],{type:"image/png"});s.name="clipboard.png",e.invoke("editor.restoreRange"),e.invoke("editor.focus"),e.invoke("editor.insertImagesOrCallback",[s])}else{var l=t("<div />").html(this.$paste.html()).html();e.invoke("editor.restoreRange"),e.invoke("editor.focus"),l&&e.invoke("editor.pasteHTML",l)}this.$paste.empty()},this.pasteByEvent=function(t){var n=t.originalEvent.clipboardData;if(n&&n.items&&n.items.length){var o=i.head(n.items);"file"===o.kind&&-1!==o.type.indexOf("image/")&&e.invoke("editor.insertImagesOrCallback",[o.getAsFile()]),e.invoke("editor.afterCommand")}}},q=function(e){var n=t(document),i=e.layoutInfo.editor,o=e.layoutInfo.editable,r=e.options,a=r.langInfo,s=t(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(i);this.initialize=function(){r.disableDragAndDrop?n.on("drop",function(t){t.preventDefault()}):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var r=t(),l=s.find(".note-dropzone-message");n.on("dragenter",function(t){var n=e.invoke("codeview.isActivated"),o=i.width()>0&&i.height()>0;n||r.length||!o||(i.addClass("dragover"),s.width(i.width()),s.height(i.height()),l.text(a.image.dragImageHere)),r=r.add(t.target)}).on("dragleave",function(t){r=r.not(t.target),r.length||i.removeClass("dragover")}).on("drop",function(){r=t(),i.removeClass("dragover")}),s.on("dragenter",function(){s.addClass("hover"),l.text(a.image.dropImage)}).on("dragleave",function(){s.removeClass("hover"),l.text(a.image.dragImageHere)}),s.on("drop",function(n){var i=n.originalEvent.dataTransfer;i&&i.files&&i.files.length?(n.preventDefault(),o.focus(),e.invoke("editor.insertImagesOrCallback",i.files)):t.each(i.types,function(n,o){var r=i.getData(o);o.toLowerCase().indexOf("text")>-1?e.invoke("editor.pasteHTML",r):t(r).each(function(){e.invoke("editor.insertNode",this)})})}).on("dragover",!1)}};c.hasCodeMirror&&(c.isSupportAmd?require(["codemirror"],function(t){D=t}):D=window.CodeMirror);var V=function(t){var e=t.layoutInfo.editor,n=t.layoutInfo.editable,i=t.layoutInfo.codable,o=t.options;this.sync=function(){var t=this.isActivated();t&&c.hasCodeMirror&&i.data("cmEditor").save()},this.isActivated=function(){return e.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate(),t.triggerEvent("codeview.toggled")},this.activate=function(){if(i.val(h.html(n,o.prettifyHtml)),i.height(n.height()),t.invoke("toolbar.updateCodeview",!0),e.addClass("codeview"),i.focus(),c.hasCodeMirror){var r=D.fromTextArea(i[0],o.codemirror);if(o.codemirror.tern){var a=new D.TernServer(o.codemirror.tern);r.ternServer=a,r.on("cursorActivity",function(t){a.updateArgHints(t)})}r.setSize(null,n.outerHeight()),i.data("cmEditor",r)}},this.deactivate=function(){if(c.hasCodeMirror){var r=i.data("cmEditor");i.val(r.getValue()),r.toTextArea()}var a=h.value(i,o.prettifyHtml)||h.emptyPara,s=n.html()!==a;n.html(a),n.height(o.height?i.height():"auto"),e.removeClass("codeview"),s&&t.triggerEvent("change",n.html(),n),n.focus(),t.invoke("toolbar.updateCodeview",!1)},this.destroy=function(){this.isActivated()&&this.deactivate()}},G=24,K=function(e){var n=t(document),i=e.layoutInfo.statusbar,o=e.layoutInfo.editable,r=e.options;this.initialize=function(){r.airMode||r.disableResizeEditor||i.on("mousedown",function(t){t.preventDefault(),t.stopPropagation();var e=o.offset().top-n.scrollTop();n.on("mousemove",function(t){var n=t.clientY-(e+G);n=r.minheight>0?Math.max(n,r.minheight):n,n=r.maxHeight>0?Math.min(n,r.maxHeight):n,o.height(n)}).one("mouseup",function(){n.off("mousemove")})})},this.destroy=function(){i.off()}},Q=function(e){var n=e.layoutInfo.editor,i=e.layoutInfo.toolbar,o=e.layoutInfo.editable,r=e.layoutInfo.codable,a=t(window),s=t("html, body");this.toggle=function(){var t=function(t){o.css("height",t.h),r.css("height",t.h),r.data("cmeditor")&&r.data("cmeditor").setsize(null,t.h)};n.toggleClass("fullscreen");var l=n.hasClass("fullscreen");l?(o.data("orgHeight",o.css("height")),a.on("resize",function(){t({h:a.height()-i.outerHeight()})}).trigger("resize"),s.css("overflow","hidden")):(a.off("resize"),t({h:o.data("orgHeight")}),s.css("overflow","visible")),e.invoke("toolbar.updateFullscreen",l)}},Y=function(e){var n=this,i=t(document),o=e.layoutInfo.editingArea,r=e.options;this.events={"summernote.mousedown":function(t,e){n.update(e.target)&&e.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){n.update()}},this.initialize=function(){this.$handle=t(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',r.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',r.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(o),this.$handle.on("mousedown",function(t){if(h.isControlSizing(t.target)){t.preventDefault(),t.stopPropagation();var o=n.$handle.find(".note-control-selection").data("target"),r=o.offset(),a=i.scrollTop();i.on("mousemove",function(t){e.invoke("editor.resizeTo",{x:t.clientX-r.left,y:t.clientY-(r.top-a)},o,!t.shiftKey),n.update(o[0])}).one("mouseup",function(t){t.preventDefault(),i.off("mousemove"),e.invoke("editor.afterCommand")}),o.data("ratio")||o.data("ratio",o.height()/o.width())}})},this.destroy=function(){this.$handle.remove()},this.update=function(n){var i=h.isImg(n),o=this.$handle.find(".note-control-selection");if(e.invoke("imagePopover.update",n),i){var r=t(n),a=r.position(),s={w:r.outerWidth(!0),h:r.outerHeight(!0)};o.css({display:"block",left:a.left,top:a.top,width:s.w,height:s.h}).data("target",r);var l=s.w+"x"+s.h;o.find(".note-control-selection-info").text(l),e.invoke("editor.saveTarget",n)}else this.hide();return i},this.hide=function(){e.invoke("editor.clearTarget"),this.$handle.children().hide()}},Z=function(e){var n=this,o=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+-]+@)(.+)$/i;this.events={"summernote.keyup":function(t,e){e.isDefaultPrevented()||n.handleKeyup(e)},"summernote.keydown":function(t,e){n.handleKeydown(e)}},this.initialize=function(){this.lastWordRange=null},this.destroy=function(){this.lastWordRange=null},this.replace=function(){if(this.lastWordRange){var t=this.lastWordRange.toString();if(o.test(t)){var n=this.nodeFromKeyword(t);this.lastWordRange.insertNode(n),this.lastWordRange=null,e.invoke("editor.focus")}}},this.nodeFromKeyword=function(e){return t("<a />").html(e).attr("href",e)[0]},this.handleKeydown=function(t){if(i.contains([L.code.ENTER,L.code.SPACE],t.keyCode)){var n=e.invoke("editor.createRange").getWordRange();this.lastWordRange=n}},this.handleKeyup=function(t){i.contains([L.code.ENTER,L.code.SPACE],t.keyCode)&&this.replace()}},J=function(t){var e=t.layoutInfo.note;this.events={"summernote.change":function(){e.val(t.invoke("code"))}},this.shouldInitialize=function(){return h.isTextarea(e[0])}},X=function(e){var n=this,i=e.layoutInfo.editingArea,o=e.options;this.events={"summernote.init summernote.change":function(){n.update()},"summernote.codeview.toggled":function(){n.update()}},this.shouldInitialize=function(){return!!o.placeholder},this.initialize=function(){this.$placeholder=t('<div class="note-placeholder">'),this.$placeholder.on("click",function(){e.invoke("focus")}).text(o.placeholder).prependTo(i)},this.destroy=function(){this.$placeholder.remove()},this.update=function(){var t=!e.invoke("codeview.isActivated")&&e.invoke("editor.isEmpty");this.$placeholder.toggle(t)}},tt=function(e){var o=this,r=t.summernote.ui,a=e.layoutInfo.toolbar,s=e.options,l=s.langInfo,d=n.invertObject(s.keyMap[c.isMac?"mac":"pc"]),u=this.representShortcut=function(t){var e=d[t];return c.isMac&&(e=e.replace("CMD","\u2318").replace("SHIFT","\u21e7")),e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+e+")"};this.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons()},this.addToolbarButtons=function(){e.memo("button.style",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(s.icons.magic)+" "+r.icon(s.icons.caret,"span"),tooltip:l.style.style,data:{toggle:"dropdown"}}),r.dropdown({className:"dropdown-style",items:e.options.styleTags,click:e.createInvokeHandler("editor.formatBlock")})]).render()}),e.memo("button.bold",function(){return r.button({className:"note-btn-bold",contents:r.icon(s.icons.bold),tooltip:l.font.bold+u("bold"),click:e.createInvokeHandler("editor.bold")}).render()}),e.memo("button.italic",function(){return r.button({className:"note-btn-italic",contents:r.icon(s.icons.italic),tooltip:l.font.italic+u("italic"),click:e.createInvokeHandler("editor.italic")}).render()}),e.memo("button.underline",function(){return r.button({className:"note-btn-underline",contents:r.icon(s.icons.underline),tooltip:l.font.underline+u("underline"),click:e.createInvokeHandler("editor.underline")}).render()}),e.memo("button.clear",function(){return r.button({contents:r.icon(s.icons.eraser),tooltip:l.font.clear+u("removeFormat"),click:e.createInvokeHandler("editor.removeFormat")}).render()}),e.memo("button.strikethrough",function(){return r.button({contents:r.icon(s.icons.strikethrough),tooltip:l.font.strikethrough+u("strikethrough"),click:e.createInvokeHandler("editor.strikethrough")}).render()}),e.memo("button.superscript",function(){return r.button({contents:r.icon(s.icons.superscript),tooltip:l.font.superscript,click:e.createInvokeHandler("editor.superscript")}).render()}),e.memo("button.subscript",function(){return r.button({contents:r.icon(s.icons.subscript),tooltip:l.font.subscript,click:e.createInvokeHandler("editor.subscript")}).render()}),e.memo("button.fontname",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+r.icon(s.icons.caret,"span"),tooltip:l.font.name,data:{toggle:"dropdown"}}),r.dropdownCheck({className:"dropdown-fontname",checkClassName:s.icons.menuCheck,items:s.fontNames.filter(function(t){return c.isFontInstalled(t)||i.contains(s.fontNamesIgnoreCheck,t)}),click:e.createInvokeHandler("editor.fontName")})]).render()}),e.memo("button.fontsize",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+r.icon(s.icons.caret,"span"),tooltip:l.font.size,data:{toggle:"dropdown"}}),r.dropdownCheck({className:"dropdown-fontsize",checkClassName:s.icons.menuCheck,items:s.fontSizes,click:e.createInvokeHandler("editor.fontSize")})]).render()}),e.memo("button.color",function(){return r.buttonGroup({className:"note-color",children:[r.button({className:"note-current-color-button",contents:r.icon(s.icons.font+" note-recent-color"),tooltip:l.color.recent,click:e.createInvokeHandler("editor.color"),callback:function(t){var e=t.find(".note-recent-color");e.css({"background-color":"yellow"}),t.data("value",{backColor:"yellow"})}}),r.button({className:"dropdown-toggle",contents:r.icon(s.icons.caret,"span"),tooltip:l.color.more,data:{toggle:"dropdown"}}),r.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+l.color.background+"</div>","  <div>",'    <button class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',l.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+l.color.foreground+"</div>","  <div>",'    <button class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',l.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(e){e.find(".note-holder").each(function(){var e=t(this);e.append(r.palette({colors:s.colors,eventName:e.data("event")}).render())})},click:function(n){var i=t(n.target),o=i.data("event"),r=i.data("value");if(o&&r){var a="backColor"===o?"background-color":"color",s=i.closest(".note-color").find(".note-recent-color"),l=i.closest(".note-color").find(".note-current-color-button"),c=l.data("value");c[o]=r,s.css(a,r),l.data("value",c),e.invoke("editor."+o,r)}}})]}).render()}),e.memo("button.ol",function(){return r.button({contents:r.icon(s.icons.unorderedlist),tooltip:l.lists.unordered+u("insertUnorderedList"),click:e.createInvokeHandler("editor.insertUnorderedList")}).render()}),e.memo("button.ul",function(){return r.button({contents:r.icon(s.icons.orderedlist),tooltip:l.lists.ordered+u("insertOrderedList"),click:e.createInvokeHandler("editor.insertOrderedList")}).render()}),e.memo("button.paragraph",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(s.icons.align)+" "+r.icon(s.icons.caret,"span"),tooltip:l.paragraph.paragraph,data:{toggle:"dropdown"}}),r.dropdown([r.buttonGroup({className:"note-align",children:[r.button({contents:r.icon(s.icons.alignLeft),tooltip:l.paragraph.left+u("justifyLeft"),click:e.createInvokeHandler("editor.justifyLeft")}),r.button({contents:r.icon(s.icons.alignCenter),tooltip:l.paragraph.center+u("justifyCenter"),click:e.createInvokeHandler("editor.justifyCenter")}),r.button({contents:r.icon(s.icons.alignRight),tooltip:l.paragraph.right+u("justifyRight"),click:e.createInvokeHandler("editor.justifyRight")}),r.button({contents:r.icon(s.icons.alignJustify),tooltip:l.paragraph.justify+u("justifyFull"),click:e.createInvokeHandler("editor.justifyFull")})]}),r.buttonGroup({className:"note-list",children:[r.button({contents:r.icon(s.icons.outdent),tooltip:l.paragraph.outdent+u("outdent"),click:e.createInvokeHandler("editor.outdent")}),r.button({contents:r.icon(s.icons.indent),tooltip:l.paragraph.indent+u("indent"),click:e.createInvokeHandler("editor.indent")})]})])]).render()}),e.memo("button.height",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(s.icons.textHeight)+" "+r.icon(s.icons.caret,"span"),tooltip:l.font.height,data:{toggle:"dropdown"}}),r.dropdownCheck({items:s.lineHeights,checkClassName:s.icons.menuCheck,className:"dropdown-line-height",click:e.createInvokeHandler("editor.lineHeight")})]).render()}),e.memo("button.table",function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(s.icons.table)+" "+r.icon(s.icons.caret,"span"),tooltip:l.table.table,data:{toggle:"dropdown"}}),r.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(t){var n=t.find(".note-dimension-picker-mousecatcher");n.css({width:s.insertTableMaxSize.col+"em",height:s.insertTableMaxSize.row+"em"}).mousedown(e.createInvokeHandler("editor.insertTable")).on("mousemove",o.tableMoveHandler)}}).render()}),e.memo("button.link",function(){return r.button({contents:r.icon(s.icons.link),tooltip:l.link.link,click:e.createInvokeHandler("linkDialog.show")}).render()}),e.memo("button.picture",function(){return r.button({contents:r.icon(s.icons.picture),tooltip:l.image.image,click:e.createInvokeHandler("imageDialog.show")}).render()}),e.memo("button.video",function(){return r.button({contents:r.icon(s.icons.video),tooltip:l.video.video,click:e.createInvokeHandler("videoDialog.show")}).render()}),e.memo("button.hr",function(){return r.button({contents:r.icon(s.icons.minus),tooltip:l.hr.insert+u("insertHorizontalRule"),click:e.createInvokeHandler("editor.insertHorizontalRule")}).render()}),e.memo("button.fullscreen",function(){return r.button({className:"btn-fullscreen",contents:r.icon(s.icons.arrowsAlt),tooltip:l.options.fullscreen,click:e.createInvokeHandler("fullscreen.toggle")}).render()}),e.memo("button.codeview",function(){return r.button({className:"btn-codeview",contents:r.icon(s.icons.code),tooltip:l.options.codeview,click:e.createInvokeHandler("codeview.toggle")}).render()}),e.memo("button.redo",function(){return r.button({contents:r.icon(s.icons.redo),tooltip:l.history.redo+u("redo"),click:e.createInvokeHandler("editor.redo")}).render()}),e.memo("button.undo",function(){return r.button({contents:r.icon(s.icons.undo),tooltip:l.history.undo+u("undo"),click:e.createInvokeHandler("editor.undo")}).render()}),e.memo("button.help",function(){return r.button({contents:r.icon(s.icons.question),tooltip:l.options.help,click:e.createInvokeHandler("helpDialog.show")}).render()})},this.addImagePopoverButtons=function(){e.memo("button.imageSize100",function(){return r.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:l.image.resizeFull,click:e.createInvokeHandler("editor.resize","1")}).render()}),e.memo("button.imageSize50",function(){return r.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:l.image.resizeHalf,click:e.createInvokeHandler("editor.resize","0.5")}).render()}),e.memo("button.imageSize25",function(){return r.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:l.image.resizeQuarter,click:e.createInvokeHandler("editor.resize","0.25")}).render()}),e.memo("button.floatLeft",function(){return r.button({contents:r.icon(s.icons.alignLeft),tooltip:l.image.floatLeft,click:e.createInvokeHandler("editor.floatMe","left")}).render()}),e.memo("button.floatRight",function(){return r.button({contents:r.icon(s.icons.alignRight),tooltip:l.image.floatRight,click:e.createInvokeHandler("editor.floatMe","right")}).render()}),e.memo("button.floatNone",function(){return r.button({contents:r.icon(s.icons.alignJustify),tooltip:l.image.floatNone,click:e.createInvokeHandler("editor.floatMe","none")}).render()}),e.memo("button.removeMedia",function(){return r.button({contents:r.icon(s.icons.trash),tooltip:l.image.remove,click:e.createInvokeHandler("editor.removeMedia")}).render()})},this.addLinkPopoverButtons=function(){e.memo("button.linkDialogShow",function(){return r.button({contents:r.icon(s.icons.link),tooltip:l.link.edit,click:e.createInvokeHandler("linkDialog.show")}).render()}),e.memo("button.unlink",function(){return r.button({contents:r.icon(s.icons.unlink),tooltip:l.link.unlink,click:e.createInvokeHandler("editor.unlink")}).render()})},this.build=function(t,n){for(var i=0,o=n.length;o>i;i++){for(var a=n[i],s=a[0],l=a[1],c=r.buttonGroup({className:"note-"+s}).render(),d=0,u=l.length;u>d;d++){var h=e.memo("button."+l[d]);h&&c.append("function"==typeof h?h(e):h)}c.appendTo(t)}},this.updateCurrentStyle=function(){var n=e.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===n["font-bold"]},".note-btn-italic":function(){return"italic"===n["font-italic"]},".note-btn-underline":function(){return"underline"===n["font-underline"]}}),n["font-family"]){var o=n["font-family"].split(",").map(function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),r=i.find(o,function(t){return c.isFontInstalled(t)||i.contains(s.fontNamesIgnoreCheck,t)});a.find(".dropdown-fontname li a").each(function(){var e=t(this).data("value")+""==r+"";this.className=e?"checked":""}),a.find(".note-current-fontname").text(r)}if(n["font-size"]){var l=n["font-size"];a.find(".dropdown-fontsize li a").each(function(){var e=t(this).data("value")+""==l+"";this.className=e?"checked":""}),a.find(".note-current-fontsize").text(l)}if(n["line-height"]){var d=n["line-height"];a.find(".dropdown-line-height li a").each(function(){var e=t(this).data("value")+""==d+"";this.className=e?"checked":""})}},this.updateBtnStates=function(e){t.each(e,function(t,e){r.toggleBtnActive(a.find(t),e())})},this.tableMoveHandler=function(e){var n,i=18,o=t(e.target.parentNode),r=o.next(),a=o.find(".note-dimension-picker-mousecatcher"),l=o.find(".note-dimension-picker-highlighted"),c=o.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var d=t(e.target).offset();n={x:e.pageX-d.left,y:e.pageY-d.top}}else n={x:e.offsetX,y:e.offsetY};var u={c:Math.ceil(n.x/i)||1,r:Math.ceil(n.y/i)||1
};l.css({width:u.c+"em",height:u.r+"em"}),a.data("value",u.c+"x"+u.r),3<u.c&&u.c<s.insertTableMaxSize.col&&c.css({width:u.c+1+"em"}),3<u.r&&u.r<s.insertTableMaxSize.row&&c.css({height:u.r+1+"em"}),r.html(u.c+" x "+u.r)}},et=function(e){var n=t.summernote.ui,i=e.layoutInfo.note,o=e.layoutInfo.toolbar,r=e.options;this.shouldInitialize=function(){return!r.airMode},this.initialize=function(){r.toolbar=r.toolbar||[],r.toolbar.length?e.invoke("buttons.build",o,r.toolbar):o.hide(),i.on("summernote.keyup summernote.mouseup summernote.change",function(){e.invoke("buttons.updateCurrentStyle")}),e.invoke("buttons.updateCurrentStyle")},this.destroy=function(){o.children().remove()},this.updateFullscreen=function(t){n.toggleBtnActive(o.find(".btn-fullscreen"),t)},this.updateCodeview=function(t){n.toggleBtnActive(o.find(".btn-codeview"),t),t?this.deactivate():this.activate()},this.activate=function(t){var e=o.find("button");t||(e=e.not(".btn-codeview")),n.toggleBtn(e,!0)},this.deactivate=function(t){var e=o.find("button");t||(e=e.not(".btn-codeview")),n.toggleBtn(e,!1)}},nt=function(e){var n=this,i=t.summernote.ui,o=e.layoutInfo.editor,r=e.options,a=r.langInfo;this.initialize=function(){var e=r.dialogsInBody?t(document.body):o,n='<div class="form-group"><label>'+a.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+a.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(r.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+a.link.openInNewWindow+"</label></div>"),s='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+a.link.insert+"</button>";this.$dialog=i.dialog({className:"link-dialog",title:a.link.insert,body:n,footer:s}).render().appendTo(e)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===L.code.ENTER&&e.trigger("click")})},this.showLinkDialog=function(o){return t.Deferred(function(t){var r=n.$dialog.find(".note-link-text"),a=n.$dialog.find(".note-link-url"),s=n.$dialog.find(".note-link-btn"),l=n.$dialog.find("input[type=checkbox]");i.onDialogShown(n.$dialog,function(){e.triggerEvent("dialog.shown"),r.val(o.text),r.on("input",function(){i.toggleBtn(s,r.val()&&a.val()),o.text=r.val()}),o.url||(o.url=o.text||"http://",i.toggleBtn(s,o.text)),a.on("input",function(){i.toggleBtn(s,r.val()&&a.val()),o.text||r.val(a.val())}).val(o.url).trigger("focus"),n.bindEnterKey(a,s),n.bindEnterKey(r,s),l.prop("checked",o.isNewWindow),s.one("click",function(e){e.preventDefault(),t.resolve({range:o.range,url:a.val(),text:r.val(),isNewWindow:l.is(":checked")}),n.$dialog.modal("hide")})}),i.onDialogHidden(n.$dialog,function(){r.off("input keypress"),a.off("input keypress"),s.off("click"),"pending"===t.state()&&t.reject()}),i.showDialog(n.$dialog)}).promise()},this.show=function(){var t=e.invoke("editor.getLinkInfo");e.invoke("editor.saveRange"),this.showLinkDialog(t).then(function(t){e.invoke("editor.restoreRange"),e.invoke("editor.createLink",t)}).fail(function(){e.invoke("editor.restoreRange")})},e.memo("help.linkDialog.show",r.langInfo.help["linkDialog.show"])},it=function(e){var n=this,o=t.summernote.ui,r=e.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){n.update()},"summernote.dialog.shown":function(){n.hide()}},this.shouldInitialize=function(){return!i.isEmpty(r.popover.link)},this.initialize=function(){this.$popover=o.popover({className:"note-link-popover",callback:function(t){var e=t.find(".popover-content");e.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,r.popover.link)},this.destroy=function(){this.$popover.remove()},this.update=function(){var n=e.invoke("editor.createRange");if(n.isCollapsed()&&n.isOnAnchor()){var i=h.ancestor(n.sc,h.isAnchor),o=t(i).attr("href");this.$popover.find("a").attr("href",o).html(o);var r=h.posFromPlaceholder(i);this.$popover.css({display:"block",left:r.left,top:r.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},ot=function(e){var n=this,i=t.summernote.ui,o=e.layoutInfo.editor,r=e.options,a=r.langInfo;this.initialize=function(){var e=r.dialogsInBody?t(document.body):o,n="";if(r.maximumImageFileSize){var s=Math.floor(Math.log(r.maximumImageFileSize)/Math.log(1024)),l=1*(r.maximumImageFileSize/Math.pow(1024,s)).toFixed(2)+" "+" KMGTP"[s]+"B";n="<small>"+a.image.maximumFileSize+" : "+l+"</small>"}var c='<div class="form-group note-group-select-from-files"><label>'+a.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+n+'</div><div class="form-group" style="overflow:auto;"><label>'+a.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',d='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+a.image.insert+"</button>";this.$dialog=i.dialog({title:a.image.insert,body:c,footer:d}).render().appendTo(e)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===L.code.ENTER&&e.trigger("click")})},this.show=function(){e.invoke("editor.saveRange"),this.showImageDialog().then(function(t){i.hideDialog(n.$dialog),e.invoke("editor.restoreRange"),"string"==typeof t?e.invoke("editor.insertImage",t):e.invoke("editor.insertImagesOrCallback",t)}).fail(function(){e.invoke("editor.restoreRange")})},this.showImageDialog=function(){return t.Deferred(function(t){var o=n.$dialog.find(".note-image-input"),r=n.$dialog.find(".note-image-url"),a=n.$dialog.find(".note-image-btn");i.onDialogShown(n.$dialog,function(){e.triggerEvent("dialog.shown"),o.replaceWith(o.clone().on("change",function(){t.resolve(this.files||this.value)}).val("")),a.click(function(e){e.preventDefault(),t.resolve(r.val())}),r.on("keyup paste",function(){var t=r.val();i.toggleBtn(a,t)}).val("").trigger("focus"),n.bindEnterKey(r,a)}),i.onDialogHidden(n.$dialog,function(){o.off("change"),r.off("keyup paste keypress"),a.off("click"),"pending"===t.state()&&t.reject()}),i.showDialog(n.$dialog)})}},rt=function(e){var n=t.summernote.ui,o=e.options;this.shouldInitialize=function(){return!i.isEmpty(o.popover.image)},this.initialize=function(){this.$popover=n.popover({className:"note-image-popover"}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,o.popover.image)},this.destroy=function(){this.$popover.remove()},this.update=function(t){if(h.isImg(t)){var e=h.posFromPlaceholder(t);this.$popover.css({display:"block",left:e.left,top:e.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},at=function(e){var n=this,i=t.summernote.ui,o=e.layoutInfo.editor,r=e.options,a=r.langInfo;this.initialize=function(){var e=r.dialogsInBody?t(document.body):o,n='<div class="form-group row-fluid"><label>'+a.video.url+' <small class="text-muted">'+a.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>',s='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+a.video.insert+"</button>";this.$dialog=i.dialog({title:a.video.insert,body:n,footer:s}).render().appendTo(e)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===L.code.ENTER&&e.trigger("click")})},this.createVideoNode=function(e){var n,i=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,o=e.match(i),r=/\/\/instagram.com\/p\/(.[a-zA-Z0-9_-]*)/,a=e.match(r),s=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/,l=e.match(s),c=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,d=e.match(c),u=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,h=e.match(u),p=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,f=e.match(p),m=/^.+.(mp4|m4v)$/,g=e.match(m),v=/^.+.(ogg|ogv)$/,y=e.match(v),b=/^.+.(webm)$/,k=e.match(b);if(o&&11===o[1].length){var w=o[1];n=t("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+w).attr("width","640").attr("height","360")}else if(a&&a[0].length)n=t("<iframe>").attr("frameborder",0).attr("src",a[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(l&&l[0].length)n=t("<iframe>").attr("frameborder",0).attr("src",l[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(d&&d[3].length)n=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+d[3]).attr("width","640").attr("height","360");else if(h&&h[2].length)n=t("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+h[2]).attr("width","640").attr("height","360");else if(f&&f[1].length)n=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+f[1]);else{if(!(g||y||k))return!1;n=t("<video controls>").attr("src",e).attr("width","640").attr("height","360")}return n.addClass("note-video-clip"),n[0]},this.show=function(){var t=e.invoke("editor.getSelectedText");e.invoke("editor.saveRange"),this.showVideoDialog(t).then(function(t){i.hideDialog(n.$dialog),e.invoke("editor.restoreRange");var o=n.createVideoNode(t);o&&e.invoke("editor.insertNode",o)}).fail(function(){e.invoke("editor.restoreRange")})},this.showVideoDialog=function(o){return t.Deferred(function(t){var r=n.$dialog.find(".note-video-url"),a=n.$dialog.find(".note-video-btn");i.onDialogShown(n.$dialog,function(){e.triggerEvent("dialog.shown"),r.val(o).on("input",function(){i.toggleBtn(a,r.val())}).trigger("focus"),a.click(function(e){e.preventDefault(),t.resolve(r.val())}),n.bindEnterKey(r,a)}),i.onDialogHidden(n.$dialog,function(){r.off("input"),a.off("click"),"pending"===t.state()&&t.reject()}),i.showDialog(n.$dialog)})}},st=function(e){var n=this,i=t.summernote.ui,o=e.layoutInfo.editor,r=e.options,a=r.langInfo;this.createShortCutList=function(){var n=r.keyMap[c.isMac?"mac":"pc"],i=t("<div />");return Object.keys(n).forEach(function(o){var r=t('<div class="help-list-item"/>'),a=n[o],s=e.memo("help."+a)?e.memo("help."+a):a,l=t("<label />").css({width:180,"max-width":200,"margin-right":10}).html(o),c=t("<span />").html(s);r.html(l).append(c),i.append(r)}),i.html()},this.initialize=function(){var e=r.dialogsInBody?t(document.body):o,n=['<p class="text-center">','<a href="//summernote.org/" target="_blank">Summernote 0.7.1</a> \xb7 ','<a href="//github.com/summernote/summernote" target="_blank">Project</a> \xb7 ','<a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=i.dialog({title:a.options.help,body:this.createShortCutList(),footer:n,callback:function(t){t.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(e)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.showHelpDialog=function(){return t.Deferred(function(t){i.onDialogHidden(n.$dialog,function(){e.triggerEvent("dialog.shown"),t.resolve()}),i.showDialog(n.$dialog)}).promise()},this.show=function(){e.invoke("editor.saveRange"),this.showHelpDialog().then(function(){e.invoke("editor.restoreRange")})}},lt=function(e){var o=this,r=t.summernote.ui,a=e.options,s=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){o.update()},"summernote.change summernote.dialog.shown":function(){o.hide()},"summernote.focusout":function(t,e){c.isFF||e.relatedTarget&&h.ancestor(e.relatedTarget,n.eq(o.$popover[0]))||o.hide()}},this.shouldInitialize=function(){return a.airMode&&!i.isEmpty(a.popover.air)},this.initialize=function(){this.$popover=r.popover({className:"note-air-popover"}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,a.popover.air)},this.destroy=function(){this.$popover.remove()},this.update=function(){var t=e.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var o=i.last(t.range.getClientRects());if(o){var r=n.rect2bnd(o);this.$popover.css({display:"block",left:Math.max(r.left+r.width/2,0)-s,top:r.top+r.height})}}else this.hide()},this.hide=function(){this.$popover.hide()}},ct=function(e){var o=this,r=t.summernote.ui,a=e.options.hint||[],s=t.isArray(a)?a:[a];this.events={"summernote.keyup":function(t,e){e.isDefaultPrevented()||o.handleKeyup(e)},"summernote.keydown":function(t,e){o.handleKeydown(e)},"summernote.dialog.shown":function(){o.hide()}},this.shouldInitialize=function(){return s.length>0},this.initialize=function(){this.lastWordRange=null,this.$popover=r.popover({className:"note-hint-popover"}).render().appendTo("body"),this.$content=this.$popover.find(".popover-content"),this.$content.on("click",".note-hint-item",function(){o.$content.find(".active").removeClass("active"),t(this).addClass("active"),o.replace()})},this.destroy=function(){this.$popover.remove()},this.selectItem=function(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2},this.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{var n=t.parent().next();n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first())}},this.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{var n=t.parent().prev();n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last())}},this.replace=function(){var t=this.$content.find(".note-hint-item.active"),n=this.nodeFromItem(t);this.lastWordRange.insertNode(n),O.createFromNode(n).collapse().select(),this.lastWordRange=null,this.hide(),e.invoke("editor.focus")},this.nodeFromItem=function(t){var e=s[t.data("index")],n=t.data("item"),i=e.content?e.content(n):n;return"string"==typeof i&&(i=h.createText(i)),i},this.createItemTemplates=function(e,n){var i=s[e];return n.map(function(n,o){var r=t('<div class="note-hint-item"/>');return r.append(i.template?i.template(n):n+""),r.data({index:e,item:n}),0===e&&0===o&&r.addClass("active"),r})},this.handleKeydown=function(t){this.$popover.is(":visible")&&(t.keyCode===L.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===L.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===L.code.DOWN&&(t.preventDefault(),this.moveDown()))},this.searchKeyword=function(t,e,n){var i=s[t];if(i&&i.match.test(e)&&i.search){var o=i.match.exec(e);i.search(o[1],n)}else n()},this.createGroup=function(e,n){var i=t('<div class="note-hint-group note-hint-group-'+e+'"/>');return this.searchKeyword(e,n,function(t){t=t||[],t.length&&(i.html(o.createItemTemplates(e,t)),o.show())}),i},this.handleKeyup=function(t){if(i.contains([L.code.ENTER,L.code.UP,L.code.DOWN],t.keyCode)){if(t.keyCode===L.code.ENTER&&this.$popover.is(":visible"))return}else{var r=e.invoke("editor.createRange").getWordRange(),a=r.toString();if(s.length&&a){this.$content.empty();var l=n.rect2bnd(i.last(r.getClientRects()));l&&(this.$popover.css({left:l.left,top:l.top+l.height}).hide(),this.lastWordRange=r,s.forEach(function(t,e){t.match.test(a)&&o.createGroup(e,a).appendTo(o.$content)}))}else this.hide()}},this.show=function(){this.$popover.show()},this.hide=function(){this.$popover.hide()}};t.summernote=t.extend(t.summernote,{version:"0.7.1",ui:A,plugins:{},options:{modules:{editor:U,clipboard:W,dropzone:q,codeview:V,statusbar:K,fullscreen:Q,handle:Y,hintPopover:ct,autoLink:Z,autoSync:J,placeholder:X,buttons:tt,toolbar:et,linkDialog:nt,linkPopover:it,imageDialog:ot,imagePopover:rt,videoDialog:at,helpDialog:st,airPopover:lt},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onSubmit:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"fa fa-align-left",alignCenter:"fa fa-align-center",alignJustify:"fa fa-align-justify",alignLeft:"fa fa-align-left",alignRight:"fa fa-align-right",indent:"fa fa-indent",outdent:"fa fa-outdent",arrowsAlt:"fa fa-arrows-alt",bold:"fa fa-bold",caret:"caret",circle:"fa fa-circle",close:"fa fa-close",code:"fa fa-code",eraser:"fa fa-eraser",font:"fa fa-font",frame:"fa fa-frame",italic:"fa fa-italic",link:"fa fa-link",unlink:"fa fa-chain-broken",magic:"fa fa-magic",menuCheck:"fa fa-check",minus:"fa fa-minus",orderedlist:"fa fa-list-ol",pencil:"fa fa-pencil",picture:"fa fa-picture-o",question:"fa fa-question",redo:"fa fa-repeat",square:"fa fa-square",strikethrough:"fa fa-strikethrough",subscript:"fa fa-subscript",superscript:"fa fa-superscript",table:"fa fa-table",textHeight:"fa fa-text-height",trash:"fa fa-trash",underline:"fa fa-underline",undo:"fa fa-undo",unorderedlist:"fa fa-list-ul",video:"fa fa-youtube-play"}}})}),/*!
* inputmask.js
* http://github.com/RobinHerbots/jquery.inputmask
* Copyright (c) 2010 - 2016 Robin Herbots
* Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
* Version: 3.2.7
*/
!function(t){"function"==typeof define&&define.amd?define(["inputmask.dependencyLib"],t):"object"==typeof exports?module.exports=t(require("./inputmask.dependencyLib.jquery")):t(window.dependencyLib||jQuery)}(function(t){function e(n,i){return this instanceof e?(t.isPlainObject(n)?i=n:(i=i||{},i.alias=n),this.el=void 0,this.opts=t.extend(!0,{},this.defaults,i),this.noMasksCache=i&&void 0!==i.definitions,this.userOptions=i||{},this.events={},void o(this.opts.alias,i,this.opts)):new e(n,i)}function n(t){var e=document.createElement("input"),n="on"+t,i=n in e;return i||(e.setAttribute(n,"return;"),i="function"==typeof e[n]),e=null,i}function i(e,n){var i=e.getAttribute("type"),o="INPUT"===e.tagName&&-1!==t.inArray(i,n.supportsInputType)||e.isContentEditable||"TEXTAREA"===e.tagName;if(!o){var r=document.createElement("input");r.setAttribute("type",i),o="text"===r.type,r=null}return o}function o(e,n,i){var r=i.aliases[e];return r?(r.alias&&o(r.alias,void 0,i),t.extend(!0,i,r),t.extend(!0,i,n),!0):(null===i.mask&&(i.mask=e),!1)}function r(e,n,i){function r(t,n){n=void 0!==n?n:e.getAttribute("data-inputmask-"+t),null!==n&&("string"==typeof n&&(0===t.indexOf("on")?n=window[n]:"false"===n?n=!1:"true"===n&&(n=!0)),i[t]=n)}var a,s,l,c,d=e.getAttribute("data-inputmask");if(d&&""!==d&&(d=d.replace(new RegExp("'","g"),'"'),s=JSON.parse("{"+d+"}")),s){l=void 0;for(c in s)if("alias"===c.toLowerCase()){l=s[c];break}}r("alias",l),i.alias&&o(i.alias,i,n);for(a in n){if(s){l=void 0;for(c in s)if(c.toLowerCase()===a.toLowerCase()){l=s[c];break}}r(a,l)}return t.extend(!0,n,i),n}function a(n,i){function o(e){function i(t,e,n,i){this.matches=[],this.isGroup=t||!1,this.isOptional=e||!1,this.isQuantifier=n||!1,this.isAlternator=i||!1,this.quantifier={min:1,max:1}}function o(e,i,o){var r=n.definitions[i];o=void 0!==o?o:e.matches.length;var a=e.matches[o-1];if(r&&!v){r.placeholder=t.isFunction(r.placeholder)?r.placeholder(n):r.placeholder;for(var s=r.prevalidator,l=s?s.length:0,c=1;c<r.cardinality;c++){var d=l>=c?s[c-1]:[],u=d.validator,h=d.cardinality;e.matches.splice(o++,0,{fn:u?"string"==typeof u?new RegExp(u):new function(){this.test=u}:new RegExp("."),cardinality:h?h:1,optionality:e.isOptional,newBlockMarker:void 0===a||a.def!==(r.definitionSymbol||i),casing:r.casing,def:r.definitionSymbol||i,placeholder:r.placeholder,mask:i}),a=e.matches[o-1]}e.matches.splice(o++,0,{fn:r.validator?"string"==typeof r.validator?new RegExp(r.validator):new function(){this.test=r.validator}:new RegExp("."),cardinality:r.cardinality,optionality:e.isOptional,newBlockMarker:void 0===a||a.def!==(r.definitionSymbol||i),casing:r.casing,def:r.definitionSymbol||i,placeholder:r.placeholder,mask:i})}else e.matches.splice(o++,0,{fn:null,cardinality:0,optionality:e.isOptional,newBlockMarker:void 0===a||a.def!==i,casing:null,def:n.staticDefinitionSymbol||i,placeholder:void 0!==n.staticDefinitionSymbol?i:void 0,mask:i}),v=!1}function r(t,e){t.isGroup&&(t.isGroup=!1,o(t,n.groupmarker.start,0),e!==!0&&o(t,n.groupmarker.end))}function a(t,e,n,i){e.matches.length>0&&(void 0===i||i)&&(n=e.matches[e.matches.length-1],r(n)),o(e,t)}function s(){if(b.length>0){if(h=b[b.length-1],a(d,h,f,!h.isAlternator),h.isAlternator){p=b.pop();for(var t=0;t<p.matches.length;t++)p.matches[t].isGroup=!1;b.length>0?(h=b[b.length-1],h.matches.push(p)):y.matches.push(p)}}else a(d,y,f)}function l(t){function e(t){return t===n.optionalmarker.start?t=n.optionalmarker.end:t===n.optionalmarker.end?t=n.optionalmarker.start:t===n.groupmarker.start?t=n.groupmarker.end:t===n.groupmarker.end&&(t=n.groupmarker.start),t}t.matches=t.matches.reverse();for(var i in t.matches){var o=parseInt(i);if(t.matches[i].isQuantifier&&t.matches[o+1]&&t.matches[o+1].isGroup){var r=t.matches[i];t.matches.splice(i,1),t.matches.splice(o+1,0,r)}void 0!==t.matches[i].matches?t.matches[i]=l(t.matches[i]):t.matches[i]=e(t.matches[i])}return t}for(var c,d,u,h,p,f,m,g=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,v=!1,y=new i,b=[],k=[];c=g.exec(e);)if(d=c[0],v)s();else switch(d.charAt(0)){case n.escapeChar:v=!0;break;case n.optionalmarker.end:case n.groupmarker.end:if(u=b.pop(),void 0!==u)if(b.length>0){if(h=b[b.length-1],h.matches.push(u),h.isAlternator){p=b.pop();for(var w=0;w<p.matches.length;w++)p.matches[w].isGroup=!1;b.length>0?(h=b[b.length-1],h.matches.push(p)):y.matches.push(p)}}else y.matches.push(u);else s();break;case n.optionalmarker.start:b.push(new i(!1,!0));break;case n.groupmarker.start:b.push(new i(!0));break;case n.quantifiermarker.start:var C=new i(!1,!1,!0);d=d.replace(/[{}]/g,"");var x=d.split(","),$=isNaN(x[0])?x[0]:parseInt(x[0]),_=1===x.length?$:isNaN(x[1])?x[1]:parseInt(x[1]);if(("*"===_||"+"===_)&&($="*"===_?0:1),C.quantifier={min:$,max:_},b.length>0){var S=b[b.length-1].matches;c=S.pop(),c.isGroup||(m=new i(!0),m.matches.push(c),c=m),S.push(c),S.push(C)}else c=y.matches.pop(),c.isGroup||(m=new i(!0),m.matches.push(c),c=m),y.matches.push(c),y.matches.push(C);break;case n.alternatormarker:b.length>0?(h=b[b.length-1],f=h.matches.pop()):f=y.matches.pop(),f.isAlternator?b.push(f):(p=new i(!1,!1,!1,!0),p.matches.push(f),b.push(p));break;default:s()}for(;b.length>0;)u=b.pop(),r(u,!0),y.matches.push(u);return y.matches.length>0&&(f=y.matches[y.matches.length-1],r(f),k.push(y)),n.numericInput&&l(k[0]),k}function r(r,a){if(null===r||""===r)return void 0;if(1===r.length&&n.greedy===!1&&0!==n.repeat&&(n.placeholder=""),n.repeat>0||"*"===n.repeat||"+"===n.repeat){var s="*"===n.repeat?0:"+"===n.repeat?1:n.repeat;r=n.groupmarker.start+r+n.groupmarker.end+n.quantifiermarker.start+s+","+n.repeat+n.quantifiermarker.end}var l;return void 0===e.prototype.masksCache[r]||i===!0?(l={mask:r,maskToken:o(r),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:a},i!==!0&&(e.prototype.masksCache[n.numericInput?r.split("").reverse().join(""):r]=l,l=t.extend(!0,{},e.prototype.masksCache[n.numericInput?r.split("").reverse().join(""):r]))):l=t.extend(!0,{},e.prototype.masksCache[n.numericInput?r.split("").reverse().join(""):r]),l}function a(t){return t=t.toString()}var s;if(t.isFunction(n.mask)&&(n.mask=n.mask(n)),t.isArray(n.mask)){if(n.mask.length>1){n.keepStatic=null===n.keepStatic?!0:n.keepStatic;var l="(";return t.each(n.numericInput?n.mask.reverse():n.mask,function(e,n){l.length>1&&(l+=")|("),l+=a(void 0===n.mask||t.isFunction(n.mask)?n:n.mask)}),l+=")",r(l,n.mask)}n.mask=n.mask.pop()}return n.mask&&(s=void 0===n.mask.mask||t.isFunction(n.mask.mask)?r(a(n.mask),n.mask):r(a(n.mask.mask),n.mask)),s}function s(o,r,a){function l(t,e,n){e=e||0;var i,o,r,s=[],l=0,c=f();do{if(t===!0&&h().validPositions[l]){var d=h().validPositions[l];o=d.match,i=d.locator.slice(),s.push(n===!0?d.input:L(l,o))}else r=v(l,i,l-1),o=r.match,i=r.locator.slice(),(a.jitMasking===!1||c>l||isFinite(a.jitMasking)&&a.jitMasking>l)&&s.push(L(l,o));l++}while((void 0===ht||ht>l-1)&&null!==o.fn||null===o.fn&&""!==o.def||e>=l);return""===s[s.length-1]&&s.pop(),s}function h(){return r}function p(t){var e=h();e.buffer=void 0,t!==!0&&(e.tests={},e._buffer=void 0,e.validPositions={},e.p=0)}function f(t,e){var n=-1,i=-1,o=h().validPositions;void 0===t&&(t=-1);for(var r in o){var a=parseInt(r);o[a]&&(e||null!==o[a].match.fn)&&(t>=a&&(n=a),a>=t&&(i=a))}return-1!==n&&t-n>1||t>i?n:i}function m(e,n,i){if(a.insertMode&&void 0!==h().validPositions[e]&&void 0===i){var o,r=t.extend(!0,{},h().validPositions),s=f();for(o=e;s>=o;o++)delete h().validPositions[o];h().validPositions[e]=n;var l,c=!0,d=h().validPositions;for(o=l=e;s>=o;o++){var u=r[o];if(void 0!==u)for(var m=l,g=-1;m<P()&&(null==u.match.fn&&d[o]&&(d[o].match.optionalQuantifier===!0||d[o].match.optionality===!0)||null!=u.match.fn);){if(null===u.match.fn||!a.keepStatic&&d[o]&&(void 0!==d[o+1]&&w(o+1,d[o].locator.slice(),o).length>1||void 0!==d[o].alternation)?m++:m=I(l),b(m,u.match.def)){var v=E(m,u.input,!0,!0);c=v!==!1,l=v.caret||v.insert?f():m;break}if(c=null==u.match.fn,g===m)break;g=m}if(!c)break}if(!c)return h().validPositions=t.extend(!0,{},r),p(!0),!1}else h().validPositions[e]=n;return p(!0),!0}function g(t,e,n,i){var o,r=t;for(h().p=t,o=r;e>o;o++)void 0!==h().validPositions[o]&&(n===!0||a.canClearPosition(h(),o,f(),i,a)!==!1)&&delete h().validPositions[o];for(o=r+1;o<=f();){for(;void 0!==h().validPositions[r];)r++;var s=h().validPositions[r];if(r>o&&(o=r+1),void 0===h().validPositions[o]&&T(o)||void 0!==s)o++;else{var l=v(o);b(r,l.match.def)?E(r,l.input||L(o),!0)!==!1&&(delete h().validPositions[o],o++):T(o)||(o++,r--),r++}}var c=f(),d=P();for(i!==!0&&n!==!0&&void 0!==h().validPositions[c]&&h().validPositions[c].input===a.radixPoint&&delete h().validPositions[c],o=c+1;d>=o;o++)h().validPositions[o]&&delete h().validPositions[o];p(!0)}function v(t,e,n){var i=h().validPositions[t];if(void 0===i)for(var o=w(t,e,n),r=f(),s=h().validPositions[r]||w(0)[0],l=void 0!==s.alternation?s.locator[s.alternation].toString().split(","):[],c=0;c<o.length&&(i=o[c],!(i.match&&(a.greedy&&i.match.optionalQuantifier!==!0||(i.match.optionality===!1||i.match.newBlockMarker===!1)&&i.match.optionalQuantifier!==!0)&&(void 0===s.alternation||s.alternation!==i.alternation||void 0!==i.locator[s.alternation]&&S(i.locator[s.alternation].toString().split(","),l))));c++);return i}function y(t){return h().validPositions[t]?h().validPositions[t].match:w(t)[0].match}function b(t,e){for(var n=!1,i=w(t),o=0;o<i.length;o++)if(i[o].match&&i[o].match.def===e){n=!0;break}return n}function k(e,n){var i,o;return(h().tests[e]||h().validPositions[e])&&t.each(h().tests[e]||[h().validPositions[e]],function(t,e){var r=e.alternation?e.locator[e.alternation].toString().indexOf(n):-1;(void 0===o||o>r)&&-1!==r&&(i=e,o=r)}),i}function w(e,n,i){function o(n,i,r,s){function c(r,s,f){function m(e,n){var i=0===t.inArray(e,n.matches);return i||t.each(n.matches,function(t,o){return o.isQuantifier===!0&&(i=m(e,n.matches[t-1]))?!1:void 0}),i}function g(t,e){var n=k(t,e);return n?n.locator.slice(n.alternation+1):[]}if(l>1e4)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+h().mask;if(l===e&&void 0===r.matches)return d.push({match:r,locator:s.reverse(),cd:p}),!0;if(void 0!==r.matches){if(r.isGroup&&f!==r){if(r=c(n.matches[t.inArray(r,n.matches)+1],s))return!0}else if(r.isOptional){var v=r;if(r=o(r,i,s,f)){if(a=d[d.length-1].match,!m(a,v))return!0;u=!0,l=e}}else if(r.isAlternator){var y,b=r,w=[],C=d.slice(),x=s.length,$=i.length>0?i.shift():-1;if(-1===$||"string"==typeof $){var _,S=l,E=i.slice(),T=[];if("string"==typeof $)T=$.split(",");else for(_=0;_<b.matches.length;_++)T.push(_);for(var P=0;P<T.length;P++){if(_=parseInt(T[P]),d=[],i=g(l,_),r=c(b.matches[_]||n.matches[_],[_].concat(s),f)||r,r!==!0&&void 0!==r&&T[T.length-1]<b.matches.length){var I=t.inArray(r,n.matches)+1;n.matches.length>I&&(r=c(n.matches[I],[I].concat(s.slice(1,s.length)),f),r&&(T.push(I.toString()),t.each(d,function(t,e){e.alternation=s.length-1})))}y=d.slice(),l=S,d=[];for(var F=0;F<E.length;F++)i[F]=E[F];for(var A=0;A<y.length;A++){var D=y[A];D.alternation=D.alternation||x;for(var L=0;L<w.length;L++){var O=w[L];if(D.match.def===O.match.def&&("string"!=typeof $||-1!==t.inArray(D.locator[D.alternation].toString(),T))){D.match.mask===O.match.mask&&(y.splice(A,1),A--),-1===O.locator[D.alternation].toString().indexOf(D.locator[D.alternation])&&(O.locator[D.alternation]=O.locator[D.alternation]+","+D.locator[D.alternation],O.alternation=D.alternation);break}}}w=w.concat(y)}"string"==typeof $&&(w=t.map(w,function(e,n){if(isFinite(n)){var i,o=e.alternation,r=e.locator[o].toString().split(",");e.locator[o]=void 0,e.alternation=void 0;for(var a=0;a<r.length;a++)i=-1!==t.inArray(r[a],T),i&&(void 0!==e.locator[o]?(e.locator[o]+=",",e.locator[o]+=r[a]):e.locator[o]=parseInt(r[a]),e.alternation=o);if(void 0!==e.locator[o])return e}})),d=C.concat(w),l=e,u=d.length>0}else r=c(b.matches[$]||n.matches[$],[$].concat(s),f);if(r)return!0}else if(r.isQuantifier&&f!==n.matches[t.inArray(r,n.matches)-1])for(var j=r,H=i.length>0?i.shift():0;H<(isNaN(j.quantifier.max)?H+1:j.quantifier.max)&&e>=l;H++){var N=n.matches[t.inArray(j,n.matches)-1];if(r=c(N,[H].concat(s),N)){if(a=d[d.length-1].match,a.optionalQuantifier=H>j.quantifier.min-1,m(a,N)){if(H>j.quantifier.min-1){u=!0,l=e;break}return!0}return!0}}else if(r=o(r,i,s,f))return!0}else l++}for(var f=i.length>0?i.shift():0;f<n.matches.length;f++)if(n.matches[f].isQuantifier!==!0){var m=c(n.matches[f],[f].concat(r),s);if(m&&l===e)return m;if(l>e)break}}function r(t){var e=t[0]||t;return e.locator.slice()}var a,s=h().maskToken,l=n?i:0,c=n||[0],d=[],u=!1,p=n?n.join(""):"";if(e>-1){if(void 0===n){for(var f,m=e-1;void 0===(f=h().validPositions[m]||h().tests[m])&&m>-1;)m--;void 0!==f&&m>-1&&(c=r(f),p=c.join(""),f=f[0]||f,l=m)}if(h().tests[e]&&h().tests[e][0].cd===p)return h().tests[e];for(var g=c.shift();g<s.length;g++){var v=o(s[g],c,[g]);if(v&&l===e||l>e)break}}return(0===d.length||u)&&d.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),h().tests[e]=t.extend(!0,[],d),h().tests[e]}function C(){return void 0===h()._buffer&&(h()._buffer=l(!1,1)),h()._buffer}function x(t){if(void 0===h().buffer||t===!0){if(t===!0)for(var e in h().tests)void 0===h().validPositions[e]&&delete h().tests[e];h().buffer=l(!0,f(),!0)}return h().buffer}function $(t,e,n){var i;if(n=n,t===!0)p(),t=0,e=n.length;else for(i=t;e>i;i++)delete h().validPositions[i],delete h().tests[i];for(i=t;e>i;i++)p(!0),n[i]!==a.skipOptionalPartCharacter&&E(i,n[i],!0,!0)}function _(t,e){switch(e.casing){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t}function S(e,n){for(var i=a.greedy?n:n.slice(0,1),o=!1,r=0;r<e.length;r++)if(-1!==t.inArray(e[r],i)){o=!0;break}return o}function E(e,n,i,o){function r(e,n,i,o){var r=!1;return t.each(w(e),function(s,l){for(var c=l.match,d=n?1:0,u="",v=c.cardinality;v>d;v--)u+=A(e-(v-1));if(n&&(u+=n),x(!0),r=null!=c.fn?c.fn.test(u,h(),e,i,a):n!==c.def&&n!==a.skipOptionalPartCharacter||""===c.def?!1:{c:c.placeholder||c.def,pos:e},r!==!1){var y=void 0!==r.c?r.c:n;y=y===a.skipOptionalPartCharacter&&null===c.fn?c.placeholder||c.def:y;var b=e,k=x();if(void 0!==r.remove&&(t.isArray(r.remove)||(r.remove=[r.remove]),t.each(r.remove.sort(function(t,e){return e-t}),function(t,e){g(e,e+1,!0)})),void 0!==r.insert&&(t.isArray(r.insert)||(r.insert=[r.insert]),t.each(r.insert.sort(function(t,e){return t-e}),function(t,e){E(e.pos,e.c,!1,o)})),r.refreshFromBuffer){var w=r.refreshFromBuffer;if(i=!0,$(w===!0?w:w.start,w.end,k),void 0===r.pos&&void 0===r.c)return r.pos=f(),!1;if(b=void 0!==r.pos?r.pos:e,b!==e)return r=t.extend(r,E(b,y,!0,o)),!1}else if(r!==!0&&void 0!==r.pos&&r.pos!==e&&(b=r.pos,$(e,b,x().slice()),b!==e))return r=t.extend(r,E(b,y,!0)),!1;return r!==!0&&void 0===r.pos&&void 0===r.c?!1:(s>0&&p(!0),m(b,t.extend({},l,{input:_(y,c)}),o)||(r=!1),!1)}}),r}function s(e,n,i,o){for(var r,s,l,c,d,u,m=t.extend(!0,{},h().validPositions),g=t.extend(!0,{},h().tests),y=f();y>=0&&(c=h().validPositions[y],!c||void 0===c.alternation||(r=y,s=h().validPositions[r].alternation,v(r).locator[c.alternation]===c.locator[c.alternation]));y--);if(void 0!==s){r=parseInt(r);for(var b in h().validPositions)if(b=parseInt(b),c=h().validPositions[b],b>=r&&void 0!==c.alternation){var w;0===r?(w=[],t.each(h().tests[r],function(t,e){void 0!==e.locator[s]&&(w=w.concat(e.locator[s].toString().split(",")))})):w=h().validPositions[r].locator[s].toString().split(",");var C=void 0!==c.locator[s]?c.locator[s]:w[0];C.length>0&&(C=C.split(",")[0]);for(var x=0;x<w.length;x++){var $=[],_=0,S=0;if(C<w[x]){for(var T,P,I=b;I>=0;I--)if(T=h().validPositions[I],void 0!==T){var F=k(I,w[x]);h().validPositions[I].match.def!==F.match.def&&($.push(h().validPositions[I].input),h().validPositions[I]=F,h().validPositions[I].input=L(I),null===h().validPositions[I].match.fn&&S++,T=F),P=T.locator[s],T.locator[s]=parseInt(w[x]);break}if(C!==T.locator[s]){for(d=b+1;d<f(void 0,!0)+1;d++)u=h().validPositions[d],u&&null!=u.match.fn?$.push(u.input):e>d&&_++,delete h().validPositions[d],delete h().tests[d];for(p(!0),a.keepStatic=!a.keepStatic,l=!0;$.length>0;){var A=$.shift();if(A!==a.skipOptionalPartCharacter&&!(l=E(f(void 0,!0)+1,A,!1,o)))break}if(T.alternation=s,T.locator[s]=P,l){var D=f(e)+1;for(d=b+1;d<f()+1;d++)u=h().validPositions[d],(void 0===u||null==u.match.fn)&&e>d&&S++;e+=S-_,l=E(e>D?D:e,n,i,o)}if(a.keepStatic=!a.keepStatic,l)return l;p(),h().validPositions=t.extend(!0,{},m),h().tests=t.extend(!0,{},g)}}}break}}return!1}function l(e,n){for(var i=h().validPositions[n],o=i.locator,r=o.length,a=e;n>a;a++)if(void 0===h().validPositions[a]&&!T(a,!0)){var s=w(a),l=s[0],c=-1;t.each(s,function(t,e){for(var n=0;r>n&&void 0!==e.locator[n]&&S(e.locator[n].toString().split(","),o[n].toString().split(","));n++)n>c&&(c=n,l=e)}),m(a,t.extend({},l,{input:l.match.placeholder||l.match.def}),!0)}}i=i===!0;for(var c=x(),d=e-1;d>-1&&!h().validPositions[d];d--);for(d++;e>d;d++)void 0===h().validPositions[d]&&((!T(d)||c[d]!==L(d))&&w(d).length>1||c[d]===a.radixPoint||"0"===c[d]&&t.inArray(a.radixPoint,c)<d)&&r(d,c[d],!0,o);var u=e,y=!1,b=t.extend(!0,{},h().validPositions);if(u<P()&&(y=r(u,n,i,o),(!i||o===!0)&&y===!1)){var C=h().validPositions[u];if(!C||null!==C.match.fn||C.match.def!==n&&n!==a.skipOptionalPartCharacter){if((a.insertMode||void 0===h().validPositions[I(u)])&&!T(u,!0)){var F=v(u).match,F=F.placeholder||F.def;r(u,F,i,o);for(var D=u+1,O=I(u);O>=D;D++)if(y=r(D,n,i,o),y!==!1){l(u,D),u=D;break}}}else y={caret:I(u)}}if(y===!1&&a.keepStatic&&(y=s(e,n,i,o)),y===!0&&(y={pos:u}),t.isFunction(a.postValidation)&&y!==!1&&!i&&o!==!0){var j=a.postValidation(x(!0),y,a);if(j){if(j.refreshFromBuffer){var H=j.refreshFromBuffer;$(H===!0?H:H.start,H.end,j.buffer),p(!0),y=j}}else p(!0),h().validPositions=t.extend(!0,{},b),y=!1}return y}function T(t,e){var n;if(e?(n=v(t).match,""==n.def&&(n=y(t))):n=y(t),null!=n.fn)return n.fn;if(e!==!0&&t>-1&&!a.keepStatic&&void 0===h().validPositions[t]){var i=w(t);return i.length>2}return!1}function P(){var t;ht=void 0!==dt?dt.maxLength:void 0,-1===ht&&(ht=void 0);var e,n=f(),i=h().validPositions[n],o=void 0!==i?i.locator.slice():void 0;for(e=n+1;void 0===i||null!==i.match.fn||null===i.match.fn&&""!==i.match.def;e++)i=v(e,o,e-1),o=i.locator.slice();var r=y(e-1);return t=""!==r.def?e:e-1,void 0===ht||ht>t?t:ht}function I(t,e){var n=P();if(t>=n)return n;for(var i=t;++i<n&&(e===!0&&(y(i).newBlockMarker!==!0||!T(i))||e!==!0&&!T(i)&&(a.nojumps!==!0||a.nojumpsThreshold>i)););return i}function F(t,e){var n=t;if(0>=n)return 0;for(;--n>0&&(e===!0&&y(n).newBlockMarker!==!0||e!==!0&&!T(n)););return n}function A(t){return void 0===h().validPositions[t]?L(t):h().validPositions[t].input}function D(e,n,i,o,r){if(o&&t.isFunction(a.onBeforeWrite)){var s=a.onBeforeWrite(o,n,i,a);if(s){if(s.refreshFromBuffer){var l=s.refreshFromBuffer;$(l===!0?l:l.start,l.end,s.buffer||n),n=x(!0)}void 0!==i&&(i=void 0!==s.caret?s.caret:i)}}e.inputmask._valueSet(n.join("")),void 0===i||void 0!==o&&"blur"===o.type||H(e,i),r===!0&&(gt=!0,t(e).trigger("input"))}function L(t,e){if(e=e||y(t),void 0!==e.placeholder)return e.placeholder;if(null===e.fn){if(t>-1&&!a.keepStatic&&void 0===h().validPositions[t]){var n,i=w(t),o=0;if(i.length>2)for(var r=0;r<i.length;r++)if(i[r].match.optionality!==!0&&i[r].match.optionalQuantifier!==!0&&(null===i[r].match.fn||void 0===n||i[r].match.fn.test(n.match.def,h(),t,!0,a)!==!1)&&(o++,null===i[r].match.fn&&(n=i[r]),o>1))return a.placeholder.charAt(t%a.placeholder.length)}return e.def}return a.placeholder.charAt(t%a.placeholder.length)}function O(n,i,o,r){function s(){var t=!1,e=C().slice(d,I(d)).join("").indexOf(c);if(-1!==e&&!T(d)){t=!0;for(var n=C().slice(d,d+e),i=0;i<n.length;i++)if(" "!==n[i]){t=!1;break}}return t}var l=r.slice(),c="",d=0;if(p(),h().p=I(-1),!o)if(a.autoUnmask!==!0){var u=C().slice(0,I(-1)).join(""),m=l.join("").match(new RegExp("^"+e.escapeRegex(u),"g"));m&&m.length>0&&(l.splice(0,m.length*u.length),d=I(d))}else d=I(d);t.each(l,function(e,i){if(void 0!==i){var r=new t.Event("keypress");r.which=i.charCodeAt(0),c+=i;var l=f(void 0,!0),u=h().validPositions[l],p=v(l+1,u?u.locator.slice():void 0,l);if(!s()||o||a.autoUnmask){var m=o?e:null==p.match.fn&&p.match.optionality&&l+1<h().p?l+1:h().p;q.call(n,r,!0,!1,o,m),d=m+1,c=""}else q.call(n,r,!0,!1,!0,l+1)}}),i&&D(n,x(),document.activeElement===n?I(f(0)):void 0,new t.Event("checkval"))}function j(e){if(e&&void 0===e.inputmask)return e.value;var n=[],i=h().validPositions;for(var o in i)i[o].match&&null!=i[o].match.fn&&n.push(i[o].input);var r=0===n.length?null:(ft?n.reverse():n).join("");if(null!==r){var s=(ft?x().slice().reverse():x()).join("");t.isFunction(a.onUnMask)&&(r=a.onUnMask(s,r,a)||r)}return r}function H(t,e,n,i){function o(t){if(i!==!0&&ft&&"number"==typeof t&&(!a.greedy||""!==a.placeholder)){var e=x().join("").length;t=e-t}return t}var r;if("number"!=typeof e)return t.setSelectionRange?(e=t.selectionStart,n=t.selectionEnd):window.getSelection?(r=window.getSelection().getRangeAt(0),(r.commonAncestorContainer.parentNode===t||r.commonAncestorContainer===t)&&(e=r.startOffset,n=r.endOffset)):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),e=0-r.duplicate().moveStart("character",-1e5),n=e+r.text.length),{begin:o(e),end:o(n)};e=o(e),n=o(n),n="number"==typeof n?n:e;var s=parseInt(((t.ownerDocument.defaultView||window).getComputedStyle?(t.ownerDocument.defaultView||window).getComputedStyle(t,null):t.currentStyle).fontSize)*n;if(t.scrollLeft=s>t.scrollWidth?s:0,c||a.insertMode!==!1||e!==n||n++,t.setSelectionRange)t.selectionStart=e,t.selectionEnd=n;else if(window.getSelection){if(r=document.createRange(),void 0===t.firstChild||null===t.firstChild){var l=document.createTextNode("");t.appendChild(l)}r.setStart(t.firstChild,e<t.inputmask._valueGet().length?e:t.inputmask._valueGet().length),r.setEnd(t.firstChild,n<t.inputmask._valueGet().length?n:t.inputmask._valueGet().length),r.collapse(!0);var d=window.getSelection();d.removeAllRanges(),d.addRange(r)}else t.createTextRange&&(r=t.createTextRange(),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",e),r.select())}function N(e){var n,i,o=x(),r=o.length,a=f(),s={},l=h().validPositions[a],c=void 0!==l?l.locator.slice():void 0;for(n=a+1;n<o.length;n++)i=v(n,c,n-1),c=i.locator.slice(),s[n]=t.extend(!0,{},i);var d=l&&void 0!==l.alternation?l.locator[l.alternation]:void 0;for(n=r-1;n>a&&(i=s[n],(i.match.optionality||i.match.optionalQuantifier||d&&(d!==s[n].locator[l.alternation]&&null!=i.match.fn||null===i.match.fn&&i.locator[l.alternation]&&S(i.locator[l.alternation].toString().split(","),d.toString().split(","))&&""!==w(n)[0].def))&&o[n]===L(n,i.match));n--)r--;return e?{l:r,def:s[r]?s[r].match:void 0}:r}function R(t){for(var e=N(),n=t.length-1;n>e&&!T(n);n--);return t.splice(e,n+1-e),t}function z(e){if(t.isFunction(a.isComplete))return a.isComplete(e,a);if("*"===a.repeat)return void 0;var n=!1,i=N(!0),o=F(i.l);if(void 0===i.def||i.def.newBlockMarker||i.def.optionality||i.def.optionalQuantifier){n=!0;for(var r=0;o>=r;r++){var s=v(r).match;if(null!==s.fn&&void 0===h().validPositions[r]&&s.optionality!==!0&&s.optionalQuantifier!==!0||null===s.fn&&e[r]!==L(r,s)){n=!1;break}}}return n}function M(t,e){return ft?t-e>1||t-e===1&&a.insertMode:e-t>1||e-t===1&&a.insertMode}function B(e){function n(e){if(t.valHooks&&(void 0===t.valHooks[e]||t.valHooks[e].inputmaskpatch!==!0)){var n=t.valHooks[e]&&t.valHooks[e].get?t.valHooks[e].get:function(t){return t.value},i=t.valHooks[e]&&t.valHooks[e].set?t.valHooks[e].set:function(t,e){return t.value=e,t};t.valHooks[e]={get:function(t){if(t.inputmask){if(t.inputmask.opts.autoUnmask)return t.inputmask.unmaskedvalue();var e=n(t),i=t.inputmask.maskset,o=i._buffer;return o=o?o.join(""):"",e!==o?e:""}return n(t)},set:function(e,n){var o,r=t(e);return o=i(e,n),e.inputmask&&r.trigger("setvalue"),o},inputmaskpatch:!0}}}function i(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():s.call(this)!==C().join("")?document.activeElement===this&&a.clearMaskOnLostFocus?(ft?R(x().slice()).reverse():R(x().slice())).join(""):s.call(this):"":s.call(this)}function o(e){l.call(this,e),this.inputmask&&t(this).trigger("setvalue")}function r(e){kt.on(e,"mouseenter",function(e){var n=t(this),i=this,o=i.inputmask._valueGet();o!==x().join("")&&f()>0&&n.trigger("setvalue")})}var s,l;e.inputmask.__valueGet||(Object.getOwnPropertyDescriptor&&void 0===e.value?(s=function(){return this.textContent},l=function(t){this.textContent=t},Object.defineProperty(e,"value",{get:i,set:o})):document.__lookupGetter__&&e.__lookupGetter__("value")?(s=e.__lookupGetter__("value"),l=e.__lookupSetter__("value"),e.__defineGetter__("value",i),e.__defineSetter__("value",o)):(s=function(){return e.value},l=function(t){e.value=t},n(e.type),r(e)),e.inputmask.__valueGet=s,e.inputmask._valueGet=function(t){return ft&&t!==!0?s.call(this.el).split("").reverse().join(""):s.call(this.el)},e.inputmask.__valueSet=l,e.inputmask._valueSet=function(t,e){l.call(this.el,null===t||void 0===t?"":e!==!0&&ft?t.split("").reverse().join(""):t)})}function U(n,i,o,r){function s(){if(a.keepStatic){p(!0);var e,i=[],o=t.extend(!0,{},h().validPositions);for(e=f();e>=0;e--){var r=h().validPositions[e];if(r&&(null!=r.match.fn&&i.push(r.input),delete h().validPositions[e],void 0!==r.alternation&&r.locator[r.alternation]===v(e).locator[r.alternation]))break}if(e>-1)for(;i.length>0;){h().p=I(f());var s=new t.Event("keypress");s.which=i.pop().charCodeAt(0),q.call(n,s,!0,!1,!1,h().p)}else h().validPositions=t.extend(!0,{},o)}}if((a.numericInput||ft)&&(i===e.keyCode.BACKSPACE?i=e.keyCode.DELETE:i===e.keyCode.DELETE&&(i=e.keyCode.BACKSPACE),ft)){var l=o.end;o.end=o.begin,o.begin=l}i===e.keyCode.BACKSPACE&&(o.end-o.begin<1||a.insertMode===!1)?(o.begin=F(o.begin),void 0===h().validPositions[o.begin]||h().validPositions[o.begin].input!==a.groupSeparator&&h().validPositions[o.begin].input!==a.radixPoint||o.begin--):i===e.keyCode.DELETE&&o.begin===o.end&&(o.end=T(o.end)?o.end+1:I(o.end)+1,void 0===h().validPositions[o.begin]||h().validPositions[o.begin].input!==a.groupSeparator&&h().validPositions[o.begin].input!==a.radixPoint||o.end++),g(o.begin,o.end,!1,r),r!==!0&&s();var c=f(o.begin);c<o.begin?(-1===c&&p(),h().p=I(c)):r!==!0&&(h().p=o.begin)}function W(i){var o=this,r=t(o),s=i.keyCode,l=H(o);if(s===e.keyCode.BACKSPACE||s===e.keyCode.DELETE||u&&127===s||i.ctrlKey&&88===s&&!n("cut"))i.preventDefault(),88===s&&(lt=x().join("")),U(o,s,l),D(o,x(),h().p,i,lt!==x().join("")),o.inputmask._valueGet()===C().join("")?r.trigger("cleared"):z(x())===!0&&r.trigger("complete"),a.showTooltip&&(o.title=a.tooltip||h().mask);else if(s===e.keyCode.END||s===e.keyCode.PAGE_DOWN){i.preventDefault();var c=I(f());a.insertMode||c!==P()||i.shiftKey||c--,H(o,i.shiftKey?l.begin:c,c,!0)}else s===e.keyCode.HOME&&!i.shiftKey||s===e.keyCode.PAGE_UP?(i.preventDefault(),H(o,0,i.shiftKey?l.begin:0,!0)):(a.undoOnEscape&&s===e.keyCode.ESCAPE||90===s&&i.ctrlKey)&&i.altKey!==!0?(O(o,!0,!1,lt.split("")),r.trigger("click")):s!==e.keyCode.INSERT||i.shiftKey||i.ctrlKey?a.tabThrough===!0&&s===e.keyCode.TAB?(i.shiftKey===!0?(null===y(l.begin).fn&&(l.begin=I(l.begin)),l.end=F(l.begin,!0),l.begin=F(l.end,!0)):(l.begin=I(l.begin,!0),l.end=I(l.begin,!0),l.end<P()&&l.end--),l.begin<P()&&(i.preventDefault(),H(o,l.begin,l.end))):a.insertMode!==!1||i.shiftKey||(s===e.keyCode.RIGHT?setTimeout(function(){var t=H(o);H(o,t.begin)},0):s===e.keyCode.LEFT&&setTimeout(function(){var t=H(o);H(o,ft?t.begin+1:t.begin-1)},0)):(a.insertMode=!a.insertMode,H(o,a.insertMode||l.begin!==P()?l.begin:l.begin-1));a.onKeyDown.call(this,i,x(),H(o).begin,a),vt=-1!==t.inArray(s,a.ignorables)}function q(n,i,o,r,s){var l=this,c=t(l),d=n.which||n.charCode||n.keyCode;if(!(i===!0||n.ctrlKey&&n.altKey)&&(n.ctrlKey||n.metaKey||vt))return d===e.keyCode.ENTER&&lt!==x().join("")&&(lt=x().join(""),setTimeout(function(){c.trigger("change")},0)),!0;if(d){46===d&&n.shiftKey===!1&&","===a.radixPoint&&(d=44);var u,f=i?{begin:s,end:s}:H(l),g=String.fromCharCode(d),v=M(f.begin,f.end);v&&(h().undoPositions=t.extend(!0,{},h().validPositions),U(l,e.keyCode.DELETE,f,!0),f.begin=h().p,a.insertMode||(a.insertMode=!a.insertMode,m(f.begin,r),a.insertMode=!a.insertMode),v=!a.multi),h().writeOutBuffer=!0;var y=ft&&!v?f.end:f.begin,b=E(y,g,r);if(b!==!1){if(b!==!0&&(y=void 0!==b.pos?b.pos:y,g=void 0!==b.c?b.c:g),p(!0),void 0!==b.caret)u=b.caret;else{var k=h().validPositions;u=!a.keepStatic&&(void 0!==k[y+1]&&w(y+1,k[y].locator.slice(),y).length>1||void 0!==k[y].alternation)?y+1:I(y)}h().p=u}if(o!==!1){var C=this;if(setTimeout(function(){a.onKeyValidation.call(C,d,b,a)},0),h().writeOutBuffer&&b!==!1){var _=x();D(l,_,a.numericInput&&void 0===b.caret?F(u):u,n,i!==!0),i!==!0&&setTimeout(function(){z(_)===!0&&c.trigger("complete")},0)}else v&&(h().buffer=void 0,h().validPositions=h().undoPositions)}else v&&(h().buffer=void 0,h().validPositions=h().undoPositions);if(a.showTooltip&&(l.title=a.tooltip||h().mask),i&&t.isFunction(a.onBeforeWrite)){var S=a.onBeforeWrite(n,x(),u,a);if(S&&S.refreshFromBuffer){var T=S.refreshFromBuffer;$(T===!0?T:T.start,T.end,S.buffer),p(!0),S.caret&&(h().p=S.caret)}}if(n.preventDefault(),i)return b}}function V(e){var n=this,i=e.originalEvent||e,o=t(n),r=n.inputmask._valueGet(!0),s=H(n),l=r.substr(0,s.begin),c=r.substr(s.end,r.length);l===C().slice(0,s.begin).join("")&&(l=""),c===C().slice(s.end).join("")&&(c=""),window.clipboardData&&window.clipboardData.getData?r=l+window.clipboardData.getData("Text")+c:i.clipboardData&&i.clipboardData.getData&&(r=l+i.clipboardData.getData("text/plain")+c);var d=r;if(t.isFunction(a.onBeforePaste)){if(d=a.onBeforePaste(r,a),d===!1)return e.preventDefault(),!1;d||(d=r)}return O(n,!1,!1,ft?d.split("").reverse():d.toString().split("")),D(n,x(),void 0,e,!0),o.trigger("click"),z(x())===!0&&o.trigger("complete"),!1}function G(n){var i=this,o=i.inputmask._valueGet();if(x().join("")!==o){var r=H(i);if(o=o.replace(new RegExp("("+e.escapeRegex(C().join(""))+")*"),""),d){var a=o.replace(x().join(""),"");if(1===a.length){var s=new t.Event("keypress");return s.which=a.charCodeAt(0),q.call(i,s,!0,!0,!1,h().validPositions[r.begin-1]?r.begin:r.begin-1),!1}}if(r.begin>o.length&&(H(i,o.length),r=H(i)),x().length-o.length!==1||o.charAt(r.begin)===x()[r.begin]||o.charAt(r.begin+1)===x()[r.begin]||T(r.begin)){for(var l=f()+1,c=x().slice(l).join("");null===o.match(e.escapeRegex(c)+"$");)c=c.slice(1);o=o.replace(c,""),o=o.split(""),O(i,!0,!1,o),z(x())===!0&&t(i).trigger("complete")}else n.keyCode=e.keyCode.BACKSPACE,W.call(i,n);n.preventDefault()}}function K(t){var e=t.originalEvent||t;lt=x().join(""),""===ct||0!==e.data.indexOf(ct)}function Q(e){var n=this,i=e.originalEvent||e,o=x().join("");0===i.data.indexOf(ct)&&(p(),h().p=I(-1));for(var r=i.data,s=0;s<r.length;s++){var l=new t.Event("keypress");l.which=r.charCodeAt(s),mt=!1,vt=!1,q.call(n,l,!0,!1,!1,h().p)}o!==x().join("")&&setTimeout(function(){var t=h().p;D(n,x(),a.numericInput?F(t):t)},0),ct=i.data}function Y(t){}function Z(e){var n=this,i=n.inputmask._valueGet();O(n,!0,!1,(t.isFunction(a.onBeforeMask)?a.onBeforeMask(i,a)||i:i).split("")),lt=x().join(""),(a.clearMaskOnLostFocus||a.clearIncomplete)&&n.inputmask._valueGet()===C().join("")&&n.inputmask._valueSet("")}function J(t){var e=this,n=e.inputmask._valueGet();a.showMaskOnFocus&&(!a.showMaskOnHover||a.showMaskOnHover&&""===n)?e.inputmask._valueGet()!==x().join("")&&D(e,x(),I(f())):yt===!1&&H(e,I(f())),a.positionCaretOnTab===!0&&setTimeout(function(){H(e,I(f()))},0),lt=x().join("")}function X(t){var e=this;if(yt=!1,a.clearMaskOnLostFocus&&document.activeElement!==e){var n=x().slice(),i=e.inputmask._valueGet();i!==e.getAttribute("placeholder")&&""!==i&&(-1===f()&&i===C().join("")?n=[]:R(n),D(e,n))}}function tt(e){function n(e){if(a.radixFocus&&""!==a.radixPoint){var n=h().validPositions;if(void 0===n[e]||n[e].input===L(e)){if(e<I(-1))return!0;var i=t.inArray(a.radixPoint,x());if(-1!==i){for(var o in n)if(o>i&&n[o].input!==L(o))return!1;return!0}}}return!1}var i=this;if(document.activeElement===i){var o=H(i);if(o.begin===o.end)if(n(o.begin))H(i,a.numericInput?I(t.inArray(a.radixPoint,x())):t.inArray(a.radixPoint,x()));else{var r=o.begin,s=f(r),l=I(s);l>r?H(i,T(r)||T(r-1)?r:I(r)):((x()[l]!==L(l)||!T(l,!0)&&y(l).def===L(l))&&(l=I(l)),H(i,l))}}}function et(t){var e=this;setTimeout(function(){H(e,0,I(f()))},0)}function nt(n){var i=this,o=t(i),r=H(i),s=n.originalEvent||n,l=window.clipboardData||s.clipboardData,c=ft?x().slice(r.end,r.begin):x().slice(r.begin,r.end);l.setData("text",ft?c.reverse().join(""):c.join("")),document.execCommand&&document.execCommand("copy"),
U(i,e.keyCode.DELETE,r),D(i,x(),h().p,n,lt!==x().join("")),i.inputmask._valueGet()===C().join("")&&o.trigger("cleared"),a.showTooltip&&(i.title=a.tooltip||h().mask)}function it(e){var n=t(this),i=this;if(i.inputmask){var o=i.inputmask._valueGet(),r=x().slice();lt!==r.join("")&&setTimeout(function(){n.trigger("change"),lt=r.join("")},0),""!==o&&(a.clearMaskOnLostFocus&&(-1===f()&&o===C().join("")?r=[]:R(r)),z(r)===!1&&(setTimeout(function(){n.trigger("incomplete")},0),a.clearIncomplete&&(p(),r=a.clearMaskOnLostFocus?[]:C().slice())),D(i,r,void 0,e))}}function ot(t){var e=this;yt=!0,document.activeElement!==e&&a.showMaskOnHover&&e.inputmask._valueGet()!==x().join("")&&D(e,x())}function rt(t){lt!==x().join("")&&ut.trigger("change"),a.clearMaskOnLostFocus&&-1===f()&&dt.inputmask._valueGet&&dt.inputmask._valueGet()===C().join("")&&dt.inputmask._valueSet(""),a.removeMaskOnSubmit&&(dt.inputmask._valueSet(dt.inputmask.unmaskedvalue(),!0),setTimeout(function(){D(dt,x())},0))}function at(t){setTimeout(function(){ut.trigger("setvalue")},0)}function st(e){if(dt=e,ut=t(dt),a.showTooltip&&(dt.title=a.tooltip||h().mask),("rtl"===dt.dir||a.rightAlign)&&(dt.style.textAlign="right"),("rtl"===dt.dir||a.numericInput)&&(dt.dir="ltr",dt.removeAttribute("dir"),dt.inputmask.isRTL=!0,ft=!0),kt.off(dt),B(dt),i(dt,a)&&(kt.on(dt,"submit",rt),kt.on(dt,"reset",at),kt.on(dt,"mouseenter",ot),kt.on(dt,"blur",it),kt.on(dt,"focus",J),kt.on(dt,"mouseleave",X),kt.on(dt,"click",tt),kt.on(dt,"dblclick",et),kt.on(dt,"paste",V),kt.on(dt,"dragdrop",V),kt.on(dt,"drop",V),kt.on(dt,"cut",nt),kt.on(dt,"complete",a.oncomplete),kt.on(dt,"incomplete",a.onincomplete),kt.on(dt,"cleared",a.oncleared),kt.on(dt,"keydown",W),kt.on(dt,"keypress",q),kt.on(dt,"input",G),c||(kt.on(dt,"compositionstart",K),kt.on(dt,"compositionupdate",Q),kt.on(dt,"compositionend",Y))),kt.on(dt,"setvalue",Z),""!==dt.inputmask._valueGet()||a.clearMaskOnLostFocus===!1){var n=t.isFunction(a.onBeforeMask)?a.onBeforeMask(dt.inputmask._valueGet(),a)||dt.inputmask._valueGet():dt.inputmask._valueGet();O(dt,!0,!1,n.split(""));var o=x().slice();lt=o.join(""),z(o)===!1&&a.clearIncomplete&&p(),a.clearMaskOnLostFocus&&(o.join("")===C().join("")?o=[]:R(o)),D(dt,o),document.activeElement===dt&&H(dt,I(f()))}}var lt,ct,dt,ut,ht,pt,ft=!1,mt=!1,gt=!1,vt=!1,yt=!0,bt=!1,kt={on:function(n,i,o){var r=function(n){if(void 0===this.inputmask&&"FORM"!==this.nodeName){var i=t.data(this,"_inputmask_opts");i?new e(i).mask(this):kt.off(this)}else{if("setvalue"===n.type||!(this.disabled||this.readOnly&&!("keydown"===n.type&&n.ctrlKey&&67===n.keyCode||a.tabThrough===!1&&n.keyCode===e.keyCode.TAB))){switch(n.type){case"input":if(gt===!0||bt===!0)return gt=bt,n.preventDefault();break;case"keydown":mt=!1,gt=!1,bt=!1;break;case"keypress":if(mt===!0)return n.preventDefault();mt=!0;break;case"compositionstart":bt=!0;break;case"compositionupdate":gt=!0;break;case"compositionend":bt=!1;break;case"cut":gt=!0;break;case"click":if(d){var r=this;return setTimeout(function(){o.apply(r,arguments)},0),!1}}return o.apply(this,arguments)}n.preventDefault()}};n.inputmask.events[i]=n.inputmask.events[i]||[],n.inputmask.events[i].push(r),-1!==t.inArray(i,["submit","reset"])?null!=n.form&&t(n.form).on(i,r):t(n).on(i,r)},off:function(e,n){if(e.inputmask&&e.inputmask.events){var i;n?(i=[],i[n]=e.inputmask.events[n]):i=e.inputmask.events,t.each(i,function(n,i){for(;i.length>0;){var o=i.pop();-1!==t.inArray(n,["submit","reset"])?null!=e.form&&t(e.form).off(n,o):t(e).off(n,o)}delete e.inputmask.events[n]})}}};if(void 0!==o)switch(o.action){case"isComplete":return dt=o.el,z(x());case"unmaskedvalue":return dt=o.el,void 0!==dt&&void 0!==dt.inputmask?(r=dt.inputmask.maskset,a=dt.inputmask.opts,ft=dt.inputmask.isRTL):(pt=o.value,a.numericInput&&(ft=!0),pt=(t.isFunction(a.onBeforeMask)?a.onBeforeMask(pt,a)||pt:pt).split(""),O(void 0,!1,!1,ft?pt.reverse():pt),t.isFunction(a.onBeforeWrite)&&a.onBeforeWrite(void 0,x(),0,a)),j(dt);case"mask":dt=o.el,r=dt.inputmask.maskset,a=dt.inputmask.opts,ft=dt.inputmask.isRTL,lt=x().join(""),st(dt);break;case"format":return a.numericInput&&(ft=!0),pt=(t.isFunction(a.onBeforeMask)?a.onBeforeMask(o.value,a)||o.value:o.value).split(""),O(void 0,!1,!1,ft?pt.reverse():pt),t.isFunction(a.onBeforeWrite)&&a.onBeforeWrite(void 0,x(),0,a),o.metadata?{value:ft?x().slice().reverse().join(""):x().join(""),metadata:s({action:"getmetadata"},r,a)}:ft?x().slice().reverse().join(""):x().join("");case"isValid":a.numericInput&&(ft=!0),o.value?(pt=o.value.split(""),O(void 0,!1,!0,ft?pt.reverse():pt)):o.value=x().join("");for(var wt=x(),Ct=N(),xt=wt.length-1;xt>Ct&&!T(xt);xt--);return wt.splice(Ct,xt+1-Ct),z(wt)&&o.value===x().join("");case"getemptymask":return C();case"remove":dt=o.el,ut=t(dt),r=dt.inputmask.maskset,a=dt.inputmask.opts,dt.inputmask._valueSet(j(dt)),kt.off(dt);var $t;Object.getOwnPropertyDescriptor&&($t=Object.getOwnPropertyDescriptor(dt,"value")),$t&&$t.get?dt.inputmask.__valueGet&&Object.defineProperty(dt,"value",{get:dt.inputmask.__valueGet,set:dt.inputmask.__valueSet}):document.__lookupGetter__&&dt.__lookupGetter__("value")&&dt.inputmask.__valueGet&&(dt.__defineGetter__("value",dt.inputmask.__valueGet),dt.__defineSetter__("value",dt.inputmask.__valueSet)),dt.inputmask=void 0;break;case"getmetadata":if(t.isArray(r.metadata)){for(var _t,St=f(),Et=St;Et>=0;Et--)if(h().validPositions[Et]&&void 0!==h().validPositions[Et].alternation){_t=h().validPositions[Et].alternation;break}return void 0!==_t?r.metadata[h().validPositions[St].locator[_t]]:r.metadata[0]}return r.metadata}}e.prototype={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:t.noop,onincomplete:t.noop,oncleared:t.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:t.noop,onBeforeMask:null,onBeforePaste:function(e,n){return t.isFunction(n.onBeforeMask)?n.onBeforeMask(e,n):e},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:t.noop,skipOptionalPartCharacter:" ",showTooltip:!1,tooltip:void 0,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",groupSeparator:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:null,positionCaretOnTab:!1,tabThrough:!1,supportsInputType:["text","tel","password"],definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:null,canClearPosition:t.noop,postValidation:null,staticDefinitionSymbol:void 0,jitMasking:!1},masksCache:{},mask:function(n){var i=this;return"string"==typeof n&&(n=document.getElementById(n)||document.querySelectorAll(n)),n=n.nodeName?[n]:n,t.each(n,function(n,o){var l=t.extend(!0,{},i.opts);r(o,l,t.extend(!0,{},i.userOptions));var c=a(l,i.noMasksCache);void 0!==c&&(void 0!==o.inputmask&&o.inputmask.remove(),o.inputmask=new e,o.inputmask.opts=l,o.inputmask.noMasksCache=i.noMasksCache,o.inputmask.userOptions=t.extend(!0,{},i.userOptions),o.inputmask.el=o,o.inputmask.maskset=c,o.inputmask.isRTL=!1,t.data(o,"_inputmask_opts",l),s({action:"mask",el:o}))}),n&&n[0]?n[0].inputmask||this:this},option:function(e){return"string"==typeof e?this.opts[e]:"object"==typeof e?(t.extend(this.opts,e),t.extend(this.userOptions,e),this.el&&(void 0!==e.mask||void 0!==e.alias?this.mask(this.el):(t.data(this.el,"_inputmask_opts",this.opts),s({action:"mask",el:this.el}))),this):void 0},unmaskedvalue:function(t){return s({action:"unmaskedvalue",el:this.el,value:t},this.el&&this.el.inputmask?this.el.inputmask.maskset:a(this.opts,this.noMasksCache),this.opts)},remove:function(){return this.el?(s({action:"remove",el:this.el}),this.el.inputmask=void 0,this.el):void 0},getemptymask:function(){return s({action:"getemptymask"},this.maskset||a(this.opts,this.noMasksCache),this.opts)},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return s({action:"isComplete",el:this.el},this.maskset||a(this.opts,this.noMasksCache),this.opts)},getmetadata:function(){return s({action:"getmetadata"},this.maskset||a(this.opts,this.noMasksCache),this.opts)},isValid:function(t){return s({action:"isValid",value:t},this.maskset||a(this.opts,this.noMasksCache),this.opts)},format:function(t,e){return s({action:"format",value:t,metadata:e},this.maskset||a(this.opts,this.noMasksCache),this.opts)}},e.extendDefaults=function(n){t.extend(!0,e.prototype.defaults,n)},e.extendDefinitions=function(n){t.extend(!0,e.prototype.defaults.definitions,n)},e.extendAliases=function(n){t.extend(!0,e.prototype.defaults.aliases,n)},e.format=function(t,n,i){return e(n).format(t,i)},e.unmask=function(t,n){return e(n).unmaskedvalue(t)},e.isValid=function(t,n){return e(n).isValid(t)},e.remove=function(e){t.each(e,function(t,e){e.inputmask&&e.inputmask.remove()})},e.escapeRegex=function(t){var e=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return t.replace(new RegExp("(\\"+e.join("|\\")+")","gim"),"\\$1")},e.keyCode={ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91};var l=navigator.userAgent,c=/mobile/i.test(l),d=/iemobile/i.test(l),u=/iphone/i.test(l)&&!d;return/android.*safari.*/i.test(l)&&!d,window.Inputmask=e,e}),/*!
* inputmask.phone.extensions.js
* http://github.com/RobinHerbots/jquery.inputmask
* Copyright (c) 2010 - 2016 Robin Herbots
* Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
* Version: 3.2.7
*/
!function(t){"function"==typeof define&&define.amd?define(["jquery","inputmask"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("./inputmask")):t(window.dependencyLib||jQuery,window.Inputmask)}(function(t,e){return e.extendAliases({phone:{url:"phone-codes/phone-codes.js",countrycode:"",phoneCodeCache:{},mask:function(e){if(void 0===e.phoneCodeCache[e.url]){var n=[];e.definitions["#"]=e.definitions[9],t.ajax({url:e.url,async:!1,type:"get",dataType:"json",success:function(t){n=t},error:function(t,n,i){alert(i+" - "+e.url)}}),e.phoneCodeCache[e.url]=n.sort(function(t,e){return(t.mask||t)<(e.mask||e)?-1:1})}return e.phoneCodeCache[e.url]},keepStatic:!1,nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(t,e){var n=t.replace(/^0{1,2}/,"").replace(/[\s]/g,"");return(n.indexOf(e.countrycode)>1||-1===n.indexOf(e.countrycode))&&(n="+"+e.countrycode+n),n}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),e}),/*!
* jquery.inputmask.js
* http://github.com/RobinHerbots/jquery.inputmask
* Copyright (c) 2010 - 2016 Robin Herbots
* Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
* Version: 3.2.7
*/
!function(t){"function"==typeof define&&define.amd?define(["jquery","inputmask"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("./inputmask")):t(jQuery,window.Inputmask)}(function(t,e){return void 0===t.fn.inputmask&&(t.fn.inputmask=function(n,i){var o,r=this[0];if(i=i||{},"string"==typeof n)switch(n){case"unmaskedvalue":return r&&r.inputmask?r.inputmask.unmaskedvalue():t(r).val();case"remove":return this.each(function(){this.inputmask&&this.inputmask.remove()});case"getemptymask":return r&&r.inputmask?r.inputmask.getemptymask():"";case"hasMaskedValue":return r&&r.inputmask?r.inputmask.hasMaskedValue():!1;case"isComplete":return r&&r.inputmask?r.inputmask.isComplete():!0;case"getmetadata":return r&&r.inputmask?r.inputmask.getmetadata():void 0;case"setvalue":t(r).val(i),r&&void 0!==r.inputmask&&t(r).triggerHandler("setvalue");break;case"option":if("string"!=typeof i)return this.each(function(){return void 0!==this.inputmask?this.inputmask.option(i):void 0});if(r&&void 0!==r.inputmask)return r.inputmask.option(i);break;default:return i.alias=n,o=new e(i),this.each(function(){o.mask(this)})}else{if("object"==typeof n)return o=new e(n),void 0===n.mask&&void 0===n.alias?this.each(function(){return void 0!==this.inputmask?this.inputmask.option(n):void o.mask(this)}):this.each(function(){o.mask(this)});if(void 0===n)return this.each(function(){o=new e(i),o.mask(this)})}}),t.fn.inputmask}),/*!
 * Masonry PACKAGED v4.1.0
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
function(t,e){"use strict";"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(n){e(t,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function n(n,r,s){function l(t,e,i){var o,r="$()."+n+'("'+e+'")';return t.each(function(t,l){var c=s.data(l,n);if(!c)return void a(n+" not initialized. Cannot call methods, i.e. "+r);var d=c[e];if(!d||"_"==e.charAt(0))return void a(r+" is not a valid method");var u=d.apply(c,i);o=void 0===o?u:o}),void 0!==o?o:t}function c(t,e){t.each(function(t,i){var o=s.data(i,n);o?(o.option(e),o._init()):(o=new r(i,e),s.data(i,n,o))})}s=s||e||t.jQuery,s&&(r.prototype.option||(r.prototype.option=function(t){s.isPlainObject(t)&&(this.options=s.extend(!0,this.options,t))}),s.fn[n]=function(t){if("string"==typeof t){var e=o.call(arguments,1);return l(this,t,e)}return c(this,t),this},i(s))}function i(t){!t||t&&t.bridget||(t.bridget=n)}var o=Array.prototype.slice,r=t.console,a="undefined"==typeof r?function(){}:function(t){r.error(t)};return i(e||t.jQuery),n}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}(this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},i=n[t]=n[t]||[];return-1==i.indexOf(e)&&i.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{},i=n[t]=n[t]||{};return i[e]=!0,this}},e.off=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var i=n.indexOf(e);return-1!=i&&n.splice(i,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var i=0,o=n[i];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var a=r&&r[o];a&&(this.off(t,o),delete r[o]),o.apply(this,e),i+=a?0:1,o=n[i]}return this}},t}),/*!
 * getSize v2.0.2
 * measure size of elements
 * MIT license
 */
function(t,e){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),n=-1==t.indexOf("%")&&!isNaN(e);return n&&e}function e(){}function n(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;c>e;e++){var n=l[e];t[n]=0}return t}function i(t){var e=getComputedStyle(t);return e||s("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),e}function o(){if(!d){d=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(e);var o=i(e);r.isBoxSizeOuter=a=200==t(o.width),n.removeChild(e)}}function r(e){if(o(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var r=i(e);if("none"==r.display)return n();var s={};s.width=e.offsetWidth,s.height=e.offsetHeight;for(var d=s.isBorderBox="border-box"==r.boxSizing,u=0;c>u;u++){var h=l[u],p=r[h],f=parseFloat(p);s[h]=isNaN(f)?0:f}var m=s.paddingLeft+s.paddingRight,g=s.paddingTop+s.paddingBottom,v=s.marginLeft+s.marginRight,y=s.marginTop+s.marginBottom,b=s.borderLeftWidth+s.borderRightWidth,k=s.borderTopWidth+s.borderBottomWidth,w=d&&a,C=t(r.width);C!==!1&&(s.width=C+(w?0:m+b));var x=t(r.height);return x!==!1&&(s.height=x+(w?0:g+k)),s.innerWidth=s.width-(m+b),s.innerHeight=s.height-(g+k),s.outerWidth=s.width+v,s.outerHeight=s.height+y,s}}var a,s="undefined"==typeof console?e:function(t){console.error(t)},l=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],c=l.length,d=!1;return r}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],n=0;n<e.length;n++){var i=e[n],o=i+"MatchesSelector";if(t[o])return o}}();return function(e,n){return e[t](n)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(n){return e(t,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var n={};n.extend=function(t,e){for(var n in e)t[n]=e[n];return t},n.modulo=function(t,e){return(t%e+e)%e},n.makeArray=function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e},n.removeFrom=function(t,e){var n=t.indexOf(e);-1!=n&&t.splice(n,1)},n.getParent=function(t,n){for(;t!=document.body;)if(t=t.parentNode,e(t,n))return t},n.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},n.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.filterFindElements=function(t,i){t=n.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!i)return void o.push(t);e(t,i)&&o.push(t);for(var n=t.querySelectorAll(i),r=0;r<n.length;r++)o.push(n[r])}}),o},n.debounceMethod=function(t,e,n){var i=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];t&&clearTimeout(t);var e=arguments,r=this;this[o]=setTimeout(function(){i.apply(r,e),delete r[o]},n||100)}},n.docReady=function(t){"complete"==document.readyState?t():document.addEventListener("DOMContentLoaded",t)},n.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,n){return e+"-"+n}).toLowerCase()};var i=t.console;return n.htmlInit=function(e,o){n.docReady(function(){var r=n.toDashed(o),a="data-"+r,s=document.querySelectorAll("["+a+"]"),l=document.querySelectorAll(".js-"+r),c=n.makeArray(s).concat(n.makeArray(l)),d=a+"-options",u=t.jQuery;c.forEach(function(t){var n,r=t.getAttribute(a)||t.getAttribute(d);try{n=r&&JSON.parse(r)}catch(s){return void(i&&i.error("Error parsing "+a+" on "+t.className+": "+s))}var l=new e(t,n);u&&u.data(t,o,l)})})},n}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";function n(t){for(var e in t)return!1;return e=null,!0}function i(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function o(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var r=document.documentElement.style,a="string"==typeof r.transition?"transition":"WebkitTransition",s="string"==typeof r.transform?"transform":"WebkitTransform",l={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[a],c={transform:s,transition:a,transitionDuration:a+"Duration",transitionProperty:a+"Property",transitionDelay:a+"Delay"},d=i.prototype=Object.create(t.prototype);d.constructor=i,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},d.getSize=function(){this.size=e(this.element)},d.css=function(t){var e=this.element.style;for(var n in t){var i=c[n]||n;e[i]=t[n]}},d.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),i=t[e?"left":"right"],o=t[n?"top":"bottom"],r=this.layout.size,a=-1!=i.indexOf("%")?parseFloat(i)/100*r.width:parseInt(i,10),s=-1!=o.indexOf("%")?parseFloat(o)/100*r.height:parseInt(o,10);a=isNaN(a)?0:a,s=isNaN(s)?0:s,a-=e?r.paddingLeft:r.paddingRight,s-=n?r.paddingTop:r.paddingBottom,this.position.x=a,this.position.y=s},d.layoutPosition=function(){var t=this.layout.size,e={},n=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),o=n?"paddingLeft":"paddingRight",r=n?"left":"right",a=n?"right":"left",s=this.position.x+t[o];e[r]=this.getXValue(s),e[a]="";var l=i?"paddingTop":"paddingBottom",c=i?"top":"bottom",d=i?"bottom":"top",u=this.position.y+t[l];e[c]=this.getYValue(u),e[d]="",this.css(e),this.emitEvent("layout",[this])},d.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},d.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},d._transitionTo=function(t,e){this.getPosition();var n=this.position.x,i=this.position.y,o=parseInt(t,10),r=parseInt(e,10),a=o===this.position.x&&r===this.position.y;if(this.setPosition(t,e),a&&!this.isTransitioning)return void this.layoutPosition();var s=t-n,l=e-i,c={};c.transform=this.getTranslate(s,l),this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},d.getTranslate=function(t,e){var n=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop");return t=n?t:-t,e=i?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},d.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},d._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},d.transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var n in t.onTransitionEnd)e.onEnd[n]=t.onTransitionEnd[n];for(n in t.to)e.ingProperties[n]=!0,t.isCleaning&&(e.clean[n]=!0);if(t.from){this.css(t.from);var i=this.element.offsetHeight;i=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var u="opacity,"+o(s);d.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:u,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(l,this,!1)}},d.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},d.onotransitionend=function(t){this.ontransitionend(t)};var h={"-webkit-transform":"transform"};d.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,i=h[t.propertyName]||t.propertyName;if(delete e.ingProperties[i],n(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd){var o=e.onEnd[i];o.call(this),delete e.onEnd[i]}this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(l,this,!1),this.isTransitioning=!1},d._removeStyles=function(t){var e={};for(var n in t)e[n]="";this.css(e)};var p={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(p)},d.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){return a&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},d.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},n=this.getHideRevealTransitionEndProperty("visibleStyle");e[n]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var n in e)return n},d.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},n=this.getHideRevealTransitionEndProperty("hiddenStyle");e[n]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},i}),/*!
 * Outlayer v2.1.0
 * the brains and guts of a layout library
 * MIT license
 */
function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(n,i,o,r){return e(t,n,i,o,r)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,n,i,o){"use strict";function r(t,e){var n=i.getQueryElement(t);if(!n)return void(l&&l.error("Bad element for "+this.constructor.namespace+": "+(n||t)));this.element=n,c&&(this.$element=c(this.element)),this.options=i.extend({},this.constructor.defaults),this.option(e);var o=++u;this.element.outlayerGUID=o,h[o]=this,this._create();var r=this._getOption("initLayout");r&&this.layout()}function a(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function s(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),n=e&&e[1],i=e&&e[2];if(!n.length)return 0;n=parseFloat(n);var o=f[i]||1;return n*o}var l=t.console,c=t.jQuery,d=function(){},u=0,h={};r.namespace="outlayer",r.Item=o,r.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var p=r.prototype;i.extend(p,e.prototype),p.option=function(t){i.extend(this.options,t)},p._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},r.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},p._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),i.extend(this.element.style,this.options.containerStyle);var t=this._getOption("resize");t&&this.bindResize()},p.reloadItems=function(){this.items=this._itemize(this.element.children)},p._itemize=function(t){for(var e=this._filterFindItemElements(t),n=this.constructor.Item,i=[],o=0;o<e.length;o++){var r=e[o],a=new n(r,this);i.push(a)}return i},p._filterFindItemElements=function(t){return i.filterFindElements(t,this.options.itemSelector)},p.getItemElements=function(){return this.items.map(function(t){return t.element})},p.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},p._init=p.layout,p._resetLayout=function(){this.getSize()},p.getSize=function(){this.size=n(this.element)},p._getMeasurement=function(t,e){var i,o=this.options[t];o?("string"==typeof o?i=this.element.querySelector(o):o instanceof HTMLElement&&(i=o),this[t]=i?n(i)[e]:o):this[t]=0},p.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},p._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},p._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var n=[];t.forEach(function(t){var i=this._getItemLayoutPosition(t);i.item=t,i.isInstant=e||t.isLayoutInstant,n.push(i)},this),this._processLayoutQueue(n)}},p._getItemLayoutPosition=function(){return{x:0,y:0}},p._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},p.updateStagger=function(){var t=this.options.stagger;return null===t||void 0===t?void(this.stagger=0):(this.stagger=s(t),this.stagger)},p._positionItem=function(t,e,n,i,o){i?t.goTo(e,n):(t.stagger(o*this.stagger),t.moveTo(e,n))},p._postLayout=function(){this.resizeContainer()},p.resizeContainer=function(){var t=this._getOption("resizeContainer");if(t){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},p._getContainerSize=d,p._setContainerMeasure=function(t,e){if(void 0!==t){var n=this.size;n.isBorderBox&&(t+=e?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},p._emitCompleteOnItems=function(t,e){function n(){o.dispatchEvent(t+"Complete",null,[e])}function i(){a++,a==r&&n()}var o=this,r=e.length;if(!e||!r)return void n();var a=0;e.forEach(function(e){e.once(t,i)})},p.dispatchEvent=function(t,e,n){var i=e?[e].concat(n):n;if(this.emitEvent(t,i),c)if(this.$element=this.$element||c(this.element),e){var o=c.Event(e);o.type=t,this.$element.trigger(o,n)}else this.$element.trigger(t,n)},p.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},p.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},p.stamp=function(t){t=this._find(t),t&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},p.unstamp=function(t){t=this._find(t),t&&t.forEach(function(t){i.removeFrom(this.stamps,t),this.unignore(t)},this)},p._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=i.makeArray(t)):void 0},p._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},p._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},p._manageStamp=d,p._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,o=n(t),r={left:e.left-i.left-o.marginLeft,top:e.top-i.top-o.marginTop,right:i.right-e.right-o.marginRight,bottom:i.bottom-e.bottom-o.marginBottom};return r},p.handleEvent=i.handleEvent,p.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},p.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},p.onresize=function(){this.resize()},i.debounceMethod(r,"onresize",100),p.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},p.needsResizeLayout=function(){var t=n(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},p.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},p.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},p.prepended=function(t){var e=this._itemize(t);if(e.length){var n=this.items.slice(0);this.items=e.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(n)}},p.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,n){t.stagger(n*e),t.reveal()})}},p.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,n){t.stagger(n*e),t.hide()})}},p.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},p.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},p.getItem=function(t){for(var e=0;e<this.items.length;e++){var n=this.items[e];if(n.element==t)return n}},p.getItems=function(t){t=i.makeArray(t);var e=[];return t.forEach(function(t){var n=this.getItem(t);n&&e.push(n)},this),e},p.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),i.removeFrom(this.items,t)},this)},p.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete h[e],delete this.element.outlayerGUID,c&&c.removeData(this.element,this.constructor.namespace)},r.data=function(t){t=i.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&h[e]},r.create=function(t,e){var n=a(r);return n.defaults=i.extend({},r.defaults),i.extend(n.defaults,e),n.compatOptions=i.extend({},r.compatOptions),n.namespace=t,n.data=r.data,n.Item=a(o),i.htmlInit(n,t),c&&c.bridget&&c.bridget(t,n),n};var f={ms:1,s:1e3};return r.Item=o,r}),/*!
 * Masonry v4.1.0
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,e){var n=t.create("masonry");return n.compatOptions.fitWidth="isFitWidth",n.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0},n.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],n=t&&t.element;this.columnWidth=n&&e(n).outerWidth||this.containerWidth}var i=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,r=o/i,a=i-o%i,s=a&&1>a?"round":"floor";r=Math[s](r),this.cols=Math.max(r,1)},n.prototype.getContainerWidth=function(){var t=this._getOption("fitWidth"),n=t?this.element.parentNode:this.element,i=e(n);this.containerWidth=i&&i.innerWidth},n.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,n=e&&1>e?"round":"ceil",i=Math[n](t.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var o=this._getColGroup(i),r=Math.min.apply(Math,o),a=o.indexOf(r),s={x:this.columnWidth*a,y:r},l=r+t.size.outerHeight,c=this.cols+1-o.length,d=0;c>d;d++)this.colYs[a+d]=l;return s},n.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],n=this.cols+1-t,i=0;n>i;i++){var o=this.colYs.slice(i,i+t);e[i]=Math.max.apply(Math,o)}return e},n.prototype._manageStamp=function(t){var n=e(t),i=this._getElementOffset(t),o=this._getOption("originLeft"),r=o?i.left:i.right,a=r+n.outerWidth,s=Math.floor(r/this.columnWidth);s=Math.max(0,s);var l=Math.floor(a/this.columnWidth);l-=a%this.columnWidth?0:1,l=Math.min(this.cols-1,l);for(var c=this._getOption("originTop"),d=(c?i.top:i.bottom)+n.outerHeight,u=s;l>=u;u++)this.colYs[u]=Math.max(d,this.colYs[u])},n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},n.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},n});var VIDEO_LIB={loadThumbnail:function(){var t=$(".video-thumb-container"),e=t.data("provider"),n=t.data("video-id"),i=t.data("video-url"),o="",r="";"youtube"===e?(o="/?autoplay=1&enablejsapi=1&controls=0&iv_load_policy=3&showinfo=0&rel=0",r="//i1.ytimg.com/vi/"+n+"/hqdefault.jpg",t.append("<div><img class='video-thumb' src='"+r+"'></div>"),t.find("img").one("load",function(){$(this).after("<div class='play-button'><i class='fa fa-2x fa-inverse fa-play'></i></div>")})):"vimeo"===e&&(o="/?autoplay=1",$.getJSON("//vimeo.com/api/oembed.json?url=https%3A//vimeo.com/"+n+".json",function(e,n){r=e.thumbnail_url_with_play_button,t.append("<div><img class='video-thumb' src='"+r+"'></div>")})),t.on("click","img, .play-button",function(t){var n=$("#story-video-modal"),r=n.find("iframe")[0].contentWindow,a=function(){"youtube"===e?r.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"):"vimeo"===e&&r.postMessage('{"method":"pause"}',"*")};$(document).width()<600?(t.stopPropagation(),$(this).parent().replaceWith($("<iframe src='"+i+o+"'frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>"))):(r.location.replace(i+o),n.find("button.close").on("click",function(){a()}),n.one("hide.bs.modal",function(){a()}),n.one("hidden.bs.modal",function(){r.location.replace("")}))})}},BIP=BIP||{listeners:function(){var t="Video URL (YouTube, Vimeo, or Wistia)";$(".best_in_place[data-bip-attribute='embed_url']").on("ajax:success",function(e,n){var i=JSON.parse(n).embed_url,o=null;i?i.includes("youtube")?o="<iframe id='youtube-iframe' width='320' height='180' src='"+i+"?autohide=2&&enablejsapi=1&controls=0&showinfo=0&iv_load_policy=3&rel=0'frameborder='0'></iframe>":i.includes("vimeo")?o="<iframe id='vimeo-iframe' width='320' height='180' src='"+i+"' frameborder='0'></iframe>":i.includes("wistia")&&("undefined"==typeof Wistia&&($.getScript(i),$.getScript("//fast.wistia.com/assets/external/E-v1.js")),o="<div class='wistia_embed wistia_async_"+i.match(/\/(\w+)($|\.\w+$)/)[1]+"' style='width:320px;height:180px'>&nbsp;</div>"):o=$("<img src='"+$(".video-container").data("placeholder")+"'>"),$(".video-container").empty().append(o),$(".best_in_place[data-bip-attribute='embed_url']").text(i||t)}),$(document).on("best_in_place:error",function(t,e,n,i){var o=JSON.parse(e.responseText);flashDisplay(o.join(", "),"danger")}),$("a.accordion-toggle").on("focus",function(){var t=$(this);window.setTimeout(function(){t.blur()},200)})}};$(document).ready(function(){ready()}),$(window).on("load",function(){initMasonry()});