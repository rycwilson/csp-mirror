
// js response only needed for removed ads; all others are json
(function () {

  var storyId = '<%= @story.id %>',
      dt = $('#promoted-stories-table').DataTable(),
      toggleSubmitButton = function () {
        $('#story-settings-form button[type="submit"]').find('span, .fa-spin').toggle();
      },
      flashCallback = function () {
        $('input.bs-switch').bootstrapSwitch('disabled', false);
        $('#story-settings-form').data('submitted', '');
      };

  toggleSubmitButton();

  if ('<%= notice() %>') {
    flashDisplay('<%= notice() %>', 'success', flashCallback)
  } else if ('<%= alert() %>') {
    flashDisplay('<%= alert() %>', 'danger', flashCallback)
  }

  dt.row('[data-story-id="' + storyId + '"]')
    .remove()
    .draw();

}());