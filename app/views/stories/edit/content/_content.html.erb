
<%= form_for(story, url: story_path(story.id),
      html: { id: 'story-content-form', method: :put, remote: true }) do |story_form| %>

  <%= hidden_field_tag('story[form]', 'content') %>

  <div class="row">

    <div class="col-lg-6" style='margin-bottom:10px'>

      <div class="form-group" style='margin-bottom:23px'>
        <%= story_form.label(:quote, 'Customer Testimonial') %>
        <%= story_form.text_area(:quote, rows: 6, class: 'form-control', placeholder: 'Add a quote from a happy customer...') %>
      </div>

      <div class="form-group" style='margin-bottom:23px'>
        <%= story_form.label(:quote_attr_name, 'Customer Name') %>
        <%= story_form.text_field(:quote_attr_name, class: 'form-control') %>
      </div>

      <div class="form-group">
        <%= story_form.label(:quote_attr_title, 'Customer Position') %>
        <%= story_form.text_field(:quote_attr_title, class: 'form-control') %>
      </div>

    </div>

    <div class="col-lg-6">

      <%= render 'stories/edit/content/video', { story: story, story_form: story_form } %>

    </div>

  </div>

  <div class="row" style='margin-bottom: 35px'>

    <div class="col-sm-6">

      <label>Contributions</label>&nbsp;&nbsp;
      <i class='contributions-info fa fa-info-circle' data-toggle='tooltip' title='Contributions are not published. They are provided here for your reference.'></i>

   <!--    <a href="#contributions-carousel" class='pull-right' data-toggle='collapse'>
        <span>Show</span><span style='display:none'>Hide</span>
      </a> -->

      <div id='contributions-carousel' class="carousel slide" data-ride='carousel' data-interval='false'>

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">

          <% story.contributions.each_with_index do |contribution, index| %>

            <!-- the image is necessary; its size dicatates size of the carousel -->
            <div class="item <%= index == 0 ? 'active' : '' %>">
              <img src="//s3-us-west-1.amazonaws.com/csp-development-assets/carousel_background2.png" alt="...">

              <div class="contributor-name">
                <p><%= contribution.contributor.full_name %></p>
              </div>

              <div class="contribution-content">
                <p><%= contribution.contribution %></p>
              </div>

            </div>

          <% end %>

          <!-- Controls -->
          <a class="left carousel-control" href="#contributions-carousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="right carousel-control" href="#contributions-carousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>

          </a>

          <ol class="carousel-indicators">

            <% story.contributions.each_with_index do |contribution, index|%>

              <li data-target="#contributions-carousel" class="<%= index == 0 ? 'active' : '' %>" data-slide-to="<%= index %>"></li>

            <% end %>

          </ol>

        </div>
      </div>

    </div>

    <div class="col-sm-6">

      <label for="story_summary">Summary</label>
      <%= story_form.text_area(:summary, class: 'form-control') %>

    </div>

  </div>

  <div class="row">

    <div class="col-lg-8">

      <div class="form-group">
        <%= story_form.label(:content, 'Main Content') %>
        <%= story_form.text_area(:content, id: 'story-content-editor',
                data: { provider: 'summernote' }) %>
      </div>

    </div>

    <div class="success-results col-lg-4">

      <%= render 'stories/edit/content/results', { story: story, story_form: story_form } %>

    </div>

  </div>

  <hr>

  <div class="row">
    <div class="col-sm-12 text-right">
      <div class="form-group">

        <button type="reset" class="btn btn-default">Cancel</button>
        <button type="submit" class="btn btn-success text-center" style='width: 114px'>
          <span>Save changes</span>
          <i class='fa fa-spinner fa-pulse' style='display:none'></i>
          <i class='fa fa-check' style='display:none'></i>
        </button>

      </div>
    </div>
  </div>

<% end %>


