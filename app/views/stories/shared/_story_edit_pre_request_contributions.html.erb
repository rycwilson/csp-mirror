<!-- pre-request contributors -->
<div class="tab-pane fade in active" id="pre-request">

  <div class="heading-block" style="position:relative">
    <h4 style="display:inline-block">Contributors Awaiting Request</h4><br><br><!-- &nbsp;&nbsp; -->
    <button type="button" id="new-contributor-button"
        class="btn btn-secondary btn-sm"
        data-toggle="modal" data-target="#new-contributor-modal">
      Add Contributor
    </button>
    <!-- <span class='glyphicon glyphicon-plus bip-clickable'
       style="position:absolute; top:-5px; left:230px"
       id="new-contributor-button" data-toggle="modal"
       data-target="#new-contributor-modal"></span> -->
  </div>

  <div id='pre-request-contributors'>

    <% @contributions.order(created_at: :desc)
                     .select { |c| c.status == 'pre_request' }
                     .each_with_index do |contribution, index| %>

      <div class="well pre-request-contribution" data-contribution-id="<%= contribution.id %>">

        <div class="row">
          <div class='col-sm-12'>
            <%= contribution.contributor.full_name %> <br>
            <%= contribution.contributor.email %>
          </div>
        </div> <br>

        <div class="row">
          <div class="accordion" id="pre-request-info-<%= index %>">
            <div class="accordion-group">

              <div class="col-sm-6">
                <div class="accordion-heading">

                  <a class="accordion-toggle" data-toggle="collapse"
                     data-parent="#pre-request-info-<%= index %>"
                     href="#collapse-pre-request-info-<%= index %>" tabindex='-1'>
                    <span class='glyphicon glyphicon-info-sign bip-clickable'></span>
                  </a>

                </div>
              </div>

              <div class="col-sm-6 text-right">
                <%= button_to 'Send Request',
                request_contribution_path(contribution),
                class: 'btn btn-sm btn-default', id: 'send-request-button',
                method: 'put', remote: true, tabindex:'-1' %>
              </div> <br><br>

              <div class="col-sm-12">
                <div id="collapse-pre-request-info-<%= index %>"
                    class="accordion-body collapse">
                  <div class="accordion-inner">

                    <hr style='margin-top:7px; margin-bottom:7px'>

                    Role:&nbsp;&nbsp;<%= contribution.role %> <br style='line-height:20px'>
                    Referred by:&nbsp;&nbsp;<%= contribution.referrer_id.present? ? contribution.referrer.full_name : "N/A" %> <br style='line-height:20px'>
                    Added:&nbsp;&nbsp;<%= contribution.created_at.strftime('%-m/%-d/%Y') %> <br style='line-height:20px'>
                    Notes: <br style='line-height:20px'>

                    <div class="row" style='padding-bottom:8px'>

                      <div id='edit-pr-contribution-notes-<%= index %>'
                          class='col-sm-2 text-center pull-right'
                          style='padding:0; margin-top:-6px'>
                        <span class='glyphicon glyphicon-pencil bip-clickable'></span>
                      </div>

                      <div id='pr-contribution-notes-<%= index %>' class='col-sm-10'
                          style='padding-right:0'>
                        <%= best_in_place contribution, :notes, as: :textarea,
                                  url: "/contributions/#{contribution.access_token}",
                           html_attrs: { style:'width:100%' },
                            activator: "#edit-pr-contribution-notes-#{index}",
                         place_holder: "<i>add notes ...</i>" %>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
            </div>  <!-- accordian-group -->
          </div>  <!-- accordian -->
        </div>

      </div>

    <% end %>

  </div>
</div>