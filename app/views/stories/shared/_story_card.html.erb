
<% cache("#{company.subdomain}/story-#{story.id}-card" +
         "memcache-iterator-#{company.story_tile_fragments_memcache_iterator}",
         skip_digest: true) do %>

  <li class="grid-item" data-story-id="<%= story.id %>">

    <a href="<%= story.published ? story.csp_story_path : 'javascript:;' %>"
       class="thumbnail public <%= story.published ? 'published' : (story.preview_published ? 'preview-published' : 'logo-published') %> <%= story.title.present? ? 'title-present' : '' %>"
       data-customer="<%= story.customer.name.to_json %>"
       data-logosrc="<%= story.customer.logo_url %>"
       data-summary="<%= story.summary.try(:to_json) %>"
       data-quote="<%= story.quote.try(:to_json) %>"
       data-quote-attr-name="<%= story.quote_attr_name.try(:to_json) %>"
       data-quote-attr-title="<%= story.quote_attr_title.try(:to_json) %>"
       data-preview-contributor="<%= story.preview_contributor %>">

      <div class="thumbnail-view">
        <% if story.title.present? %>
          <div class='thumbnail-view-hover'>
            <p><%= story.title %></p>
          </div>
        <% end %>
        <img src="<%= story.customer.logo_url || LOGO_PLACEHOLDER_URL %>">
      </div>

      <div class="caption">
        <span><%= story.customer.name %></span>
        <% if story.published? || story.preview_published? %>
          <span><%= story.published? ? 'Read Story' : 'See More' %></span>
        <% end %>
      </div>

      <div class='still-loading-container'>
        <i class='fa fa-spin fa-circle-o-notch'></i>
      </div>

    </a>

  </li>

<% end %>