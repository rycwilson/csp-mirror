(function () {

  var flashMesg = <%= raw flash[:danger].to_json %>;

  flashDisplay(flashMesg);

})();

function flashDisplay (mesg) {

    $('#flash').toggleClass('hidden alert-danger').append(mesg);
    // another way:
    $('#flash').hide().append(flash).fadeIn('fast');


    setTimeout(function () {
      $('#flash').slideUp();
      // $('#send_contribution_request').parent()[0].reset()
    }, 4000);

    setTimeout(function () {
      $('#flash').toggleClass('hidden alert-danger')
      // dispay:none setting appears after first click-cycle,
      // leads to subsequent failures
      // solution...
      $('#flash').css('display', '');
      // remove all text, leave child elements
      $('#flash').html($('#flash').children());
    }, 5000);
  }