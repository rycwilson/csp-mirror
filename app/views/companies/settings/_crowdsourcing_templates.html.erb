
<%#= form_tag "/", method: :put, remote: true,
      class: 'form-horizontal', id: 'email-templates-form' do %>

<!--   <div class="form-group">
    <%#= label_tag "Template", nil, class: "control-label col-sm-2" %>
    <div class="col-sm-8">
      <%#= select_tag "template[name]",
            options_for_select(templates_select),
           { class: 'templates-select form-control', style: 'width:100%' } %>
    </div>
    <div class="col-sm-2 btn-group" id="restore-dropdown">
      <button type="button" class="btn btn-default dropdown-toggle"
          data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="false">
        Defaults <span class="caret"></span>
      </button>
      <ul class="dropdown-menu">
        <li>
          <a id='restore-all-templates' href="javascript:;">Restore all templates</a>
        </li>
        <li class='disabled'>
          <a id='restore-current-template' href="javascript:;">Restore this template</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="form-group">
    <%#= label_tag "template[subject]", "Subject", class: "control-label col-sm-2" %>
    <div class="col-sm-8">
      <div class="input-group">
        <%#= text_field_tag "template[subject]", nil, class: 'form-control' %>
        <div class="input-group-btn">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Insert&nbsp;&nbsp;<span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li><a href="#">Company name</a></li>
              <li><a href="#">Customer name</a></li>
              <li><a href="#">Contributor first name</a></li>
              <li><a href="#">Contributor last name</a></li>
            </ul>
        </div>
      </div>
    </div>
    <div class="col-sm-2">
      <button id='test-template' type='button' class='btn btn-default' disabled='true'>
        Test
      </button>
    </div>
  </div>

  <div class="form-group">
    <%#= label_tag "Body", nil, class: "control-label col-sm-2" %>
    <div class="col-sm-8">
      <%#= text_area_tag "template[body]", nil, data: { provider: 'summernote'},
              id: 'email-template-editor', class: 'form-control' %>
    </div>
    <div class="col-sm-2">
      <%#= submit_tag "Save changes", class: "btn btn-success",
            id: 'save-template', disabled: true %> <br><br>
      <button id='cancel-template' type='button' class='btn btn-default' disabled='true'>
        Cancel
      </button>

    </div>
  </div> -->

<%# end %>

<div class="row">
  <div class="form-horizontal" style=''>

    <label for='template_name' class='control-label col-sm-1'>
      Template
    </label>
    <div class="col-sm-6">
      <%= select_tag("template[name]",
            grouped_options_for_select(
              company.crowdsourcing_templates.grouped_select_options
            ), {
              include_blank: true,
              class: 'templates-select form-control', style: 'width:100%'
            }) %>
    </div>

    <div class="col-sm-2 btn-group" id="template-actions-dropdown">
      <button type="button" class="btn btn-secondary dropdown-toggle" style='width:100%'
          data-toggle="dropdown" aria-haspopup="true"aria-expanded="false">
        Actions&nbsp;&nbsp;<span class="caret"></span>
      </button>
      <ul class="dropdown-menu">
        <li>
          <a class='new-template-blank' href='javascript:;'>
            New blank template</a>
        </li>
        <li class='disabled'>
          <a class='new-template-copy' href='javascript:;'>
            Copy selected template</a>
        </li>
        <li class='disabled'>
          <a class='test-template' href='javascript:;'>
            Test selected template</a>
        <li>
          <a class='restore-all' href="javascript:;">
            Restore all default templates</a>
        </li>
        <li class='disabled'>
          <a class='restore-current' href="javascript:;">
            Restore selected default template</a>
        </li>
      </ul>
    </div>
    <div class="col-sm-3">
      <!-- filler -->
    </div>

  </div>
</div>

<!-- <div class="row">
  <div class="form-horizontal">

  </div>
</div> -->

<div id='crowdsourcing-template-container'>
</div>

<% content_for(:underscore_templates) do %>

  <script type='text/template' id='contributor-questions-template'>

    {{ _.each(contributorQuestions, function (question, index) { }}

      <li class="contributor-question">

        <div class="row">

          <div class='col-sm-11'>
            <p>{{= question.question }}</p>
          </div>

          <div class="col-sm-1">
            <i class='remove-question fa fa-remove'></i>
            <input name="crowdsourcing_template[contributor_questions_attributes][{{= index }}][_destroy]" type="hidden" value="false">
            <input class="hidden" type="checkbox" value="true" name="crowdsourcing_template[contributor_questions_attributes][{{= index }}][_destroy]" id="crowdsourcing_template_contributor_questions_attributes_{{= index }}__destroy">
          </div>

        </div>

        <div class='row'>
          <div class="col-sm-12 save-or-cancel text-center hidden">
            <span>Save changes to remove Question, or <a class='cancel'>Cancel</a></span>
          </div>
        </div>

      </li>

      <input type="hidden" value="{{= question.id }}" name="crowdsourcing_template[contributor_questions_attributes][{{= index }}][id]" id="crowdsourcing_template_contributor_questions_attributes_{{= index }}_id">
      <input type="hidden" value="{{= company.id }}" name="crowdsourcing_template[contributor_questions_attributes][{{= index }}][company_id]" id="crowdsourcing_template_contributor_questions_attributes_{{= index }}_company_id">

    {{ }) }}

  </script>

  <script type="text/template" id='new-contributor-question-template'>

    <li class="contributor-question new-question">

      <div class='row'>
        <div class='col-sm-12'>

          <input type="hidden" value="{{= company.id }}" name="crowdsourcing_template[contributor_questions_attributes][{{= index }}][company_id]" id="crowdsourcing_template_contributor_questions_attributes_{{= index }}_company_id">

          {{ if (existingQuestion) { }}

            <p>{{= existingQuestion.question }}</p>

            <input type="hidden" value="{{= existingQuestion.id }}" name="crowdsourcing_template[contributor_questions_attributes][{{= index }}][id]" id="crowdsourcing_template_contributor_questions_attributes_{{= index }}_id">

          {{ } else { }}

            <textarea class="form-control" rows="3" placeholder="New question" name="crowdsourcing_template[contributor_questions_attributes][{{= index }}][question]" id="crowdsourcing_template_contributor_questions_attributes_{{= index }}_question"></textarea>

          {{ } }}

          <div class='save-or-cancel text-center'>
            <span>Save changes to add Question, or <a class='cancel'>Cancel</a></span>
          </div>

        </div>
      </div>

    </li>

  </script>

<% end %>


