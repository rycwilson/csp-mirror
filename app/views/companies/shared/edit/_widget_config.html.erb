
<div class="row">
  <div class="col-sm-6">

    <%= form_for widget_config, url: widget_config_company_path(company),
          method: :put, remote: true do |f| %>

      <div class="form-group">
        <div class="row color-picker">
          <div class="col-sm-6">
            <%= f.label :tab_color, 'Tab color', class: 'control-label' %>
            <%= f.text_field :tab_color, class: 'form-control mini-colors' %>
          </div>
          <div class="col-sm-6">
            <%= f.label :text_color, 'Text color', class: 'control-label' %>
            <%= f.text_field :text_color, class: 'form-control mini-colors' %>
          </div>
        </div>
      </div>

      <div class="form-group row">
        <div class="col-sm-3">
          <label>Tab size</label>
        </div>
        <div class='btn-group col-sm-9 text-right' data-toggle="buttons">
          <%= f.label :tab_size, class: 'radio-inline' do %>
            <%= f.radio_button :tab_size, 'small' %>
            Small
          <% end %>
          <%= f.label :tab_size, class: 'radio-inline' do %>
            <%= f.radio_button :tab_size, 'large' %>
            Large
          <% end %>
        </div>
      </div>

      <div class="form-group">
        <!-- <label for="">Delay (milliseconds)</label> -->
        <div class="row" style='display:flex;align-items:center'>
          <div class="col-sm-6">
            <%= f.label :delay, 'Show tab after (milliseconds)' %>
          </div>
          <div class="col-sm-6">
            <div class="input-group spinner">
              <%= f.text_field :delay, min: '0', class: 'form-control' %>
              <div class="input-group-btn-vertical">
                <button class="btn btn-default" type="button"><i class="fa fa-caret-up"></i></button>
                <button class="btn btn-default" type="button"><i class="fa fa-caret-down"></i></button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="row">
          <div class="col-sm-6">
            <label>Open automatically</label>
          </div>
          <div class='col-sm-6 btn-group text-right' data-toggle="buttons">
              <%= f.label :show, class: 'radio-inline' do %>
                <%= f.radio_button :show, true %>
                Yes
              <% end %>
              <%= f.label :show, class: 'radio-inline' do %>
                <%= f.radio_button :show, false %>
                No
              <% end %>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <label>Close automatically</label>
          </div>
          <div class='col-sm-6 btn-group text-right' data-toggle="buttons">
            <%= f.label :timeout, class: 'radio-inline' do %>
              <%= f.radio_button :timeout, true,
                                 disabled: !widget_config.show? %>
              Yes
            <% end %>
            <%= f.label :timeout, class: 'radio-inline' do %>
              <%= f.radio_button :timeout, false,
                                 disabled: !widget_config.show? %>
              No
            <% end %>
          </div>
        </div>

        <div class="row" style='display:flex;align-items:center'>
          <div class="col-sm-6">
            <%= f.label :timeout_count, 'Close after (milliseconds)' %>
          </div>
          <div class="col-sm-6">
            <div class="input-group spinner">
              <%= f.text_field :timeout_count, min: '0', class: 'form-control',
                               disabled: !widget_config.show? ||
                                         !widget_config.timeout? %>
              <div class="input-group-btn-vertical">
                <button class="btn btn-default" type="button"><i class="fa fa-caret-up"></i></button>
                <button class="btn btn-default" type="button"><i class="fa fa-caret-down"></i></button>
              </div>
            </div>
          </div>
        </div>

      </div>

      <!-- <hr>

      <div class="form-group text-right">

        <button type="reset" id='widget-config-form-reset' class="btn btn-default">
          Cancel
        </button>

      </div> -->
    <% end %>

    <hr>

    <p>Filter settings apply only to the widget hosted on your site</p>

    <div class="form-group">

      <div class="row">
        <div class="col-sm-2">
          <label>Filter</label>
        </div>
        <div class='btn-group col-sm-10 text-right' data-toggle="buttons">
          <%= label_tag 'widget[filter]', class: 'radio-inline' do %>
            <%= radio_button_tag 'widget[filter]', 'none', true, checked: true %>
            none
          <% end %>
          <%= label_tag 'widget[filter]', class: 'radio-inline' do %>
            <%= radio_button_tag 'widget[filter]', 'category', false, disabled: company.story_categories.empty? %>
            category
          <% end %>
          <%= label_tag 'widget[filter]', class: 'radio-inline' do %>
            <%= radio_button_tag 'widget[filter]', 'product', false, disabled: company.products.empty? %>
            product
          <% end %>
        </div>
      </div>

    <!-- filter selects are outside of the form as they only apply to generating script tags -->
      <div id='widget-filter-category-container'>
        <div class="row" style="display:flex;align-items:center">
          <div class="col-sm-3">
            <label>Category</label>
          </div>
          <div class="col-sm-9">
            <%= select_tag 'category',
                  options_for_select(company.story_categories.select_options.unshift([""])),
                  class: 'widget-filter-category form-control' %>
          </div>
        </div>
      </div>
      <div id='widget-filter-product-container'>
        <div class="row" style="display:flex;align-items:center">
          <div class="col-sm-3">
            <label>Product</label>
          </div>
          <div class="col-sm-9">
            <%= select_tag 'product',
                  options_for_select(company.products.select_options.unshift([""])),
                  class: 'widget-filter-product form-control' %>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="col-sm-6">

    <div class="form-group">
      <p class="lead">Story page Widget</p>
      <p>Settings will apply to all story pages on customerstories.net</p>
      <input type='submit' form='<%= "edit_widget_config_#{widget_config.id}"  %>'
             id='widget-config-form-submit' class='btn btn-primary' value='Save Configuration'>
      <span class='ajax-confirm' style='display:none;color:green'>
            <i class='fa fa-check'></i>
          </span>&nbsp;
    </div>

    <hr>

<!-- leave spacing as is for textarea input -->
    <div class="form-group">
      <p class='lead'>Website Widget</p>
      <p>Settings will apply to the widget hosted on your site</p>
      <button type='button' id='widget-html-btn' class='btn btn-primary'>
        Generate HTML
      </button>
      <textarea class='form-control' id="widget-html"
          style='width:100%;visibility:hidden' rows="8" readonly><script id='cs-script' type='text/javascript' src='//<%= company.subdomain %>.<%= ENV["HOST_NAME"] %>/widget/cs.js' data-tab-color='' data-text-color='' data-category='' data-product='' data-delay='' data-show='' data-timeout='' data-timeout-count=''></script>
<div id='cs-container' class='cs-widget'></div></textarea>
    </div>


  </div>

</div>