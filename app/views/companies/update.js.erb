(function () {

  var company = <%= raw @company.to_json({ only: [], methods: [:previous_changes, :color_contrast] }) %>,
      flash = <%= raw @flash.to_json %>,
      $form = $('form[data-submitted="true"]');

  if (company.previous_changes.logo_url) {
    $('.navbar-brand-img img').attr('src', company.previous_changes.logo_url[1]);
  }

  if (company.previous_changes.header_color_1) {
    $('#company-profile-form .logo-upload .thumbnail')
      .css('background-color', company.previous_changes.header_color_1[1]);
    $('.admin.navbar').css('background-color', company.previous_changes.header_color_1[1]);
  }

  if (company.previous_changes.header_color_2) {
    $('#stories-header')
      .css('background-color', company.previous_changes.header_color_2[1])
      .find('h3, .icon-button').removeClass('light-background dark-background').addClass(company.color_contrast);
  }

  if (flash.mesg) {
    flashDisplay(flash.mesg, flash.status);
    toggleFormDone($form, false);
  } else {
    toggleFormDone($form, true);
  }

}());