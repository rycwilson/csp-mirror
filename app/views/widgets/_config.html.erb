
<div class="row">

  <div class="col-sm-12">

    <p class="lead">Configure a <span style="font-weight: 600">Customer Stories Plugin</span> for your website</p>

    <form class="form-horizontal">

      <div class="form-group type" style="height: 40px; display: flex; align-items: center">

        <label class="col-sm-2 control-label">Type</label>
        <div class="col-sm-10">
          <div class="btn-group" data-toggle="buttons">
            <%= label_tag 'widget[type]', class: 'radio-inline' do %>
              <%= radio_button_tag 'widget[type]', 'gallery', true %>
              Gallery
            <% end %>
            <%= label_tag 'widget[type]', class: 'radio-inline' do %>
              <%= radio_button_tag 'widget[type]', 'carousel', false %>
              Carousel
            <% end %>
            <%= label_tag 'widget[type]', class: 'radio-inline' do %>
              <%= radio_button_tag 'widget[type]', 'tabbed_carousel', false %>
              Tabbed Carousel
            <% end %>
          </div>

          <button type="button" class="demo btn btn-secondary">Demo</button>

        </div>

      </div>

      <div class="settings-container">
        <div class="form-group settings collapse">

          <div class="carousel">

            <div class="col-sm-2"></div>
            <div class="col-sm-10">
              <div class="row">
                <label class="col-sm-6 col-md-3 control-label"><span style="float: left">Page Background<span></label>
                <div class="col-sm-6 col-md-9">

                  <div class="btn-group" data-toggle="buttons">
                    <%= label_tag 'widget[type]', class: 'radio-inline' do %>
                      <%= radio_button_tag 'widget[background]', 'light', true %>
                      Light
                    <% end %>
                    <%= label_tag 'widget[type]', class: 'radio-inline' do %>
                      <%= radio_button_tag 'widget[background]', 'dark', false %>
                      Dark
                    <% end %>
                  </div>

                </div>

                <span class="help-block">The carousel has a transparent background in order to match the page it lives on. Selecting 'Light' background will result in dark scroll buttons, and vice versa.</span>

              </div>
            </div>
          </div>

          <div class="tabbed-carousel">

            <div class="col-sm-2"></div>
            <div class="col-sm-10">

              <div class="form-inline">
                <div class="form-group">

                  <%= label_tag(nil, 'Tab Color', class: 'control-label') %>
                  <%= text_field_tag(nil, '#dddddd', class: 'form-control mini-colors') %>

                </div>
                <div class="form-group">

                  <%= label_tag(nil, 'Text Color', class: 'control-label') %>
                  <%= text_field_tag(nil, '#333333', class: 'form-control mini-colors') %>

                </div>
              </div>

              <div class="form-inline">

                <div class="form-group delay">

                  <%= label_tag(nil, 'Delay', class: 'control-label') %>
                  <div class="input-group spinner">

                    <%= text_field_tag(nil, '5', min: '0', class: 'form-control') %>
                    <div class="input-group-btn-vertical">
                      <button class="btn btn-default" type="button"><i class="fa fa-caret-up"></i></button>
                      <button class="btn btn-default" type="button"><i class="fa fa-caret-down"></i></button>
                    </div>

                  </div>
                  <span class="help-block" style="display:inline-block">seconds from page load to appearance of the carousel tab</span>

                </div>
              </div>

            </div>
          </div>  <!-- .tabbed-carousel -->

        </div>
      </div>

      <div class="form-group content__radio">

        <label class="col-sm-2 control-label">Content</label>
        <div class="col-sm-10">

          <div class="btn-group" data-toggle="buttons">
            <%= label_tag('widget[content]', class: 'radio-inline') do %>
              <%= radio_button_tag('widget[content]', 'select', true) %>
              Select Stories
            <% end %>
            <%= label_tag('widget[content]', class: 'radio-inline') do %>
              <%= radio_button_tag('widget[content]', 'category', false) %>
              Filter by Category
            <% end %>
            <%= label_tag('widget[content]', class: 'radio-inline') do %>
              <%= radio_button_tag('widget[content]', 'product', false) %>
              Filter by Product
            <% end %>
          </div>

        </div>
      </div>

      <div class="form-group content__select">
        <div class="col-sm-2"></div>
        <div class="col-sm-10">
          <div style="max-width: 570px">

            <div class="content__select--stories">
              <%= select_tag(
                    'widget[stories][]',
                    grouped_options_for_select(
                      company.stories_grouped_options,
                      []
                    ),
                    {
                      include_blank: true,
                      multiple: 'true',
                      class: 'widget-stories',
                      style: 'width: 100%'
                    }
                  ) %>
            </div>

            <div class="content__select--category">
              <%= select_tag(
                    'category',
                    options_for_select(
                      company.story_categories.select_options.unshift([""])
                    )
                  ) %>

            </div>

            <div class="content__select--product">
              <%= select_tag(
                    'product',
                    options_for_select(
                      company.products.select_options.unshift([""])
                    )
                  ) %>

            </div>

          </div>

        </div>
      </div>

    </form>

  </div>
</div>


<div class="row hidden">
  <!-- appearance and behavior -->
  <div class="col-sm-6">

    <p class='lead'>Appearance and Behavior</p>

    <%= form_for widget, url: widget_company_path(company),
          method: :put, remote: true do |f| %>

      <div class="form-group">
        <div class="row color-picker">
          <div class="col-sm-6">
            <%= f.label :tab_color, 'Tab color', class: 'control-label' %>
            <%= f.text_field :tab_color, class: 'form-control mini-colors' %>
          </div>
          <div class="col-sm-6">
            <%= f.label :text_color, 'Text color', class: 'control-label' %>
            <%= f.text_field :text_color, class: 'form-control mini-colors' %>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="row">
          <div class="col-sm-7">
            <label>Show Carousel on page load?</label>
          </div>
          <div class='col-sm-5 btn-group text-right' data-toggle="buttons">
              <%= f.label :show, class: 'radio-inline' do %>
                <%= f.radio_button :show, true %>
                Yes
              <% end %>
              <%= f.label :show, class: 'radio-inline' do %>
                <%= f.radio_button :show, false %>
                No
              <% end %>
          </div>
        </div>

        <div class="row widget-show-freq <%= widget.show? ? '' : 'disabled' %>"
             style='display:flex;align-items:center'>
          <div class="col-sm-6">
            <%= f.label :show_freq, 'Show once per (days)' %>
          </div>
          <div class="col-sm-6">
            <div class="input-group spinner">
              <%= f.text_field :show_freq, min: '0', class: 'form-control',
                                disabled: !widget.show? %>
              <div class="input-group-btn-vertical">
                <button class="btn btn-default" type="button"><i class="fa fa-caret-up"></i></button>
                <button class="btn btn-default" type="button"><i class="fa fa-caret-down"></i></button>
              </div>
            </div>
          </div>
        </div>

        <div class="row widget-show-delay <%= widget.show? ? '' : 'disabled' %>"
             style='display:flex;align-items:center'>
          <div class="col-sm-6">
            <%= f.label :show_delay, 'Show after (milliseconds)' %>
          </div>
          <div class="col-sm-6">
            <div class="input-group spinner">
              <%= f.text_field :show_delay, min: '5000',
                    class: 'form-control', disabled: !widget.show? %>
              <div class="input-group-btn-vertical">
                <button class="btn btn-default" type="button"><i class="fa fa-caret-up"></i></button>
                <button class="btn btn-default" type="button"><i class="fa fa-caret-down"></i></button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="row widget-hide <%= widget.show? ? '' : 'disabled' %>">
          <div class="col-sm-7">
            <label>Hide Carousel after showing?</label>
          </div>
          <div class='col-sm-5 btn-group text-right' data-toggle="buttons">
            <%= f.label :hide, class: 'radio-inline' do %>
              <%= f.radio_button :hide, true, disabled: !widget.show? %>
              Yes
            <% end %>
            <%= f.label :hide, class: 'radio-inline' do %>
              <%= f.radio_button :hide, false, disabled: !widget.show? %>
              No
            <% end %>
          </div>
        </div>

        <div class="row widget-hide-delay <%= widget.hide? ? '' : 'disabled' %>"
             style='display:flex;align-items:center'>
          <div class="col-sm-6">
            <%= f.label :hide_delay, 'Hide after (milliseconds)' %>
          </div>
          <div class="col-sm-6">
            <div class="input-group spinner">
              <%= f.text_field :hide_delay, min: '5000', class: 'form-control',
                      disabled: !widget.hide? %>
              <div class="input-group-btn-vertical">
                <button class="btn btn-default" type="button"><i class="fa fa-caret-up"></i></button>
                <button class="btn btn-default" type="button"><i class="fa fa-caret-down"></i></button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <hr>

      <!-- <div class="form-group text-right">

        <button type="reset" id='widget-form-reset' class="btn btn-default">
          Cancel
        </button>

      </div> -->
      <div class="form-group">
        <div class="row">
          <div class="col-sm-12 text-right">
            <span class='widget-form-confirm' style='display:none;color:#5cb85c'>
                  <i class='fa fa-check'></i>
                </span>&nbsp;&nbsp;
            <input type='submit' id='widget-form-submit'
                class='btn btn-success' value='Save settings'>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- deploy to your site -->
  <div class="col-sm-6">

    <p class='lead'>Deploy to your Website</p>

    <div class="form-group">

      <div class="row">
        <div class="col-sm-2">
          <label>Filter</label>
        </div>
        <div class='btn-group col-sm-10 text-right' data-toggle="buttons">
          <%= label_tag 'widget[filter]', class: 'radio-inline' do %>
            <%= radio_button_tag 'widget[filter]', 'none', true, checked: true %>
            none
          <% end %>
          <%= label_tag 'widget[filter]', class: 'radio-inline' do %>
            <%= radio_button_tag 'widget[filter]', 'category', false, disabled: company.story_categories.empty? %>
            category
          <% end %>
          <%= label_tag 'widget[filter]', class: 'radio-inline' do %>
            <%= radio_button_tag 'widget[filter]', 'product', false, disabled: company.products.empty? %>
            product
          <% end %>
        </div>
      </div>

      <div id='widget-filter-category-container'>
        <div class="row" style="display:flex;align-items:center">
          <div class="col-sm-3">
            <label>Category</label>
          </div>
          <div class="col-sm-9">
            <%= select_tag 'category',
                  options_for_select(company.story_categories.select_options.unshift([""])),
                  class: 'widget-filter-category form-control' %>
          </div>
        </div>
      </div>

      <div id='widget-filter-product-container'>
        <div class="row" style="display:flex;align-items:center">
          <div class="col-sm-3">
            <label>Product</label>
          </div>
          <div class="col-sm-9">
            <%= select_tag 'product',
                  options_for_select(company.products.select_options.unshift([""])),
                  class: 'widget-filter-product form-control' %>
          </div>
        </div>
      </div>
    </div>

    <hr>

    <div class="row">
      <div class="col-sm-12 text-right">
        <button type='button' id='widget-html-btn' class='btn btn-success'>
          Generate HTML
        </button>
      </div>
    </div>

    <!-- leave spacing as is for textarea input -->
    <div class="row">
      <div class="col-sm-12">
        <i id='html-to-clipboard' class="fa fa-clipboard bip-clickable"></i>
        <textarea class='form-control' id="widget-html"
            style='width:100%;visibility:hidden' rows="5" readonly><script type='text/javascript' src='//<%= company.subdomain %>.<%= ENV["HOST_NAME"] %>/widgets/tab/cs.js' data-position='tab' data-category='' data-product=''></script>
<div id='cs-tab-container'></div></textarea>
      </div>
    </div>

</div>