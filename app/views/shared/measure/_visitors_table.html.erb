
<table id='measure-visitors-table' width='100%'
       class="table table-striped table-bordered">

  <thead>
    <tr>
      <th>Visitor</th>
      <th>Organization</th>
      <th>Location</th>
      <th>Visits</th>
      <th>Last visited</th>
    </tr>
  </thead>

  <tfoot>
    <tr>
      <td colspan='3'><em>
        Total: <%= Visitor.company_all(company.id).count %>
      </em></td>
      <td colspan='2'><em>
        Total: <%= VisitorSession.company_all(company.id).count %>
      </em></td>
    </tr>
  </tfoot>

  <tbody>

    <% Visitor.company_top(company.id, 100).each do |visitor| %>

      <tr>
        <td><%= visitor.clicky_uid %></td>
        <td><%= visitor.visitor_sessions.take.organization %></td>
        <td><%= visitor.visitor_sessions.take.location %></td>
        <td><%= visitor.visitor_sessions_count %></td>
        <td><%= visitor.visitor_sessions.order(timestamp: :desc).take.timestamp.strftime("%m/%d/%y") %></td>
      </tr>

    <% end %>

  </tbody>

</table>
