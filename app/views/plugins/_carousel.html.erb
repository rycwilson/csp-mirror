
<div class="cs-overlay-container <%= pre_selected_story.present? ? 'pre-selected' : '' %>">
  <div class="cs-main">

    <div class="cs-grid cs-grid-carousel">

      <div class="cs-container-fluid" style="visibility: hidden">

        <div class="cs-row">

          <div style="<%= company.subdomain == 'pixlee' ? 'display:none' : '' %>" class="cs-scroll col-xs-2 col-sm-1 <%= background ? 'bg-' + background : '' %>">
            <div class="cs-scroll-left">
            </div>
          </div>

          <div class="cs-rh-container col-xs-8 <%= company.subdomain == 'pixlee' ? 'col-sm-12' : 'col-sm-10' %>">

            <!-- text-center in case not enough stories to fill carousel -->
            <div class="cs-row row-horizon text-center">

              <!-- <div class="cs-overlay-container"> -->
              <!-- the bootstrap styling starts to break down after 30 stories -->
              <% stories.each do |story|  %>

                <div class="col-xs-8 col-sm-5 col-md-3">

                  <%= render(
                        'stories/shared/story_card',
                        {
                          company: company,
                          story: story,
                          is_curator: false,
                          is_plugin: true,
                          is_external: true,
                          grayscale: grayscale,
                          logo_only: logos_only,
                          background: background,
                          plugin_type: 'carousel',
                          is_pre_selected: pre_selected_story.try(:id) == story.id
                        }
                      ) %>

                </div>

              <% end %>

            </div>
          </div>

          <div style="<%= company.subdomain == 'pixlee' ? 'display:none' : '' %>" class="cs-scroll col-xs-2 col-sm-1 <%= background ? 'bg-' + background : '' %>">
            <div class="cs-scroll-right">
            </div>
          </div>

          <% if company.subdomain != 'pixlee' %>

            <div class="col-xs-12 cs-scroll-xs-container">
              <div class="cs-row">
                <div class="col-xs-2 cs-scroll-xs text-center">
                  <div class="cs-scroll-xs-left"></div>
                </div>
                <div class="col-xs-8 cs-pagination-xs">
                </div>
                <div class="col-xs-2 cs-scroll-xs text-center">
                  <div class="cs-scroll-xs-right"></div>
                </div>
              </div>
            </div>

          <% end %>

        </div>

        <% if company.subdomain != 'pixlee' %>

          <div class="cs-row cs-pagination <%= background ? 'bg-' + background : '' %>">
          </div>

        <% elsif stories.length > 1 %>

          <div class="cs-nav">
            <span style="float: right">
              <span class="cs-prev bookend">Previous</span>&nbsp;&nbsp;/&nbsp;&nbsp;<span class="cs-next">Next</span>
            </span>
          </div>

        <% end %>

      </div>

    </div>  <!-- .cs-grid -->

    <section class="cs-content">

      <div class="scroll-wrap">

        <% stories.first(16).each do |story| %>

          <div class="content__item content__item--carousel">

            <% if pre_selected_story.try(:id) == story.id %>

              <%= render(
                    story.published? ? 'stories/show/story' : 'stories/show/preview',
                    {
                      company: story.company,
                      story: story,
                      contributors: contributors,
                      related_stories: nil,
                      is_plugin: true,
                      plugin_type: 'carousel',
                      window_width: window_width
                    }
                  ) %>

            <% end %>

          </div>

        <% end %>

      </div>

      <!-- <button class="hidden-xs close-button"><i class="fa fa-times-thin fa-3x"></i><span>Close</span></button> -->

      <button type="button" class="visible-xs-inline cs-close-xs">
        <span class="fa-stack">
          <i class="fa fa-circle fa-stack-2x"></i>
          <i class="fa fa-times-thin fa-inverse fa-stack-1x"></i>
        </span>
      </button>

    </section>

  </div>
</div>
