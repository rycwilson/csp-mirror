
function cspInitGallery ($, $container, maxRows) {
  console.log('cspInitGallery')
  // console.log('maxRows', maxRows)

  var scrollBarWidth = window.innerWidth - document.documentElement.clientWidth;

  if (maxRows) {
    var maxGalleryHeight = maxRows * $container.find('a.cs-thumbnail').first().outerHeight(true);
    // console.log('maxGalleryHeight', maxGalleryHeight)
    $container.find('a.cs-thumbnail').each(function () {
      if (($(this).offset().top - $container.find('.cs-grid').offset().top) > maxGalleryHeight) {
        // console.log('do not display', $(this))
        $(this).css('display', 'none');
      }
    })
  }

  // the padding will compensate for the margin that toggles with presence/absence of scrollbar
  // => avoids a change in gallery width and wrapping story cards when an overlay is opened/closed
  // => need to fix the space this creates in .cs-content
  $container.find('.cs-grid')
    // .css('padding', '0 calc(' + scrollBarWidth.toString() + 'px - (100vw - 100%))')
    .css('visibility', 'visible');

}
