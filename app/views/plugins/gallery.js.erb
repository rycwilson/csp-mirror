
function cspInitGallery ($, $container, maxRows, preSelectedStoryIndex) {
  // console.log('cspInitGallery')

  var scrollBarWidth = window.innerWidth - document.documentElement.clientWidth;

  if (maxRows) {
    var maxGalleryHeight = maxRows * $container.find('a.cs-thumbnail').first().outerHeight(true);
    $container.find('a.cs-thumbnail').each(function () {
      if (($(this).offset().top - $container.find('.cs-grid').offset().top) > maxGalleryHeight) {
        $(this).css('display', 'none');
      }
    })
  }

  if (preSelectedStoryIndex) {
    $container[0].scrollIntoView({ block: 'center' });
  }
  $container.find('.cs-grid').css('visibility', 'visible');

}
