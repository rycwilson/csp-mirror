
<!-- adwords image template -->
<% content_for :underscore_templates do %>

  <script id='adwords-image-template' type="text/template">

    <!-- // locals: image_index -->

    <li class='adwords-image new-adwords-image hidden'>
      <div class="fileinput fileinput-exists" data-provides="fileinput">
        <div class="fileinput-preview thumbnail" data-trigger="fileinput"></div>
        <input type="file"
               name="company[adwords_images_attributes][{{= image_index }}][image_url]"
               id="company_adwords_images_attributes_{{= image_index }}_image_url">
        <span><i class='change-image glyphicon glyphicon-pencil'></i></span>
        <span><i class='remove-image glyphicon glyphicon-remove'></i></span>
      </div>
    </li>

  </script>
<% end %>

<div class="row enable-promote-type form-group">
  <div class="col-sm-12">

    <%= render 'adwords/enable_promote_type', { company: company } %>

  </div>
</div>

<%= form_for company, url: adwords_config_company_path(company),
      method: 'put', remote: 'true', authenticity_token: true,
      html: {
        id: 'promote-settings-form',
        class: 'directUpload',
        data: { 'form-data' => (@s3_direct_post.fields),
                'url' => @s3_direct_post.url,
                'host' => URI.parse(@s3_direct_post.url).host
      } } do |f| %>

  <div class="form-inline">
    <div class="form-group">

        <%= f.label :adwords_short_headline, "Headline (max 25 characters)", class: 'control-label' %>
        <%= f.text_field :adwords_short_headline, class: 'form-control', style: 'width:300px' %>

    </div>
  </div>

  <div class="row">

    <div class="col-sm-4 form-group">

      <div>
        <%= f.label :adwords_logo_url, 'Sponsored Stories Logo',
              class: 'adwords-logo' %>&nbsp;&nbsp;
        <a tabindex='0' class='adwords-logo image-requirements' role='button'
           data-toggle='popover' data-placement='top' data-trigger='focus'
           title='Requirements - Sponsored Stories Logo'
           data-min='128x128' data-ratio='1:1' data-suggest='1200x1200'>requirements</a>
      </div>

      <div class="fileinput adwords-logo <%= company.adwords_logo_url.blank? ? 'fileinput-new' : 'fileinput-exists' %>" data-provides="fileinput">

        <div class="fileinput-new thumbnail">
          <%= image_tag ADWORDS_LOGO_PLACEHOLDER_URL, alt: 'logo image' %>
        </div>

        <div class="fileinput-preview fileinput-exists thumbnail"
            data-trigger="fileinput">
          <%= image_tag company.adwords_logo_url, alt: 'logo image' %>
        </div>

        <div class="photo-btns">
          <div class="btn btn-default btn-file">
            <div class="fileinput-new">
              Select image
            </div>
            <div class="fileinput-exists">
              Change
            </div>
            <%= f.file_field :adwords_logo_url %>
            <!-- below doesn't work, must use form builder -->
            <!-- <input type="file" name="user[photo_url]" class='form-control' id='user_photo_url'> -->
          </div>
          <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">
            Remove
          </a>
        </div>

      </div>  <!-- /.fileupload -->

    </div>

    <div class="col-sm-8 form-group">

      <div>
        <%= f.label 'default_adwords_image', 'Sponsored Stories Image (default)',
              class: 'adwords-image' %>&nbsp;&nbsp;
        <a tabindex='0' class='adwords-image image-requirements' role='button'
           data-toggle='popover' data-placement='top' data-trigger='focus'
           title='Requirements - Sponsored Stories Image'
           data-min='600x314' data-ratio='1.91:1' data-suggest='1200x628'>requirements</a>
      </div>

      <div class="fileinput adwords-image <%= company.adwords_images.default.blank? ? 'fileinput-new' : 'fileinput-exists' %>" data-provides="fileinput">

        <div class="fileinput-new thumbnail">
          <%= image_tag ADWORDS_IMAGE_PLACEHOLDER_URL, alt: 'logo' %>
        </div>

        <div class="fileinput-preview fileinput-exists thumbnail"
            data-trigger="fileinput">
          <%= image_tag company.adwords_images.default.try(:image_url), alt: 'marketing image' %>
        </div>

        <div class="photo-btns">
          <div class="btn btn-default btn-file">
            <div class="fileinput-new">
              Select image
            </div>
            <div class="fileinput-exists">
              Change
            </div>
            <%= f.file_field 'default_adwords_image' %>
            <!-- below doesn't work, must use form builder -->
            <!-- <input type="file" name="user[photo_url]" class='form-control' id='user_photo_url'> -->
          </div>
          <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">
            Remove
          </a>
        </div>

      </div>  <!-- /.fileupload -->

    </div>
  </div>

  <label for="">Additional images for Sponsored Stories</label>&nbsp;&nbsp;

  <a tabindex='0' class='adwords-image image-requirements' role='button'
     data-toggle='popover' data-placement='top' data-trigger='focus'
     title='Requirements - Sponsored Stories Image'
     data-min='600x314' data-ratio='1.91:1' data-suggest='1200x628'>requirements</a>

  <div><button type='button' class='new-adwords-image btn btn-secondary'>Add image</button></div>

  <ul class='adwords-images list-inline'>

    <%= f.fields_for :adwords_images do |image_f| %>

      <li class="adwords-image <%= image_f.object.company_default? ? 'hidden' : '' %>">
        <div class="fileinput fileinput-exists" data-provides="fileinput">
          <div class="fileinput-preview thumbnail" data-trigger="fileinput">
            <%= image_tag image_f.object.image_url, alt: 'adwords image' %>
          </div>
          <%= image_f.file_field(:image_url, class: 'hidden') %>
          <%= image_f.check_box(:_destroy, { class: 'hidden' }, 'true', 'false') %>
          <span><i class='change-image glyphicon glyphicon-pencil'></i></span>
          <span><i class='remove-image glyphicon glyphicon-remove'></i></span>
        </div>
      </li>

    <% end %>

  </ul>

  <hr>

  <div class="row">
    <div class="col-sm-12 text-right">
      <button type="submit" class="btn btn-success">
        Save changes
      </button>&nbsp;
      <button type="reset" class="btn btn-default">
        Cancel
      </button>
    </div>
  </div>

<% end %>





