
function initSummernote () {

  $('#contribution-request-editor').summernote({
    focus: false,  // this does not appear to work (or does it?)
    toolbar: [
      // ['style', ['style']],
      ['font', ['bold', 'italic', 'underline']], //, 'clear']],
      // ['fontname', ['fontname']],
      // ['color', ['color']],
      ['para', ['ul', 'ol', 'paragraph']],
      // ['height', ['height']],
      // ['table', ['table']],
      // ['insert', ['link', 'picture', 'hr']],
      // ['view', ['codeview']],
      // ['help', ['help']]
    ],
  });

  $('#email-template-editor').summernote({
    toolbar: [
      // ['style', ['style']],
      ['font', ['bold', 'italic', 'underline']], //, 'clear']],
      ['fontname', ['fontname']],
      ['fontsize', ['fontsize']],
      // ['color', ['color']],
      ['para', ['ul', 'ol', 'paragraph']],
      ['height', ['height']],
      // ['table', ['table']],
      ['insert', ['link', 'picture', 'hr']],
      ['view', ['codeview']],
      // ['help', ['help']]
    ],
  });

  $('#story-content-editor').summernote({
    // maxHeight: 400,
    toolbar: [
      ['style', ['style']],
      ['font', ['bold', 'italic', 'underline']], //, 'clear']],
      ['fontname', ['fontname']],
      ['fontsize', ['fontsize']],
      // ['color', ['color']],
      ['para', ['ul', 'ol', 'paragraph']],
      ['height', ['height']],
      ['table', ['table']],
      ['insert', ['link', 'picture', 'hr']],
      ['view', ['codeview']],
      ['help', ['help']]
    ],
  });

}

function initEmailRequestEditor () {

  var curatorPhotoPlaceholder = "<%= asset_path('user-photo-missing.png') %>",
      curatorDetailsPlaceholder =
        '<p>' +
        '<img id=&quot;curator-img&quot; src=&quot;' + curatorPhotoPlaceholder + '&quot; style=&quot;width:80px;margin-bottom:4px&quot; alt=&quot;curator photo&quot;><br>' +
        '<span>[curator_full_name]</span><br>' +
        '<span>[curator_position]</span><br>' +
        '<span>[company_name]</span><br>' +
        '<span>[curator_email]</span>\xa0|\xa0<span>[curator_phone]</span>';
        '</p>'

  var PlaceholderDropdown = function (context) {
    var ui = $.summernote.ui;
    var button = ui.buttonGroup([
      ui.button({
        className: 'btn btn-default dropdown-toggle',
        data: {
          toggle: 'dropdown',
          placement: 'top'
        },
        contents: 'Insert\xa0\xa0<span class="caret"></span>',
        // tooltip: 'Insert a data placeholder'
      }),
      ui.dropdown({
        className: 'summernote-custom',
        contents: '<ul class="list-unstyled" style="margin-bottom:0">' +
                    '<li data-placeholder="<span contenteditable=&quot;false&quot;>[company_name]</span>">' +
                      '<a href="javascript:;">Company name</a>' +
                    '</li>' +
                    '<li data-placeholder="<span contenteditable=&quot;false&quot;>[customer_name]</span>">' +
                      '<a href="javascript:;">Customer name</a>' +
                    '</li>' +
                    '<li data-placeholder="<span contenteditable=&quot;false&quot;>[contributor_first_name]</span>">' +
                      '<a href="javascript:;">Contributor first name</a>' +
                    '</li>' +
                    '<li data-placeholder="<span contenteditable=&quot;false&quot;>[contributor_full_name]</span>">' +
                      '<a href="javascript:;">Contributor full name</a>' +
                    '</li>' +
                    '<li data-placeholder="<span contenteditable=&quot;false&quot;>[referral_intro]</span>">' +
                      '<a href="javascript:;">Referral introduction</a>' +
                    '</li>' +
                    '<li data-placeholder="' + curatorDetailsPlaceholder + '">' +
                      '<a href="javascript:;">Curator details</a>' +
                    '</li>' +
                    '<li data-placeholder="<span>[contribution_submission_link=&quot;Link text goes here&quot;]</span>">' +
                      '<a href="javascript:;">Contribution submission link</a>' +
                    '</li>' +
                    '<li data-placeholder="<span>[feedback_submission_link=&quot;Link text goes here&quot;]</span>">' +
                      '<a href="javascript:;">Feedback submission link</a>' +
                    '</li>' +
                    '<li data-placeholder="<span>[unsubscribe_link=&quot;Link text goes here&quot;]</span>">' +
                      '<a href="javascript:;">Unsubscribe link</a>' +
                    '</li>' +
                  '</ul>',
        callback: function ($dropdown) {
          $dropdown.find('li').each(function () {
            $(this).on('click', function () {
              context.invoke('editor.saveRange');
              context.invoke('editor.pasteHTML', $(this).data('placeholder'));
              context.invoke('editor.restoreRange');
            });
          });
        }
      })
    ]);
    return button.render();   // return button as jquery object
  };

  $('#email-request-body-editor').summernote({
    toolbar: [
      // ['style', ['style']],
      ['font', ['bold', 'italic', 'underline']], //, 'clear']],
      ['fontname', ['fontname']],
      ['fontsize', ['fontsize']],
      // ['color', ['color']],
      ['para', ['ul', 'ol', 'paragraph']],
      ['height', ['height']],
      // ['table', ['table']],
      ['insert', ['link', 'picture', 'hr']],
      ['view', ['codeview']],
      // ['help', ['help']]
      ['customButton', ['placeholderDropdown']]
    ],
    buttons: {
      placeholderDropdown: PlaceholderDropdown
    }
  });
}