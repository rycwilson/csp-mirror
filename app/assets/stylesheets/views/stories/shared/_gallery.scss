
#stories-gallery, #curate-gallery, #related-stories {

  &#curate-gallery {
    margin-top: -10px;
  }

  &#stories-gallery {
    margin: 0 auto;
    // accommodate the sign in footer
    min-height: 100vh;
    padding-bottom: 20px;
  }

  li {
    display: inline-block;
    vertical-align: top;
    a.thumbnail {
      position: relative;  // this is for positioning the caption at the bottom
      width: 242px;
      height: 170px;
      text-align: center;
      padding: 0;
      margin-bottom: 0;
      border: 1px solid transparent;
      border-radius: 0;
      // following settings lifted from chrome new tab page
      box-shadow: 0 2px 2px 0 rgba(0,0,0,0.16), 0 0 0 1px rgba(0,0,0,0.08);
      transition: box-shadow 0.23s cubic-bezier(0.4, 0, 0.2, 1);
      .thumbnail-view {
        position: relative;
        height: 80%;
        width: 100%;
        line-height: 130px;
        cursor: pointer;
        .thumbnail-view-hover {
          position: absolute;
          display: flex;
          align-items: center;
          justify-content: center;
          height: 100%;
          width: 100%;
          padding: 12px;
          background: transparent;
          border-radius: 3px 3px 0 0;
          -webkit-transform: translateY(-100%);
          -moz-transform: translateY(-100%);
          -ms-transform: translateY(-100%);
          -o-transform: translateY(-100%);
          transition: all 0.23s ease-in-out;
          p {
            font: {
              family: 'Lato', 'Trebuchet MS', 'Open Sans', arial, sans-serif;
              size: 15px;
              weight: 600;
            }
            line-height: 26px;
            color: #444;
            letter-spacing: normal;
            margin-bottom: 0;
          }
        }
        img {
          display: inline-block;
          vertical-align: middle;
          max-height: 100%;
          max-width: 100%;
          padding: 20px;
          opacity: 1;
          transition: opacity 0.23s ease-in-out;
          -moz-transition: opacity 0.23s ease-in-out;
          -webkit-transition: opacity 0.23s ease-in-out;
          // this compensates for a bug in chrome, which causes images of a
          // certain aspect ratio to expand and contract very slightly on
          // hover and opacity transition
          // ref: https://stackoverflow.com/questions/20886991
          -webkit-transform: translateZ(0);
        }
      }
      .caption {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 35%;
        font: {
          family: 'Lato';
          size: 14px;
        }
        color: #444;
        border-radius: 0;
        background: transparent;
        span {
          position: absolute;
          width: 90%;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
        }
        span.click-action:after {
          text-decoration: underline;
          visibility: hidden;
          transition: all 0s;
        }
      }
      &.public.published .caption span.click-action:after {
        content: 'Read Story';
      }
      &.public.preview-published .caption span.click-action:after {
        content: 'See More';
      }
      &.curator .caption span.click-action:after {
        content: 'Configure Story';
      }
      &:active {
        -webkit-filter: brightness(94%);
        box-shadow: 0 3px 8px 0 rgba(0,0,0,0.2), 0 0 0 1px rgba(0,0,0,0.08)
      }
      &.public.logo-published {
        pointer-events: none;
      }
    }
    &:not(.still-loading) {
      i.fa-spin { display: none; }
    }
    &.loading {
      a.thumbnail {
        // border-color: #ccc;
        // box-shadow: 0 2px 2px 0 rgba(0,0,0,0.16), 0 0 0 1px rgba(0,0,0,0.08);
        -webkit-filter: brightness(95%);
        border: 1px solid transparent;
        box-shadow: 0 3px 8px 0 rgba(0,0,0,0.2), 0 0 0 1px rgba(0,0,0,0.08);
        .thumbnail-view-hover { transform: none; }
        img { opacity: 0; }
        .caption {
          span.customer-name {
            visibility: hidden;
          }
          span.click-action:after {
            visibility: visible;
          }
        }
      }
      &.still-loading {
        .thumbnail-view, .caption {
          opacity: 0.05;
        }
        // the icon needs to be wrapped in a div in order for the transform to work
        // (center if element is centered, not top-left of element)
        .still-loading-container {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          font-size: 20px;
          color: #666;
        }
      }
    }
    &:hover:not(.og-expanded) {
      a.curator, a.public:not(.logo-published) {
        border: 1px solid transparent;
        box-shadow: 0 3px 8px 0 rgba(0,0,0,0.2), 0 0 0 1px rgba(0,0,0,0.08);
        .caption {
          span.customer-name {
            visibility: hidden;
            transition: all 0.23s step-end;
          }
          span.click-action:after {
            visibility: visible;
            transition: all 0.23s step-end;
          }
        }
      }
    }
    // keep the title in place while the preview window is open
    &.og-expanded a.title-present, a.title-present:hover {
      .thumbnail-view-hover {
        -webkit-transform: translateY(0%);
        -moz-transform: translateY(0%);
        -ms-transform: translateY(0%);
        -o-transform: translateY(0%);
      }
      img {
        opacity: 0.05;
      }
    }
  }


}

@media only screen and (max-width: 767px) {
  #stories-gallery, #curate-gallery, #related-stories {
    li {
      margin: 15px;
      a.thumbnail {
        .thumbnail-view {
          .thumbnail-view-hover p {
          }
          img {
            padding: 23px;
          }
        }
        .caption {
        }
      }
    }
  }
}

@media only screen and (min-width: 768px) and (max-width: 991px) {
  #stories-gallery, #curate-gallery {
    li {
      margin: 15px;
      a.thumbnail {
        width: 200px;  // 210
        height: 140px;  // 140
        .thumbnail-view {
          line-height: 106px;
          .thumbnail-view-hover p {
            font-size: 14px;
            line-height: 22px;
          }
        }
        .caption {
          font-size: 13px;
        }
      }
    }
  }
  #related-stories {
    li {
      margin: 15px
    }
  }
}

@media only screen and (min-width: 992px) {
  #stories-gallery, #curate-gallery, #related-stories {
    // margin-right: -40px; // pull it over a bit (only apply if filters present)
    // &.no-filters { margin-right: 0; }
    li {
      margin: 20px;
      a.thumbnail {
        width: 242px;
        height: 170px;
        .thumbnail-view {
          height: 80%;
          .thumbnail-view-hover p {
          }
          img {
            padding: 20px;
          }
        }
        .caption {
        }
      }
    }
    &:not(#stories-gallery) li {
      margin: 15px;
    }
  }
}

@media only screen and (min-width: 992px) and (max-width: 1199px) {
  #related-stories {
    li {
      margin: 15px;
      a.thumbnail {
        width: 200px;  // 210
        height: 140px;  // 140
        .thumbnail-view {
          line-height: 106px;
          .thumbnail-view-hover p {
            font-size: 14px;
            line-height: 22px;
          }
        }
        .caption {
          font-size: 13px;
        }
      }
    }
  }
}

@media only screen and (min-width: 1200px) {
}